(window["webpackJsonp_sendo-web-chat_web_"]=window["webpackJsonp_sendo-web-chat_web_"]||[]).push([[4],{"+GyL":function(module,exports,__webpack_require__){module.exports={livestream:"livestream_1pyI",hoverActions:"hoverActions_20Ga",textContent:"textContent_2bj-"}},"+Kzv":function(module,exports,__webpack_require__){module.exports={modalDialog:"modalDialog_TSGf",modalContent:"modalContent_3L9X",modalHeader:"modalHeader_oxYz",onWAP:"onWAP_3hvK",closeBtn:"closeBtn_2qY3",modalBody:"modalBody_1uPY",modalFooter:"modalFooter_2KuL",submitBtn:"submitBtn_2APD",hide:"hide_1SsU"}},"/TAp":function(module,exports,__webpack_require__){module.exports={biggestEmoji:"biggestEmoji_1KbQ",biggerEmoji:"biggerEmoji_3Q4Z"}},"0N+C":function(module,exports,__webpack_require__){module.exports={chatChiDai:"chatChiDai_29Ej",onDesktop:"onDesktop_mq8a",activeConversation:"activeConversation_3Ckc",avatarContainer:"avatarContainer_2BWX",content:"content_2WCS",header:"header_2Wyd",title:"title_2oTl",time:"time_3QUc",chatContent:"chatContent_D-gA",isNotRead:"isNotRead_1GQd"}},"1SQU":function(module,exports,__webpack_require__){module.exports={hidden:"hidden_iki2",hide:"hide_3yQZ",page:"page_2Jaj",body:"body_3uih",left:"left_3WBS",right:"right_1ldC",onDesktop:"onDesktop_3FKt",loadingContainer:"loadingContainer_1MWW"}},"2AO3":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var auth_namespaceObject={};__webpack_require__.r(auth_namespaceObject),__webpack_require__.d(auth_namespaceObject,"setAuthenticationData",(function(){return auth_setAuthenticationData})),__webpack_require__.d(auth_namespaceObject,"setUserInfo",(function(){return auth_setUserInfo}));var messageDisplayBox_namespaceObject={};__webpack_require__.r(messageDisplayBox_namespaceObject),__webpack_require__.d(messageDisplayBox_namespaceObject,"updateLogicAutoScroll",(function(){return messageDisplayBox_updateLogicAutoScroll})),__webpack_require__.d(messageDisplayBox_namespaceObject,"enableAutoScrollToBottom",(function(){return messageDisplayBox_enableAutoScrollToBottom})),__webpack_require__.d(messageDisplayBox_namespaceObject,"disableAutoScroll",(function(){return disableAutoScroll})),__webpack_require__.d(messageDisplayBox_namespaceObject,"setParentContextData",(function(){return setParentContextData})),__webpack_require__.d(messageDisplayBox_namespaceObject,"clearParentContextData",(function(){return clearParentContextData})),__webpack_require__.d(messageDisplayBox_namespaceObject,"alreadyScrollLatestImage",(function(){return alreadyScrollLatestImage})),__webpack_require__.d(messageDisplayBox_namespaceObject,"markNotScrolledForImages",(function(){return markNotScrolledForImages}));var app_namespaceObject={};__webpack_require__.r(app_namespaceObject),__webpack_require__.d(app_namespaceObject,"setNetworkStatus",(function(){return setNetworkStatus})),__webpack_require__.d(app_namespaceObject,"setXmppStatus",(function(){return setXmppStatus})),__webpack_require__.d(app_namespaceObject,"displayChatList",(function(){return app_displayChatList})),__webpack_require__.d(app_namespaceObject,"hideChatList",(function(){return hideChatList})),__webpack_require__.d(app_namespaceObject,"displayChatDetail",(function(){return displayChatDetail})),__webpack_require__.d(app_namespaceObject,"hideChatDetail",(function(){return hideChatDetail})),__webpack_require__.d(app_namespaceObject,"changeMobileStep",(function(){return changeMobileStep})),__webpack_require__.d(app_namespaceObject,"updateWAPLayout",(function(){return app_updateWAPLayout})),__webpack_require__.d(app_namespaceObject,"displayLastScreen",(function(){return app_displayLastScreen})),__webpack_require__.d(app_namespaceObject,"handleError",(function(){return app_handleError})),__webpack_require__.d(app_namespaceObject,"displayLoadingAppData",(function(){return app_displayLoadingAppData})),__webpack_require__.d(app_namespaceObject,"finishLoadingAppData",(function(){return app_finishLoadingAppData})),__webpack_require__.d(app_namespaceObject,"setTextAndSettingByRole",(function(){return app_setTextAndSettingByRole}));var chat_namespaceObject={};__webpack_require__.r(chat_namespaceObject),__webpack_require__.d(chat_namespaceObject,"connectXmpp",(function(){return connectXmpp})),__webpack_require__.d(chat_namespaceObject,"disconnectXmpp",(function(){return disconnectXmpp})),__webpack_require__.d(chat_namespaceObject,"getUserStatus",(function(){return chat_getUserStatus})),__webpack_require__.d(chat_namespaceObject,"displaySearchLoading",(function(){return displaySearchLoading})),__webpack_require__.d(chat_namespaceObject,"hideSearchLoadingWithoutCallApi",(function(){return hideSearchLoadingWithoutCallApi})),__webpack_require__.d(chat_namespaceObject,"activeConversation",(function(){return activeConversation})),__webpack_require__.d(chat_namespaceObject,"sendMessage",(function(){return chat_sendMessage})),__webpack_require__.d(chat_namespaceObject,"sendOrderMessage",(function(){return chat_sendOrderMessage})),__webpack_require__.d(chat_namespaceObject,"sendProductMessage",(function(){return sendProductMessage})),__webpack_require__.d(chat_namespaceObject,"sendSeenMessage",(function(){return chat_sendSeenMessage})),__webpack_require__.d(chat_namespaceObject,"sendErrorImage",(function(){return sendErrorImage})),__webpack_require__.d(chat_namespaceObject,"sendImage",(function(){return chat_sendImage})),__webpack_require__.d(chat_namespaceObject,"sendVoucher",(function(){return chat_sendVoucher})),__webpack_require__.d(chat_namespaceObject,"deleteConversationLiveStream",(function(){return deleteConversationLiveStream})),__webpack_require__.d(chat_namespaceObject,"updateContextFromParent",(function(){return chat_updateContextFromParent})),__webpack_require__.d(chat_namespaceObject,"openNewChat",(function(){return openNewChat})),__webpack_require__.d(chat_namespaceObject,"refreshMsgDetails",(function(){return refreshMsgDetails})),__webpack_require__.d(chat_namespaceObject,"clearConversation",(function(){return clearConversation})),__webpack_require__.d(chat_namespaceObject,"loadNewConversation",(function(){return loadNewConversation})),__webpack_require__.d(chat_namespaceObject,"fetchAndSetShopInfo",(function(){return chat_fetchAndSetShopInfo})),__webpack_require__.d(chat_namespaceObject,"fetchSellerInfo",(function(){return chat_fetchSellerInfo})),__webpack_require__.d(chat_namespaceObject,"fetchConvertShopIdForSeller",(function(){return chat_fetchConvertShopIdForSeller})),__webpack_require__.d(chat_namespaceObject,"setCurrentTopic",(function(){return setCurrentTopic})),__webpack_require__.d(chat_namespaceObject,"setFilterType",(function(){return setFilterType})),__webpack_require__.d(chat_namespaceObject,"updateChatListByFilterType",(function(){return updateChatListByFilterType})),__webpack_require__.d(chat_namespaceObject,"saveChattingSenLiveState",(function(){return saveChattingSenLiveState})),__webpack_require__.d(chat_namespaceObject,"clearChattingSenLiveState",(function(){return clearChattingSenLiveState})),__webpack_require__.d(chat_namespaceObject,"restoreChattingSenLiveState",(function(){return restoreChattingSenLiveState})),__webpack_require__.d(chat_namespaceObject,"saveChattingChatState",(function(){return saveChattingChatState})),__webpack_require__.d(chat_namespaceObject,"clearChattingChatState",(function(){return clearChattingChatState})),__webpack_require__.d(chat_namespaceObject,"restoreChattingChatState",(function(){return restoreChattingChatState})),__webpack_require__.d(chat_namespaceObject,"saveCurrentScrollState",(function(){return saveCurrentScrollState})),__webpack_require__.d(chat_namespaceObject,"setChatSystemType",(function(){return setChatSystemType}));var sendOrderData_namespaceObject={};__webpack_require__.r(sendOrderData_namespaceObject),__webpack_require__.d(sendOrderData_namespaceObject,"startLoading",(function(){return startLoading})),__webpack_require__.d(sendOrderData_namespaceObject,"stopLoading",(function(){return stopLoading})),__webpack_require__.d(sendOrderData_namespaceObject,"displayLoading",(function(){return displayLoading}));var sendProductData_namespaceObject={};__webpack_require__.r(sendProductData_namespaceObject),__webpack_require__.d(sendProductData_namespaceObject,"startLoading",(function(){return sendProductData_startLoading})),__webpack_require__.d(sendProductData_namespaceObject,"stopLoading",(function(){return sendProductData_stopLoading})),__webpack_require__.d(sendProductData_namespaceObject,"displayLoading",(function(){return sendProductData_displayLoading})),__webpack_require__.d(sendProductData_namespaceObject,"clearLoadedProducts",(function(){return clearLoadedProducts})),__webpack_require__.d(sendProductData_namespaceObject,"loadProductFirstTime",(function(){return loadProductFirstTime})),__webpack_require__.d(sendProductData_namespaceObject,"updateProducts",(function(){return updateProducts}));var regenerator=__webpack_require__("o0o1"),regenerator_default=__webpack_require__.n(regenerator),assertThisInitialized=__webpack_require__("PJYZ"),assertThisInitialized_default=__webpack_require__.n(assertThisInitialized),inheritsLoose=__webpack_require__("VbXa"),inheritsLoose_default=__webpack_require__.n(inheritsLoose),defineProperty=__webpack_require__("lSNA"),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__("q1tI"),react_default=__webpack_require__.n(react),Recompose_cjs=__webpack_require__("XcqQ"),lib=__webpack_require__("Vg22"),get=__webpack_require__("7EGn"),query_string=__webpack_require__("cr+I"),query_string_default=__webpack_require__.n(query_string),bindActionCreators=__webpack_require__("+4qQ"),userHelper=__webpack_require__("xbIa"),ChiDaiHelper=__webpack_require__("V69r");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var auth_setAuthenticationData=function(authenData){var user_fpt_id=Object(get.a)(authenData,"userInfo.fpt_id","");return user_fpt_id&&ChiDaiHelper.b.setDefaultChatID(user_fpt_id),{type:"SET_USER_AUTHENTICATION",payload:{authenData:authenData}}},auth_setUserInfo=function(userInfo){return function(dispatch,getState){var oldUserInfo=getState().auth.userInfo,newUserInfo=userHelper.a.parseNewUserInfo(userInfo);newUserInfo&&newUserInfo.shopFptId&&newUserInfo.shopFptId!==oldUserInfo.fpt_id&&(newUserInfo.shopPartnerFptId=oldUserInfo.fpt_id,newUserInfo.fpt_id=newUserInfo.shopFptId,userHelper.a.isShopPartner=!0);var updatedUserInfo=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},oldUserInfo,{},newUserInfo);userHelper.a.saveCurrentUserInfo(updatedUserInfo),updatedUserInfo.fpt_id&&ChiDaiHelper.b.setDefaultChatID(updatedUserInfo.fpt_id),dispatch({type:"SET_USER_INFO",payload:{updatedUserInfo:updatedUserInfo}})}},find=__webpack_require__("CpTu"),filter=__webpack_require__("Z0Cl"),notifyNewMessageToParent=__webpack_require__("8KuT"),xmpp=__webpack_require__("N6vC"),res_const=__webpack_require__("1wGr"),messageDisplayBox_updateLogicAutoScroll=function(conversation){return function(dispatch,getState){var chatState=getState().chat;(chatState.chatSystemType!==res_const.f.CHAT||conversation!==chatState.savedChattingChatState.conversation.chat_id)&&(chatState.chatSystemType!==res_const.f.SENLIVE||conversation!==chatState.savedChattingSenLiveState.conversation.chat_id)?dispatch(messageDisplayBox_enableAutoScrollToBottom()):dispatch(disableAutoScroll())}},messageDisplayBox_enableAutoScrollToBottom=function(){return function(dispatch,getState){return getState().chat.chatSystemType===res_const.f.SENLIVE?dispatch(clearChattingSenLiveState()):dispatch(clearChattingChatState()),dispatch({type:"messageDisplayBox/MSG_DISPLAY_BOX_ENABLE_AUTO_SCROLL"})}},disableAutoScroll=function(){return function(dispatch){return dispatch({type:"messageDisplayBox/MSG_DISPLAY_BOX_DISABLE_AUTO_SCROLL"})}},setParentContextData=function(parentContextData){return function(dispatch){return dispatch({type:"messageDisplayBox/MSG_DISPLAY_BOX_SET_PARENT_CONTEXT_DATA",payload:{parentContextData:parentContextData}})}},clearParentContextData=function(){return function(dispatch){return dispatch({type:"messageDisplayBox/MSG_DISPLAY_BOX_CLEAR_PARENT_CONTEXT_DATA"})}},alreadyScrollLatestImage=function(){return function(dispatch){return dispatch({type:"MDB_ALREADY_SCROLL_LATEST_IMG"})}},markNotScrolledForImages=function(){return function(dispatch){return dispatch({type:"MDB_NOT_SCROLL_LATEST_IMG"})}},setting=__webpack_require__("1wi/"),setNetworkStatus=function(isOnline){return isOnline?{type:"app/APP_SET_NETWORK_ONLINE"}:{type:"app/APP_SET_NETWORK_OFFLINE"}},setXmppStatus=function(xmppStatus){return{type:"app/APP_SET_XMPP_STATUS",payload:{xmppStatus:xmppStatus}}},app_displayChatList=function(){return function(dispatch){dispatch({type:"app/DISPLAY_CHAT_LIST"})}},hideChatList=function(){return function(dispatch){dispatch({type:"app/HIDE_CHAT_LIST"})}},displayChatDetail=function(){return function(dispatch){dispatch({type:"app/DISPLAY_CHAT_DETAIL"})}},hideChatDetail=function(){return function(dispatch){dispatch({type:"app/HIDE_CHAT_DETAIL"})}},changeMobileStep=function(mobileStep){return function(dispatch){dispatch({type:"app/CHANGE_MOBILE_STEPS",payload:{mobileStep:mobileStep}})}},app_updateWAPLayout=function(){return function(dispatch){dispatch({type:"app/ON_WAP"})}},app_displayLastScreen=function(){return function(dispatch,getState){var mobileStep=Object(get.a)(getState,"app.mobileStep",res_const.k.APP.MOBILE.STEP.CHAT_LIST);mobileStep===res_const.k.APP.MOBILE.STEP.CHAT_LIST&&(hideChatDetail()(dispatch),app_displayChatList()(dispatch)),mobileStep===res_const.k.APP.MOBILE.STEP.CHAT_DETAIL&&(displayChatDetail()(dispatch),hideChatList()(dispatch))}},app_handleError=function(message){return function(dispatch){dispatch({type:"app/APP_DISPLAY_ERROR",payload:{message:message}}),setTimeout((function(){dispatch({type:"app/APP_HIDE_ERROR"})}),1e3*setting.l)}},app_displayLoadingAppData=function(){return function(dispatch,getState){dispatch({type:"APP_LOAD_DATA_LOADING"}),Object(get.a)(getState(),"app.isDisplayLoadingData",!1)||setTimeout((function(){dispatch({type:"APP_LOAD_DATA_DISPLAY_LOADING"})}),setting.m)}},app_finishLoadingAppData=function(){return function(dispatch,getState){dispatch({type:"APP_LOAD_DATA_DONE"})}},app_setTextAndSettingByRole=function(role){return role===res_const.F.SELLER?{type:"app/SET_SELLER_CONTEXT"}:{type:"app/SET_BUYER_CONTEXT"}},chatHelper=__webpack_require__("G77k"),format_messageContent=__webpack_require__("t4TX"),res_text=__webpack_require__("i8SR"),googleAnalytics=__webpack_require__("J9m0"),actions_xmpp=__webpack_require__("epg5"),debugHelper=__webpack_require__("/wUs"),data_fetch=__webpack_require__("5LLV");function setQuoteForNextMsg(quoteData){return{type:"sender/SET_QUOTE_NEXT_MSG",payload:{quoteData:quoteData}}}function chat_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function chat_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?chat_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):chat_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var connectXmpp=function(params){return function(dispatch){dispatch({type:"CHAT_START_CONNECT_XMPP"}),dispatch({type:"XMPP_CONNECT",payload:params})}},disconnectXmpp=function(){return{type:"XMPP_DISCONNECT"}},chat_getUserStatus=function(userIds,shopIds){return void 0===shopIds&&(shopIds=[]),function(dispatch){var isHaveChiDaiId=!1,userIdsWithoutChiDai=Object(filter.a)(userIds,(function(userId){return!(!userId||"0"===userId)||(isHaveChiDaiId=!0,!1)})),shopIdsWithoutChiDai=shopIds;if(isHaveChiDaiId&&(shopIdsWithoutChiDai=Object(filter.a)(shopIds,(function(shopId){return Boolean(!!shopId&&"0"!==shopId)})),dispatch({type:"CHAT_SET_CHI_DAI_STATUS"})),userIdsWithoutChiDai.length){var params={user_id:userIdsWithoutChiDai.join(",")};userHelper.a.getRole()===res_const.F.BUYER&&(params.type="shop",shopIdsWithoutChiDai.length&&(params.shop_id=shopIdsWithoutChiDai.join(",")));var url=Object(data_fetch.a)()+"/chat/v7/user/status?"+query_string_default.a.stringify(params),headers=new Headers;headers.append("cache-control","no-cache"),fetch(url,{headers:headers,credentials:"omit"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(userInfo){if(!userInfo||!userInfo.result||!userInfo.result.data)throw Error("empty response");dispatch({type:"CHAT_GET_USER_STATUS",payload:userInfo.result.data})})).catch((function(error){debugHelper.a.captureWithSentry("[API][user_status]"+error)}))}}},displaySearchLoading=function(searchValue){return{type:"DISPLAY_SEARCH_LOADING",payload:{searchValue:searchValue}}},hideSearchLoadingWithoutCallApi=function(){return{type:"HIDE_SEARCH_LOADING_WITHOUT_DATA"}},activeConversation=function(conversation){return function(dispatch){return dispatch({type:"CHAT_ACTIVE_CONVERSATION",payload:conversation})}},chat_sendMessage=function(messageData){return function(dispatch,getState){var nextMsgData=getState().newChat.sender.nextMsgData;return Boolean(messageData.message_object_type===res_const.q.TEXT&&nextMsgData.isSendNextTime&&nextMsgData.type===res_const.q.QUOTE)&&(messageData.message_object_type=res_const.q.QUOTE,messageData.nextMsgData=nextMsgData,messageData.message_object=Object(xmpp.d)(messageData),dispatch({type:"sender/CLEAR_NEXT_MSG_DATA"})),dispatch({type:"XMPP_SEND_MSG",payload:messageData})}},chat_sendOrderMessage=function(messageData){return function(dispatch){return dispatch({type:"XMPP_SEND_MSG",payload:messageData})}},sendProductMessage=function(messageData){return function(dispatch){return dispatch({type:"XMPP_SEND_MSG",payload:messageData})}},chat_sendSeenMessage=function(seenData){return function(dispatch){return dispatch({type:"XMPP_SEND_SEEN_MSG",payload:seenData})}},sendErrorImage=function(errorMessageData){return function(dispatch){return dispatch({type:"CREATE_ASYNC_MSG_DONE"}),dispatch({type:"XMPP_SEND_TEMP_MSG",payload:chat_objectSpread({},errorMessageData)})}},chat_sendImage=function(messageData){return function(dispatch){var imageCanvasBlob=messageData.imageCanvasBlob;dispatch({type:"XMPP_SEND_TEMP_MSG",payload:chat_objectSpread({},messageData)}),dispatch({type:"CREATE_ASYNC_MSG_SENDING"});var formData=new FormData;return formData.append("file_to_upload",imageCanvasBlob,imageCanvasBlob.name),fetch(Object(data_fetch.c)()+"/mob/upload/image",{method:"POST",credentials:"omit",body:formData}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(response){return dispatch({type:"CREATE_ASYNC_MSG_DONE"}),dispatch({type:"messageDisplayBox/MSG_DISPLAY_BOX_CLEAR_PARENT_CONTEXT_DATA"}),messageData.isUpdateExistedMsg=!0,messageData.isTempMessage=!1,googleAnalytics.f(messageData),dispatch({type:"XMPP_SEND_MSG",payload:chat_objectSpread({},messageData,{imageUrl:response.data})})})).catch((function(error){return dispatch({type:"CREATE_ASYNC_MSG_DONE"}),debugHelper.a.captureWithSentry("[API][upload_media3]"+error),messageData.error={type:res_const.k.MSG_DETAIL.ERROR_TYPE.IMAGE,msg:res_text.b.MESSAGE_ERROR.UPLOAD_03},messageData.isUpdateExistedMsg=!0,messageData.isTempMessage=!1,dispatch({type:"XMPP_SEND_TEMP_MSG",payload:chat_objectSpread({},messageData)})}))}},chat_sendVoucher=function(messageData){if(messageData.voucherInfo)return function(dispatch,getState){var idmessage=Object(xmpp.n)();messageData.idmessage=idmessage,messageData.isTempMessage=!0,dispatch({type:"XMPP_SEND_TEMP_MSG",payload:chat_objectSpread({},messageData)}),dispatch({type:"CREATE_ASYNC_MSG_SENDING"});var state=getState(),userInfo=Object(get.a)(state,"auth.userInfo",null),shop_id=Object(get.a)(userInfo,"shop_external_id",""),fpt_id=Object(get.a)(userInfo,"fpt_id",""),access_token=Object(get.a)(state,"auth.access_token",""),createVoucherSubmitData=chat_objectSpread({},messageData.voucherInfo.submitData,{shop_id:shop_id,fpt_id:fpt_id}),createVoucherApiUrl=Object(data_fetch.a)()+"/chat/public/v10/seller/voucher";return fetch(createVoucherApiUrl,{headers:{Authorization:access_token,Accept:"application/json","Content-Type":"application/json","cache-control":"no-cache"},method:"POST",credentials:"omit",body:JSON.stringify(createVoucherSubmitData)}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(response){dispatch({type:"CREATE_ASYNC_MSG_DONE"}),dispatch({type:"messageDisplayBox/MSG_DISPLAY_BOX_CLEAR_PARENT_CONTEXT_DATA"}),messageData.isUpdateExistedMsg=!0,messageData.isTempMessage=!1;var voucherResult=Object(get.a)(response,"result",null);return messageData.voucherInfo.id=parseInt(voucherResult.VoucherId,10),messageData.voucherInfo.voucher_attr={voucher_code:voucherResult.Code,voucher_stt:"available",voucher_val:parseInt(voucherResult.VoucherValue,10),require_price:parseInt(voucherResult.MinOrderAmount,10),expired_time:new Date(voucherResult.ExpireDate).getTime()},dispatch({type:"XMPP_SEND_MSG",payload:chat_objectSpread({},messageData)})})).catch((function(error){return dispatch({type:"CREATE_ASYNC_MSG_DONE"}),messageData.error={type:res_const.k.MSG_DETAIL.ERROR_TYPE.VOUCHER,msg:res_text.b.MESSAGE_ERROR.UPLOAD_04},messageData.isUpdateExistedMsg=!0,messageData.isTempMessage=!1,dispatch({type:"XMPP_SEND_TEMP_MSG",payload:chat_objectSpread({},messageData)})}))}},deleteConversationLiveStream=function(conversation){return{type:"chat/DELETE_CONVERSATION_LIVESTREAM",payload:{chat_id:conversation.chat_id}}};function initGetStatusAllUser(){return function(dispatch,getState){dispatch({type:"CHAT_INIT_GET_ALL_USER_STATUS"});var reduxState=getState(),chatList=Object(get.a)(reduxState,"chat.chatList",[]);if(chatList.length){var userIds=Object(xmpp.k)(chatList),shopIds=[];userHelper.a.getRole()===res_const.F.BUYER&&(shopIds=Object(xmpp.m)(chatList)),chat_getUserStatus(userIds,shopIds)(dispatch)}}}var chat_updateBuyerUserInfo=function(userInfo){return function(dispatch){dispatch(auth_setUserInfo(userInfo))}},chat_updateContextFromParent=function(iframeContext){return void 0===iframeContext&&(iframeContext={}),function(dispatch,getState){var contextType,contextData,state,chatList,totalUnread,newChatType,product,order,openFromPage,shopInfo,partner,reduxState,shop_info,partner_info,shop_id,userId,receiver,newChatId,topic,parentContextData,chat_id;return regenerator_default.a.async((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(contextType=Object(get.a)(iframeContext,"type",null),contextData=Object(get.a)(iframeContext,"data",null),contextType&&contextData){_context2.next=4;break}return _context2.abrupt("return");case 4:_context2.t0=contextType,_context2.next=_context2.t0===res_const.v.INIT_FROM_PARENT?7:_context2.t0===res_const.v.GET_TOTAL_UNREAD?11:_context2.t0===res_const.v.TOGGLE_CHAT?17:_context2.t0===res_const.v.OPEN_CHAT?27:_context2.t0===res_const.v.OPEN_CHAT_WITH_SHOP?27:_context2.t0===res_const.v.OPEN_CHAT_WITH_PRODUCT?27:_context2.t0===res_const.v.OPEN_CHAT_WITH_QUERY?80:88;break;case 7:return dispatch({type:"APP_INIT_FROM_PARENT_SITE"}),userHelper.a.getRole()===res_const.F.BUYER&&chat_updateBuyerUserInfo(contextData.userInfo)(dispatch),setTimeout((function(){var filterType;return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(startConnectXmpp()(dispatch,getState),getState().app.isLoadedHistory){_context.next=8;break}return app_displayLoadingAppData()(dispatch,getState),dispatch({type:"CHAT_CLEAR_HISTORY"}),filterType=res_const.l.ALL,dispatch(setFilterType(filterType)),_context.next=8,regenerator_default.a.awrap(Object(actions_xmpp.fetchHistoryListAsync)({type:filterType},!0)(dispatch,getState));case 8:case"end":return _context.stop()}}))}),1e3*getState().app.ROLE_SETTING.DELAY_LOAD_HISTORY_TIME_SECOND),_context2.abrupt("break",89);case 11:return state=getState(),chatList=Object(get.a)(state,"chat.chatList",[]),totalUnread=0,chatList&&chatList.length&&(totalUnread=Object(chatHelper.r)(chatList)),Object(notifyNewMessageToParent.a)("TOTAL_UNREAD",{unRead:totalUnread}),_context2.abrupt("break",89);case 17:if(contextData.isToggled){_context2.next=23;break}dispatch({type:"app/APP_SET_CHAT_WINDOW_STATUS",payload:{chatWindowStatus:res_const.k.APP.CHAT_WINDOW_STATUS.CLOSED}}),Object(get.a)(getState(),"app.isOnWAP",!1)&&(dispatch(clearConversation()),hideChatDetail()(dispatch),app_displayChatList()(dispatch),changeMobileStep(res_const.k.APP.MOBILE.STEP.CHAT_LIST)(dispatch)),_context2.next=26;break;case 23:return dispatch({type:"app/APP_SET_CHAT_WINDOW_STATUS",payload:{chatWindowStatus:res_const.k.APP.CHAT_WINDOW_STATUS.OPENED}}),_context2.next=26,regenerator_default.a.awrap(dispatch(initChatFromToggleAsync()));case 26:return _context2.abrupt("break",89);case 27:if(newChatType=contextData.type,product=contextData.product,order=contextData.order,openFromPage=contextData.openFromPage,shopInfo=contextData.shopInfo,partner=contextData.partner,newChatType||(contextType===res_const.v.OPEN_CHAT_WITH_SHOP&&(newChatType=res_const.u.WITH_SHOP_TOPIC),contextType===res_const.v.OPEN_CHAT_WITH_PRODUCT&&(newChatType=res_const.u.WITH_PRODUCT_TOPIC)),newChatType!==res_const.u.WITH_PRODUCT_TOPIC||product){_context2.next=31;break}return _context2.abrupt("return");case 31:if(newChatType!==res_const.u.WITH_ORDER_TOPIC||order){_context2.next=33;break}return _context2.abrupt("return");case 33:if(openFromPage||(openFromPage=res_const.w.BUYER_PRODUCT_DETAIL),reduxState=getState(),!Object(get.a)(reduxState,"app.isOpeningNewChat",!1)){_context2.next=38;break}return _context2.abrupt("return");case 38:if(dispatch({type:"OPEN_NEW_CHAT_OPENING"}),googleAnalytics.d(openFromPage),startConnectXmpp()(dispatch,getState),shop_info=null,partner_info=null,userHelper.a.getRole()!==res_const.F.SELLER){_context2.next=48;break}shop_info=chat_objectSpread({},Object(get.a)(reduxState,"auth.userInfo",{}),{shop_name:Object(get.a)(reduxState,"auth.userInfo.full_name","")}),partner_info=partner,_context2.next=56;break;case 48:if(userHelper.a.getRole()!==res_const.F.BUYER){_context2.next=56;break}if(!(shop_id=parseInt(Object(get.a)(product,"shop_info.shop_id",0))||parseInt(Object(get.a)(shopInfo,"shop_id",0))||parseInt(Object(get.a)(shopInfo,"merchant_id",0))||parseInt(Object(get.a)(shopInfo,"external_id",0)))){_context2.next=56;break}return _context2.next=53,regenerator_default.a.awrap(chat_fetchAndSetShopInfo(shop_id)(dispatch,getState));case 53:(shop_info=_context2.sent)||(product&&product.shop_info?(shopInfoFromBuyer=product.shop_info,shop_info=chat_objectSpread({},shopInfoFromBuyer,{shop_phone:shopInfoFromBuyer.phone_number,fpt_id:shopInfoFromBuyer.customer_id})):shop_info=convertShopInfoFromShopInfoBuyer(shopInfo)),partner_info=shop_info;case 56:if(partner_info&&partner_info.fpt_id){_context2.next=61;break}return dispatch({type:"OPEN_NEW_CHAT_DONE"}),_context2.next=60,regenerator_default.a.awrap(dispatch(initChatFromToggleAsync()));case 60:return _context2.abrupt("return");case 61:userId=Object(get.a)(reduxState,"auth.userInfo.fpt_id",""),receiver=Object(chatHelper.m)(partner_info,userHelper.a.getRole()),newChatId=Object(chatHelper.e)(userId,receiver.partner_id,userHelper.a.getRole()),topic=null,_context2.t1=newChatType,_context2.next=_context2.t1===res_const.u.WITH_PRODUCT_TOPIC?68:_context2.t1===res_const.u.WITH_ORDER_TOPIC?70:_context2.t1===res_const.u.WITH_SHOP_TOPIC?72:74;break;case 68:return topic=Object(format_messageContent.b)(product),_context2.abrupt("break",75);case 70:return topic=Object(format_messageContent.a)(order),_context2.abrupt("break",75);case 72:return topic=Object(format_messageContent.c)(shop_info),_context2.abrupt("break",75);case 74:return _context2.abrupt("break",75);case 75:return parentContextData=Object(chatHelper.f)(newChatId,topic,shop_info),openNewChat(Object(xmpp.e)(newChatId,receiver,parentContextData),parentContextData)(dispatch,getState),dispatch({type:"OPEN_NEW_CHAT_DONE"}),_context2.abrupt("break",89);case 80:if(contextData.query&&contextData.query.chat){_context2.next=82;break}return _context2.abrupt("return");case 82:return dispatch({type:"app/APP_SET_CHAT_WINDOW_STATUS",payload:{chatWindowStatus:res_const.k.APP.CHAT_WINDOW_STATUS.OPENED}}),startConnectXmpp()(dispatch,getState),chat_id=contextData.query.chat,googleAnalytics.d(res_const.w.PUSH_NOTIFICATION),openChatFromHistory(chat_id)(dispatch,getState),_context2.abrupt("break",89);case 88:return _context2.abrupt("break",89);case 89:case"end":return _context2.stop()}var shopInfoFromBuyer}))}};function initChatFromToggleAsync(){return function(dispatch,getState){var reduxState,filterType;return regenerator_default.a.async((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(startConnectXmpp()(dispatch,getState),(reduxState=getState()).app.isLoadedHistory){_context3.next=12;break}return app_displayLoadingAppData()(dispatch,getState),dispatch({type:"CHAT_CLEAR_HISTORY"}),filterType=res_const.l.ALL,dispatch(setFilterType(filterType)),_context3.next=9,regenerator_default.a.awrap(Object(actions_xmpp.fetchHistoryListAsync)({type:filterType},!0)(dispatch,getState));case 9:reduxState.chat.isDidInitGetAllUserStatus||initGetStatusAllUser()(dispatch,getState),_context3.next=14;break;case 12:Object(get.a)(reduxState,"chat.isDidInitGetAllUserStatus",!1)||initGetStatusAllUser()(dispatch,getState);case 14:case"end":return _context3.stop()}}))}}function openNewChat(newConversation,parentContextData){return function(dispatch,getState){var reduxState,filterType,finishOpeningChatChecker;return regenerator_default.a.async((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(dispatch(setChatSystemType(res_const.f.CHAT)),!(reduxState=getState()).app.isLoadedHistory){_context4.next=9;break}Object(get.a)(reduxState,"chat.isDidInitGetAllUserStatus",!1)||initGetStatusAllUser()(dispatch,getState),getDetailForNewConversation(newConversation,parentContextData,dispatch,getState),displayChatForNewConversation(getState(),dispatch),_context4.next=18;break;case 9:return app_displayLoadingAppData()(dispatch,getState),dispatch({type:"CHAT_CLEAR_HISTORY"}),filterType=res_const.l.ALL,dispatch(setFilterType(filterType)),_context4.next=15,regenerator_default.a.awrap(Object(actions_xmpp.fetchHistoryListAsync)({type:filterType},!0)(dispatch,getState));case 15:reduxState.chat.isDidInitGetAllUserStatus||initGetStatusAllUser()(dispatch,getState),getDetailForNewConversation(newConversation,parentContextData,dispatch,getState),displayChatForNewConversation(getState(),dispatch);case 18:finishOpeningChatChecker=setInterval((function(){var isLoadingAppData=Object(get.a)(getState(),"app.isLoadingAppData",!1),isLoadingDetail=Object(get.a)(getState(),"app.isLoadingDetail",!1);isLoadingAppData||isLoadingDetail||(dispatch({type:"OPEN_NEW_CHAT_DONE"}),clearInterval(finishOpeningChatChecker))}),1e3);case 19:case"end":return _context4.stop()}}))}}function openChatFromHistory(chat_id){return function(dispatch,getState){var filterType,historyDetailAction,chatDetails,newConversation,partnerUserId;return regenerator_default.a.async((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(getState().app.isLoadedHistory){_context5.next=7;break}return app_displayLoadingAppData()(dispatch,getState),dispatch({type:"CHAT_CLEAR_HISTORY"}),filterType=res_const.l.ALL,dispatch(setFilterType(filterType)),_context5.next=7,regenerator_default.a.awrap(Object(actions_xmpp.fetchHistoryListAsync)({type:filterType},!0)(dispatch,getState));case 7:return getState().chat.isDidInitGetAllUserStatus||initGetStatusAllUser()(dispatch,getState),_context5.next=10,regenerator_default.a.awrap(Object(actions_xmpp.fetchHistoryDetailAsync)(chat_id)(dispatch,getState));case 10:if(historyDetailAction=_context5.sent,(chatDetails=Object(get.a)(historyDetailAction,"payload.history",[]))&&chatDetails.length){_context5.next=14;break}return _context5.abrupt("return");case 14:return newConversation=chat_objectSpread({},chatDetails[0]),loadNewConversation(newConversation)(dispatch,getState),newConversation.partner_id&&(partnerUserId=Object(xmpp.j)(newConversation.partner_id),chat_getUserStatus([partnerUserId])(dispatch)),activeConversation(newConversation)(dispatch,getState),displayChatForNewConversation(getState(),dispatch),_context5.abrupt("return");case 20:case"end":return _context5.stop()}}))}}function startConnectXmpp(){return function(dispatch,getState){var reduxState=getState();if(!Object(get.a)(reduxState,"chat.isStartConnectXMPP",!1)){var userId=Object(get.a)(reduxState,"auth.userInfo.fpt_id",""),access_token=Object(get.a)(reduxState,"auth.access_token",""),userFullName=Object(get.a)(reduxState,"auth.userInfo.full_name","");if(!userId||!access_token||!userFullName)return;connectXmpp()(dispatch)}}}function getDetailForNewConversation(newConversation,parentContextData,dispatch,getState){Object(actions_xmpp.fetchHistoryDetailAsync)(newConversation.chat_id)(dispatch,getState).then((function(getDetailAction){var chatHistory=Object(get.a)(getState(),"chat.chatList",[]),existedConversation=Object(find.a)(chatHistory,(function(conversation){return Boolean(conversation.chat_id===newConversation.chat_id)})),chatDetails=Object(get.a)(getDetailAction,"payload.history",[]);if(chatDetails.length||dispatch(clearConversation()),existedConversation||chatDetails.length){if(existedConversation){var shop_id=parseInt(existedConversation.shop_id,10);Boolean(shop_id)||(shop_id=parseInt(newConversation.shop_id,10)),newConversation=chat_objectSpread({},existedConversation,{shop_id:shop_id.toString()})}else newConversation.content=chatDetails[0].content,newConversation.product_id=chatDetails[0].product_id,newConversation.product_image=chatDetails[0].product_image,newConversation.topic=chatDetails[0].topic;setCurrentTopic(Object(get.a)(newConversation,"topic",null))(dispatch)}else parentContextData.isNew=!0;if(setParentContextData(parentContextData)(dispatch),loadNewConversation(newConversation)(dispatch,getState),newConversation.partner_id){var partnerUserId=Object(xmpp.j)(newConversation.partner_id);chat_getUserStatus([partnerUserId])(dispatch)}activeConversation(newConversation)(dispatch,getState)}))}function convertShopInfoFromShopInfoBuyer(shopInfoFromBuyer){return chat_objectSpread({},shopInfoFromBuyer,{shop_id:shopInfoFromBuyer.merchant_id||shopInfoFromBuyer.external_id,shop_phone:shopInfoFromBuyer.telephone,shop_url:shopInfoFromBuyer.website||shopInfoFromBuyer.deep_link})}function displayChatForNewConversation(state,dispatch){Object(get.a)(state,"app.isOnWAP",!1)&&(changeMobileStep(res_const.k.APP.MOBILE.STEP.CHAT_DETAIL)(dispatch),hideChatList()(dispatch),displayChatDetail()(dispatch)),dispatch({type:"app/APP_SET_CHAT_WINDOW_STATUS",payload:{chatWindowStatus:res_const.k.APP.CHAT_WINDOW_STATUS.OPENED}})}var refreshMsgDetails=function(){return function(dispatch){return dispatch({type:"chat/CHAT_REFRESH_MSG_DETAILS"})}},clearConversation=function(){return function(dispatch){dispatch({type:"chat/CHAT_CLEAR_CONVERSATION"}),dispatch({type:"messageDisplayBox/MSG_DISPLAY_BOX_CLEAR_PARENT_CONTEXT_DATA"})}},loadNewConversation=function(conversation){return function(dispatch){return dispatch({type:"chat/CHAT_LOAD_NEW_CONVERSATION",payload:{conversation:conversation}})}},chat_fetchAndSetShopInfo=function(shopId){return function(dispatch,getState){return new Promise((function(resolvePromise){var state=getState(),shopInfos=Object(get.a)(state,"chat.shopInfos",{});if(!Boolean(shopInfos[shopId])){var url=Object(data_fetch.a)()+"/chat/public/v10/seller/detail/"+shopId,headers=new Headers;return headers.append("cache-control","no-cache"),fetch(url,{headers:headers,credentials:"omit"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(json){var shopInfoResult=json.result,shopInfo=chat_objectSpread({},shopInfoResult,{shop_id:shopInfoResult.shop_id.toString()});shopInfo&&shopInfo.fpt_id?(dispatch({type:"chat/CHAT_SET_SHOP_INFO",payload:{shopId:shopId,shopInfo:shopInfo}}),resolvePromise(shopInfo)):resolvePromise(null)})).catch((function(error){debugHelper.a.captureWithSentry("[API][shop_detail]"+error),resolvePromise(null)}))}resolvePromise(shopInfos[shopId])}))}},chat_fetchSellerInfo=function(shopId,userFptId){return function(dispatch,getState){var access_token=Object(get.a)(getState(),"auth.access_token","");if(!access_token||!shopId)return null;var headers=new Headers;headers.append("Authorization",access_token),headers.append("cache-control","no-cache"),dispatch({type:"CHAT_FETCH_SELLER_INFO_LOADING"});var getSellerInfoUrl=Object(data_fetch.a)()+"/chat/public/v10/seller/info/"+userFptId+"?shop_id="+shopId;return fetch(getSellerInfoUrl,{headers:headers,credentials:"omit"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){var result=Object(get.a)(jsonData,"result",null),shopInfoSeller={fpt_id:result.userName,logo:result.shopLogo,name:result.name,url:result.systemURL};if(!shopInfoSeller.fpt_id)throw Error("Invalid fpt_id");return dispatch({type:"CHAT_FETCH_SELLER_INFO_SUCCESS"}),shopInfoSeller})).catch((function(){dispatch({type:"CHAT_FETCH_SELLER_INFO_FAILED"})}))}},chat_fetchConvertShopIdForSeller=function(shopId){return function(dispatch){var headers=new Headers;headers.append("cache-control","no-cache"),dispatch({type:"CHAT_FETCH_CONVERT_SHOP_ID_LOADING"});var apiUrl=Object(data_fetch.a)()+"/chat/public/v10/seller/sync/shop/"+shopId;return fetch(apiUrl,{headers:headers,credentials:"omit"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){var result=Object(get.a)(jsonData,"result",null);dispatch({type:"CHAT_FETCH_CONVERT_SHOP_ID_SUCCESS",payload:result})})).catch((function(error){debugHelper.a.captureWithSentry("[API][convert_shop_id]"+error)}))}},setCurrentTopic=function(currentTopic){return function(dispatch){dispatch({type:"CHAT_SET_CURRENT_TOPIC",payload:{currentTopic:currentTopic}})}},setFilterType=function(filterType){return{type:"chat/SET_CHAT_LIST_FILTER_TYPE",payload:{filterType:filterType}}},updateChatListByFilterType=function(){return{type:"chat/UPDATE_CHAT_LIST_BY_FILTER_TYPE"}},saveChattingSenLiveState=function(){return function(dispatch,getState){var reduxState=getState();dispatch({type:"chat/SAVE_CHATTING_SENLIVE_STATE",payload:{currentChatState:{conversation:reduxState.chat.conversation,chatDetails:reduxState.chat.chatDetails,detailPaging:reduxState.chat.detailPaging,scrollTop:reduxState.chat.chatDetailScrollTop,type:reduxState.chat.filterType}}})}},clearChattingSenLiveState=function(){return function(dispatch){dispatch({type:"chat/CLEAR_CHATTING_SENLIVE_STATE"})}},restoreChattingSenLiveState=function(){return function(dispatch,getState){var savedChattingSenLiveState=getState().chat.savedChattingSenLiveState;savedChattingSenLiveState.chatDetails.length&&dispatch({type:"chat/RESTORE_CHATTING_SENLIVE_STATE",payload:{savedChattingSenLiveState:savedChattingSenLiveState}})}},saveChattingChatState=function(){return function(dispatch,getState){var reduxState=getState();dispatch({type:"chat/SAVE_CHATTING_CHAT_STATE",payload:{currentChatState:{conversation:reduxState.chat.conversation,chatDetails:reduxState.chat.chatDetails,detailPaging:reduxState.chat.detailPaging,scrollTop:reduxState.chat.chatDetailScrollTop,type:reduxState.chat.filterType}}})}},clearChattingChatState=function(){return function(dispatch){dispatch({type:"chat/CLEAR_CHATTING_CHAT_STATE"})}},restoreChattingChatState=function(){return function(dispatch,getState){var savedChattingChatState=getState().chat.savedChattingChatState;savedChattingChatState.chatDetails.length&&dispatch({type:"chat/RESTORE_CHATTING_CHAT_STATE",payload:{savedChattingChatState:savedChattingChatState}})}},saveCurrentScrollState=function(scrollTop){return{type:"chat/SAVE_CURRENT_SCROLL_STATE",payload:{scrollTop:scrollTop}}},setChatSystemType=function(chatSystemType){return{type:"chat/SET_CHAT_SYSTEM_TYPE",payload:{chatSystemType:chatSystemType}}},classnames=__webpack_require__("TSYQ"),classnames_default=__webpack_require__.n(classnames),helpers_styles=__webpack_require__("wTzx"),List_ChatList=__webpack_require__("xA2L"),ChatList_default=__webpack_require__.n(List_ChatList),he=__webpack_require__("ktc5"),he_default=__webpack_require__.n(he),debounce=__webpack_require__("hbEN"),timeSince=__webpack_require__("1UAq"),helpers_extends=__webpack_require__("pVnL"),extends_default=__webpack_require__.n(helpers_extends),_ref=react_default.a.createElement("path",{fill:"#000",fillOpacity:".4",fillRule:"nonzero",d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"});function ChatDeleteIcon(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:24,height:24,viewBox:"0 0 24 24"},props),_ref)}function disableRubberBand(overlayElement,event,lastSingleTouchPositionY){var clientY=event.targetTouches[0].clientY-lastSingleTouchPositionY;0===overlayElement.scrollTop&&clientY>0&&event.preventDefault(),function(overlayElement){return overlayElement.scrollHeight-overlayElement.scrollTop<=overlayElement.clientHeight}(overlayElement)&&clientY<0&&event.preventDefault()}ChatDeleteIcon.displayName="ChatDeleteIcon";var Loading=__webpack_require__("5DSb"),Seen=__webpack_require__("Td4U"),Seen_default=__webpack_require__.n(Seen),Sent=__webpack_require__("5hnp"),Sent_default=__webpack_require__.n(Sent),ChatListView_ChatListView=__webpack_require__("bzU8"),ChatListView_default=__webpack_require__.n(ChatListView_ChatListView),ChiDaiConversation_ChiDaiConversation=__webpack_require__("0N+C"),ChiDaiConversation_default=__webpack_require__.n(ChiDaiConversation_ChiDaiConversation),normalizeImgUrl=__webpack_require__("jT4e"),includes=__webpack_require__("NFsq"),forEach=__webpack_require__("OZf9");function isValidAvatar(url){return url&&!Object(includes.a)(url,"shop_blank-logo")&&!Object(includes.a)(url,"icon_user_default")&&"null"!==url}var Avatar_Avatar=__webpack_require__("ZV+Z"),Avatar_default=__webpack_require__.n(Avatar_Avatar),CharacterImage_CharacterImage=__webpack_require__("SNgB"),CharacterImage_default=__webpack_require__.n(CharacterImage_CharacterImage),Avatar_CharacterImage_CharacterImage=function(props){var _useState=Object(react.useState)(setting.f.VALID_BG_COLORS[0]),bgColor=_useState[0],setBgColor=_useState[1],_useState2=Object(react.useState)(setting.f.DEFAULT_CHARS),displayChars=_useState2[0],setDisplayChars=_useState2[1];return Object(react.useEffect)((function(){var indexColorByName=props.fullName.length%setting.f.VALID_BG_COLORS.length;setBgColor(setting.f.VALID_BG_COLORS[indexColorByName]);var displayCharsFromFullName=function(fullName){var result="",fullNameParts=fullName.split(" ");return Object(forEach.a)(fullNameParts,(function(fullNamePart){if(!(result.length>=2)){var firstChar=fullNamePart.charAt(0).toUpperCase();isNaN(firstChar)&&(result+=firstChar)}})),result}(props.fullName);displayCharsFromFullName&&setDisplayChars(displayCharsFromFullName)}),[]),react_default.a.createElement("div",{className:classnames_default()(CharacterImage_default.a.characterImage,props.className),style:{backgroundColor:""+bgColor}},react_default.a.createElement("span",null,displayChars))};Avatar_CharacterImage_CharacterImage.displayName="CharacterImage",Avatar_CharacterImage_CharacterImage.defaultProps={fullName:"",className:""};var Avatar_CharacterImage=Avatar_CharacterImage_CharacterImage,TimeStampAutoRefresh_TimeStampAutoRefresh=function(props){var _useState=Object(react.useState)(props.formatTimeFunction(props.timestamp)),displayTimeText=_useState[0],setDisplayTimeText=_useState[1];return Object(react.useEffect)((function(){if(props.timestamp){setDisplayTimeText(props.formatTimeFunction(props.timestamp));var updateTimeInterval=setInterval((function(){setDisplayTimeText(props.formatTimeFunction(props.timestamp))}),1e3*setting.E);return function(){clearInterval(updateTimeInterval)}}}),[props.timestamp]),react_default.a.createElement(react.Fragment,null,displayTimeText)};TimeStampAutoRefresh_TimeStampAutoRefresh.displayName="TimeStampAutoRefresh";var Chat_TimeStampAutoRefresh=TimeStampAutoRefresh_TimeStampAutoRefresh,ChatListView_Avatar_Avatar=function(props){var _cx,_cx2,_cx3;function getResponsiveStyles(className){return Object(helpers_styles.a)(Avatar_default.a,className,props.isOnWAP)}var isDisplayOfflineSince=!1;!props.isOnline&&props.isOnWAP&&Object(chatHelper.u)(props.conversation.timestamp)&&(isDisplayOfflineSince=!0);var avatarUrl=props.conversation.partner_avatar,fullName=props.conversation.partner_fullname;return react_default.a.createElement("div",{className:classnames_default()(getResponsiveStyles(Avatar_default.a.avatar),(_cx={},_cx[Avatar_default.a.available]=props.isOnline,_cx),props.className)},react_default.a.createElement("div",{className:classnames_default()(getResponsiveStyles(Avatar_default.a.logo),(_cx2={},_cx2[Avatar_default.a.AIConversation]=props.isAIConversation,_cx2))},isValidAvatar(avatarUrl)&&react_default.a.createElement("img",{className:Avatar_default.a.image,src:Object(normalizeImgUrl.a)(avatarUrl),alt:"avatar "+fullName}),!isValidAvatar(avatarUrl)&&react_default.a.createElement(Avatar_CharacterImage,{fullName:fullName})),!props.isOnlyDisplayAvatar&&react_default.a.createElement("div",{className:classnames_default()(getResponsiveStyles(Avatar_default.a.onlineStatus),(_cx3={},_cx3[Avatar_default.a.offlineSince]=isDisplayOfflineSince,_cx3))},react_default.a.createElement("span",null,react_default.a.createElement(Chat_TimeStampAutoRefresh,{timestamp:props.conversation.timestamp,formatTimeFunction:function(){return Object(timeSince.c)(props.conversation.timestamp,!1,!0)}}))))};ChatListView_Avatar_Avatar.displayName="Avatar",ChatListView_Avatar_Avatar.defaultProps={isOnlyDisplayAvatar:!1,isOnWAP:!1,isOnline:!1,isAIConversation:!1,className:""};var ChatListView_Avatar=ChatListView_Avatar_Avatar,ChiDaiConversation_isOnWAP=!1;function ChiDaiConversation_getResponsiveStyles(className){return Object(helpers_styles.a)(ChiDaiConversation_default.a,className,ChiDaiConversation_isOnWAP)}var ChatListView_ChiDaiConversation_ChiDaiConversation=function(props){var _cx,_cx2;ChiDaiConversation_isOnWAP=props.isOnWAP;var conversation=props.chiDaiInfo;return react_default.a.createElement("div",{className:classnames_default()(ChiDaiConversation_getResponsiveStyles(ChiDaiConversation_default.a.chatChiDai),(_cx={},_cx[ChiDaiConversation_default.a.activeConversation]=conversation.chat_id===props.activeConversation.chat_id,_cx),(_cx2={},_cx2[ChiDaiConversation_default.a.isNotRead]=!Object(chatHelper.v)(conversation),_cx2)),onClick:function(event){return props.handleClickActiveConversation(event,conversation)}},react_default.a.createElement(ChatListView_Avatar,{className:classnames_default()(ChiDaiConversation_getResponsiveStyles(ChiDaiConversation_default.a.avatarContainer)),conversation:conversation,isOnWAP:props.isOnWAP,isOnline:!0,isAIConversation:!0}),react_default.a.createElement("div",{className:classnames_default()(ChiDaiConversation_getResponsiveStyles(ChiDaiConversation_default.a.content))},react_default.a.createElement("div",{className:classnames_default()(ChiDaiConversation_getResponsiveStyles(ChiDaiConversation_default.a.header))},react_default.a.createElement("span",{className:ChiDaiConversation_default.a.title},conversation.partner_fullname),!!conversation.timestamp&&react_default.a.createElement("span",{className:ChiDaiConversation_default.a.time},react_default.a.createElement(Chat_TimeStampAutoRefresh,{timestamp:conversation.timestamp,formatTimeFunction:timeSince.d}))),react_default.a.createElement("p",{className:classnames_default()(ChiDaiConversation_getResponsiveStyles(ChiDaiConversation_default.a.chatContent))},conversation.content)))};ChatListView_ChiDaiConversation_ChiDaiConversation.displayName="ChiDaiConversation";var ChatListView_ChiDaiConversation=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{isOnWAP:state.app.isOnWAP,activeConversation:state.chat.conversation}})))(ChatListView_ChiDaiConversation_ChiDaiConversation),LiveStreamConversation_LiveStreamConversation=function(props){var _cx,conversation=props.conversation;return react_default.a.createElement("div",{onClick:function(event){return props.handleClickActiveConversation(event,conversation)},className:classnames_default()(props.getResponsiveStyles(props.styles.chat),props.styles.livestream,(_cx={},_cx[props.styles.activeConversation]=props.isActiveConversation(conversation),_cx[props.styles.isNotRead]=!Object(chatHelper.v)(conversation),_cx))},react_default.a.createElement(ChatListView_Avatar,{className:props.getResponsiveStyles(props.styles.avatarContainer),conversation:conversation,isOnline:Boolean(conversation.streaming_status===res_const.C.LIVE),isOnlyDisplayAvatar:Boolean(conversation.streaming_status===res_const.C.VOD)}),react_default.a.createElement("div",{className:classnames_default()(props.getResponsiveStyles(props.styles.participant))},react_default.a.createElement("div",{className:classnames_default()(props.getResponsiveStyles(props.styles.fullname))},react_default.a.createElement("div",{className:classnames_default()(props.getResponsiveStyles(props.styles.nameLeft))},react_default.a.createElement("span",null,conversation.partner_fullname))),react_default.a.createElement("div",{className:classnames_default()(props.getResponsiveStyles(props.styles.content))},react_default.a.createElement("span",null,conversation.content))))};LiveStreamConversation_LiveStreamConversation.displayName="LiveStreamConversation";var ChatListView_LiveStreamConversation=LiveStreamConversation_LiveStreamConversation,shop_senmall=__webpack_require__("P8w3"),shop_senmall_default=__webpack_require__.n(shop_senmall),shop_reputation=__webpack_require__("D8yQ"),shop_reputation_default=__webpack_require__.n(shop_reputation),IconShop_IconShop=__webpack_require__("w87k"),IconShop_default=__webpack_require__.n(IconShop_IconShop),_ref2=react_default.a.createElement("span",null,"SenMall"),_ref4=react_default.a.createElement("span",null,"Uy t\xedn"),_ref5=react_default.a.createElement("div",null),Chat_IconShop=function(props){switch(props.type){case res_const.A.MALL_SHOP:return react_default.a.createElement("div",{className:classnames_default()(IconShop_default.a.shopIcon,IconShop_default.a.shopMallLabel)},IconShop_ref,_ref2);case res_const.A.TRUSTED_SHOP:return react_default.a.createElement("div",{className:classnames_default()(IconShop_default.a.shopIcon,IconShop_default.a.shopReputationBadge)},_ref3,_ref4);default:return _ref5}},IconShop_IconMallShop=function(props){return react_default.a.createElement("img",extends_default()({alt:"shop-mall-icon",src:shop_senmall_default.a},props))},IconShop_ref=react_default.a.createElement(IconShop_IconMallShop,null);IconShop_IconMallShop.displayName="IconMallShop";var IconShop_IconTrustedShop=function(props){return react_default.a.createElement("img",extends_default()({alt:"shop-trusted-icon",src:shop_reputation_default.a},props))},_ref3=react_default.a.createElement(IconShop_IconTrustedShop,null);IconShop_IconTrustedShop.displayName="IconTrustedShop";var ChatListView_ref=react_default.a.createElement("img",{alt:"seen-icon",src:Seen_default.a}),ChatListView_ref2=react_default.a.createElement("img",{alt:"sent-icon",src:Sent_default.a}),ChatListView_ref3=react_default.a.createElement(Loading.a,null),ChatListView_ref4=react_default.a.createElement(Loading.a,{isSmall:!0}),List_ChatListView_ChatListView=function(_Component){function ChatListView(props,context){var _this;return _this=_Component.call(this,props,context)||this,defineProperty_default()(assertThisInitialized_default()(_this),"countUnread",(function(){return _this.props.chatList&&_this.props.chatList.length?Object(chatHelper.r)(_this.props.chatList):0})),defineProperty_default()(assertThisInitialized_default()(_this),"updateTotalUnread",(function(){Object(notifyNewMessageToParent.a)("TOTAL_UNREAD",{unRead:_this.countUnread()})})),defineProperty_default()(assertThisInitialized_default()(_this),"isActiveConversation",(function(conversation){var currentId=Object(get.a)(_this.props,"conversation.chat_id");return conversation.chat_id===currentId})),defineProperty_default()(assertThisInitialized_default()(_this),"updateListChatHeight",(function(){if(_this.props.isOnWAP){_this.listChatRef.current.style.minHeight="auto",_this.listChatRef.current.style.height=window.innerHeight-93+"px"}})),defineProperty_default()(assertThisInitialized_default()(_this),"isDisplayMallShop",(function(conversation){var shop_type=Object(get.a)(_this.props.listStatus[conversation.partner_id],"shop_type",-1);return Boolean(shop_type===res_const.B.MALL&&_this.props.isOnWAP)})),defineProperty_default()(assertThisInitialized_default()(_this),"isDisplayTrustedShop",(function(conversation){var shop_type=Object(get.a)(_this.props.listStatus[conversation.partner_id],"shop_type",-1);return(shop_type===res_const.B.TRUSTED||shop_type===res_const.B.ACTIVE)&&_this.props.isOnWAP})),defineProperty_default()(assertThisInitialized_default()(_this),"isOnline",(function(conversation){return"available"===Object(get.a)(_this.props.listStatus[conversation.partner_id],"status","")})),defineProperty_default()(assertThisInitialized_default()(_this),"renderListChat",(function(){var isDisplayChiDai=Boolean(!_this.props.isDisplaySearchChatList&&!ChiDaiHelper.b.isDisabledChiDai),displayChatList=_this.props.chatList;return _this.props.isDisplaySearchChatList&&(displayChatList=_this.props.searchChatList.results),displayChatList.map((function(conversation,index){var _cx,_cx2,_cx3,keyChatItem=""+(conversation.chat_id+index),latestMessage=he_default.a.unescape(conversation.content||"");if(conversation.message_type===res_const.s.MESSAGE&&conversation.message_object&&conversation.message_object.type===res_const.q.IMAGE&&conversation.is_owner&&(latestMessage=res_text.b.CHAT_MSG.YOU_SENT_IMAGE_TO+conversation.partner_fullname),Boolean(conversation.chat_id===ChiDaiHelper.b.getDefaultChiDaiInfo().chat_id))return isDisplayChiDai?react_default.a.createElement(ChatListView_ChiDaiConversation,{key:keyChatItem,chiDaiInfo:conversation,handleClickActiveConversation:_this.props.handleClickActiveConversation}):null;if(Boolean(conversation.message_type===res_const.s.LIVESTREAM))return react_default.a.createElement(ChatListView_LiveStreamConversation,{key:keyChatItem,conversation:conversation,getResponsiveStyles:_this.props.getResponsiveStyles,styles:_this.props.styles,isActiveConversation:_this.isActiveConversation,handleClickActiveConversation:_this.props.handleClickActiveConversation});var conversationImageUrl=format_messageContent.d(Object(get.a)(conversation,"topic.items.0.image_url",""),"80x80")||"",isDisplayTopicImage=!1;conversation.topic&&conversation.topic.type!==res_const.E.SHOP&&_this.props.isOnWAP&&conversationImageUrl&&(isDisplayTopicImage=!0);var isDisplayOwnerMsgStatus=!1;return conversation.is_owner&&_this.props.isOnWAP&&(isDisplayOwnerMsgStatus=!0),react_default.a.createElement("div",{onClick:function(event){return _this.props.handleClickActiveConversation(event,conversation)},key:keyChatItem,className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.chat),(_cx={},_cx[_this.props.styles.activeConversation]=_this.isActiveConversation(conversation),_cx[_this.props.styles.isNotRead]=!Object(chatHelper.v)(conversation),_cx))},react_default.a.createElement(ChatListView_Avatar,{className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.avatarContainer)),conversation:conversation,isOnline:_this.isOnline(conversation),isOnWAP:_this.props.isOnWAP}),react_default.a.createElement("div",{className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.participant))},react_default.a.createElement("div",{className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.fullname))},react_default.a.createElement("div",{className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.nameLeft))},react_default.a.createElement("span",{className:classnames_default()((_cx2={},_cx2[_this.props.styles.isHaveMallIcon]=_this.isDisplayMallShop(conversation),_cx2[_this.props.styles.IsHaveTrustedIcon]=_this.isDisplayTrustedShop(conversation),_cx2))},conversation.partner_fullname),_this.isDisplayMallShop(conversation)&&react_default.a.createElement(Chat_IconShop,{type:res_const.A.MALL_SHOP}),_this.isDisplayTrustedShop(conversation)&&react_default.a.createElement(Chat_IconShop,{type:res_const.A.TRUSTED_SHOP})),react_default.a.createElement("div",{className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.nameRight))},react_default.a.createElement(Chat_TimeStampAutoRefresh,{timestamp:conversation.timestamp,formatTimeFunction:timeSince.d}))),react_default.a.createElement("div",{className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.content))},isDisplayTopicImage&&react_default.a.createElement("div",{className:_this.props.styles.topicImage,style:{backgroundImage:'url("'+conversationImageUrl+'")'},alt:"topic"}),react_default.a.createElement("span",{className:classnames_default()((_cx3={},_cx3[_this.props.styles.isHaveTopicImage]=isDisplayTopicImage,_cx3))},latestMessage),isDisplayOwnerMsgStatus&&react_default.a.createElement("div",{className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.ownerMsgStatus))},Object(chatHelper.w)(conversation)&&ChatListView_ref,!Object(chatHelper.w)(conversation)&&ChatListView_ref2),!_this.props.isOnWAP&&react_default.a.createElement(ChatDeleteIcon,{onClick:function(e){return _this.props.handleClickDeleteConversation(e,conversation)},className:classnames_default()(_this.props.getResponsiveStyles(_this.props.styles.settings))}))))}))})),_this.listChatRef=react_default.a.createRef(),_this}inheritsLoose_default()(ChatListView,_Component);var _proto=ChatListView.prototype;return _proto.componentDidMount=function(){this.updateListChatHeight();var _clientY=null,listChatRefElement=this.listChatRef.current;listChatRefElement.addEventListener("touchstart",(function(event){event.stopPropagation(),1===event.targetTouches.length&&(_clientY=event.targetTouches[0].clientY)}),!1),listChatRefElement.addEventListener("touchmove",(function(event){event.stopPropagation(),1===event.targetTouches.length&&disableRubberBand(listChatRefElement,event,_clientY)}),!1);var stoppedScrollCheckTimer=null,context=this;listChatRefElement.addEventListener("scroll",Object(debounce.a)((function(){null!==stoppedScrollCheckTimer&&(clearTimeout(stoppedScrollCheckTimer),context.isScrolling||(context.isScrolling=!0)),stoppedScrollCheckTimer=setTimeout((function(){return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(context.isScrolling=!1,!Boolean(listChatRefElement.scrollTop+listChatRefElement.clientHeight>=listChatRefElement.scrollHeight)){_context.next=5;break}return _context.next=5,regenerator_default.a.awrap(context.props.loadMoreHistory());case 5:case"end":return _context.stop()}}))}),150)}),80))},_proto.componentDidUpdate=function(prevProps){Boolean(prevProps.appChatWindowStatus===res_const.k.APP.CHAT_WINDOW_STATUS.CLOSED&&this.props.appChatWindowStatus===res_const.k.APP.CHAT_WINDOW_STATUS.OPENED||prevProps.isOnWAP!==this.props.isOnWAP)&&this.updateListChatHeight(),Boolean(!this.props.isDisplaySearchLoading&&!this.props.isDisplayLoadingHistory)&&this.updateTotalUnread()},_proto.componentWillUnmount=function(){this.listChatRef.current.removeEventListener("touchstart",(function(){}),!1),this.listChatRef.current.removeEventListener("touchmove",(function(){}),!1),this.listChatRef.current.removeEventListener("scroll",null)},_proto.render=function(){var _cx4,isDisplayListChat=Boolean(!this.props.isDisplaySearchLoading&&!this.props.isDisplayLoadingHistory),isDisplayLoading=Boolean(this.props.isDisplaySearchLoading||this.props.isDisplayLoadingHistory);return react_default.a.createElement("div",{className:classnames_default()(this.props.getResponsiveStyles(this.props.styles.list),(_cx4={},_cx4[this.props.styles.loadingMoreList]=this.props.shouldDisplayLoadingMoreList,_cx4[this.props.styles.filterChatSystemType]=userHelper.a.isSeller(),_cx4)),ref:this.listChatRef,onClick:this.props.onClickChatList},isDisplayLoading&&react_default.a.createElement("div",{className:ChatListView_default.a.loading},ChatListView_ref3),isDisplayListChat&&this.renderListChat(),react_default.a.createElement("div",{className:classnames_default()(this.props.styles.loadMore)},this.props.shouldDisplayLoadingMoreList&&ChatListView_ref4))},ChatListView}(react.Component);List_ChatListView_ChatListView.displayName="ChatListView";var List_ChatListView=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{listStatus:state.chat.listStatus,conversation:state.chat.conversation}}),null))(List_ChatListView_ChatListView),HeaderActions_ChatListHeaderActions=__webpack_require__("u97S"),ChatListHeaderActions_default=__webpack_require__.n(HeaderActions_ChatListHeaderActions),BlueCheckBox=__webpack_require__("rXyk"),TooltipWrapper_TooltipWrapper=__webpack_require__("36Gs"),TooltipWrapper_default=__webpack_require__.n(TooltipWrapper_TooltipWrapper),Chat_TooltipWrapper_TooltipWrapper=function(_Component){function TooltipWrapper(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_Component.call.apply(_Component,[this].concat(args))||this,defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(className){return Object(helpers_styles.a)(TooltipWrapper_default.a,className,_this.props.isOnWAP)})),_this}return inheritsLoose_default()(TooltipWrapper,_Component),TooltipWrapper.prototype.render=function(){return react_default.a.createElement("div",{className:classnames_default()(TooltipWrapper_default.a.container,this.props.className)},this.props.children,react_default.a.createElement("span",{className:classnames_default()(this.getResponsiveStyles(TooltipWrapper_default.a.tooltip))},this.props.tooltipText))},TooltipWrapper}(react.Component);Chat_TooltipWrapper_TooltipWrapper.displayName="TooltipWrapper";var CloseCircleIcon_ref=react_default.a.createElement("path",{fillOpacity:"0.4",d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"});function CloseCircleIcon(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},props),CloseCircleIcon_ref)}CloseCircleIcon.displayName="CloseCircleIcon";var SearchIcon_ref=react_default.a.createElement("path",{fillOpacity:"0.4",fillRule:"evenodd",d:"M15.502 14h-.794l-.276-.274A6.47 6.47 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.47 6.47 0 0 0 4.225-1.566l.276.274v.792l4.998 4.991L20.49 19l-4.988-5zM9.5 14a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9z"});function SearchIcon(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},props),SearchIcon_ref)}SearchIcon.displayName="SearchIcon";var DropdownFilter_setting=__webpack_require__("k6RH"),DropdownFilter_DropdownFilter=__webpack_require__("akrE"),DropdownFilter_default=__webpack_require__.n(DropdownFilter_DropdownFilter),HeaderActions_DropdownFilter_DropdownFilter=function(props){var displayOptionName=props.reduxState.selectedChatFilterOption.name,selectedFilterOption=props.reduxState.selectedChatFilterOption.type,filterOptions=DropdownFilter_setting.a;return props.reduxState.chatSystemType===res_const.f.SENLIVE&&(displayOptionName=props.reduxState.selectedSenLiveFilterOption.name,selectedFilterOption=props.reduxState.selectedSenLiveFilterOption.type,filterOptions=DropdownFilter_setting.b),react_default.a.createElement("div",{className:DropdownFilter_default.a.dropdown},react_default.a.createElement("button",{className:DropdownFilter_default.a.dropbtn},react_default.a.createElement("span",{className:DropdownFilter_default.a.name},displayOptionName)),react_default.a.createElement("div",{className:DropdownFilter_default.a.dropdownContent,style:{zIndex:2}},filterOptions.map((function(filterOption){var _cx;return react_default.a.createElement("li",{key:"filter-options-"+filterOption.type,className:classnames_default()((_cx={},_cx[DropdownFilter_default.a.active]=Boolean(selectedFilterOption===filterOption.type),_cx)),onClick:function(){return function(filterOption){return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return props.reduxAction.setFilterType(filterOption.type),props.reduxAction.clearConversation(),_context.next=4,regenerator_default.a.awrap(props.reduxAction.fetchHistoryListAsync({type:filterOption.type}));case 4:case"end":return _context.stop()}}))}(filterOption)}},filterOption.name)}))))};HeaderActions_DropdownFilter_DropdownFilter.displayName="DropdownFilter";var HeaderActions_DropdownFilter=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{selectedChatFilterOption:state.chat.selectedChatFilterOption,selectedSenLiveFilterOption:state.chat.selectedSenLiveFilterOption,chatSystemType:state.chat.chatSystemType}}}),(function(dispatch){return{reduxAction:{fetchHistoryListAsync:Object(bindActionCreators.a)(actions_xmpp.fetchHistoryListAsync,dispatch),setFilterType:Object(bindActionCreators.a)(setFilterType,dispatch),clearConversation:Object(bindActionCreators.a)(clearConversation,dispatch)}}})))(HeaderActions_DropdownFilter_DropdownFilter),stopTypingChecker=null,HeaderActions_ref=react_default.a.createElement(HeaderActions_DropdownFilter,null),HeaderActions_ref2=react_default.a.createElement(SearchIcon,null),HeaderActions_ref3=react_default.a.createElement(SearchIcon,null),HeaderActions_ref4=react_default.a.createElement(CloseCircleIcon,null),List_HeaderActions_ChatListHeaderActions=function(props){var _cx,_cx2,_useState=Object(react.useState)(!1),isDisplaySearchBox=_useState[0],setIsDisplaySearchBox=_useState[1],_useState2=Object(react.useState)(!1),isFilterUnread=_useState2[0],setIsFilterUnread=_useState2[1],_useState3=Object(react.useState)(!1),isFocusedSearchInput=_useState3[0],setIsFocusedSearchInput=_useState3[1],_useState4=Object(react.useState)(""),searchValue=_useState4[0],setSearchValue=_useState4[1];return Object(react.useEffect)((function(){props.setIsDisplaySearchChatList(Boolean(searchValue&&isDisplaySearchBox))}),[searchValue,isDisplaySearchBox]),react_default.a.createElement(react.Fragment,null,react_default.a.createElement("div",{className:classnames_default()(ChatListHeaderActions_default.a.groupBtn,(_cx={},_cx[ChatListHeaderActions_default.a.hide]=isDisplaySearchBox,_cx))},!userHelper.a.isSeller()&&react_default.a.createElement(BlueCheckBox.a,{className:ChatListHeaderActions_default.a.unreadCheckBox,name:"is-filter-unread",stateName:"isFilterUnread",id:"frmIsFilterUnread",autoComplete:"is-filter-unread",handleInputChange:function(event){var filterType=res_const.l.UNREAD;event.target.checked||(filterType=res_const.l.ALL),setIsFilterUnread(event.target.checked),props.reduxAction.setFilterType(filterType),props.reduxAction.clearConversation(),props.reduxAction.fetchHistoryListAsync({type:filterType})},isChecked:isFilterUnread},react_default.a.createElement("span",null,res_text.b.FILTER.UNREAD," ","("+props.countUnread+")")),userHelper.a.isSeller()&&HeaderActions_ref,props.reduxState.chatSystemType===res_const.f.CHAT&&react_default.a.createElement(Chat_TooltipWrapper_TooltipWrapper,{className:ChatListHeaderActions_default.a.openSearchBoxBtn,tooltipText:res_text.b.TOOLTIP.SEARCH_BTN,isOnWAP:props.reduxState.isOnWAP},react_default.a.createElement("button",{onClick:function(){setIsDisplaySearchBox(!0)}},HeaderActions_ref2))),react_default.a.createElement("div",{className:classnames_default()(ChatListHeaderActions_default.a.groupBtn,(_cx2={},_cx2[ChatListHeaderActions_default.a.hide]=!isDisplaySearchBox,_cx2),ChatListHeaderActions_default.a.searchBoxContainer)},react_default.a.createElement("div",{className:ChatListHeaderActions_default.a.searchBox},!isFocusedSearchInput&&HeaderActions_ref3,isDisplaySearchBox&&react_default.a.createElement("input",{autoFocus:!0,className:ChatListHeaderActions_default.a.searchBoxInput,type:"text",onFocus:function(){setIsFocusedSearchInput(!0)},onBlur:function(){searchValue||setIsFocusedSearchInput(!1)},onChange:function(e){var searchValue=e.target.value;setSearchValue(searchValue),searchValue?(props.reduxAction.displaySearchLoading(searchValue),stopTypingChecker&&clearTimeout(stopTypingChecker),stopTypingChecker=setTimeout((function(){return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!props.reduxState.isSearching){_context.next=2;break}return _context.abrupt("return");case 2:if(searchValue){_context.next=4;break}return _context.abrupt("return");case 4:return _context.next=6,regenerator_default.a.awrap(props.reduxAction.searchHistoryListAsync(searchValue));case 6:case"end":return _context.stop()}}))}),1e3*res_const.D.CHECK_USER_STOP_TYPING_TIME_SECOND)):props.reduxAction.hideSearchLoadingWithoutCallApi()},value:searchValue})),react_default.a.createElement("button",{className:ChatListHeaderActions_default.a.closeSearchBoxBtn,onClick:function(){setIsDisplaySearchBox(!1)}},HeaderActions_ref4)))};List_HeaderActions_ChatListHeaderActions.displayName="ChatListHeaderActions";var HeaderActions=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{searchChatList:state.chat.searchChatList,isOnWAP:state.app.isOnWAP,isSearching:state.chat.searchChatList.isSearching,chatSystemType:state.chat.chatSystemType}}}),(function(dispatch){return{reduxAction:{hideSearchLoadingWithoutCallApi:Object(bindActionCreators.a)(hideSearchLoadingWithoutCallApi,dispatch),displaySearchLoading:Object(bindActionCreators.a)(displaySearchLoading,dispatch),searchHistoryListAsync:Object(bindActionCreators.a)(actions_xmpp.searchHistoryListAsync,dispatch),setFilterType:Object(bindActionCreators.a)(setFilterType,dispatch),fetchHistoryListAsync:Object(bindActionCreators.a)(actions_xmpp.fetchHistoryListAsync,dispatch),clearConversation:Object(bindActionCreators.a)(clearConversation,dispatch)}}})))(List_HeaderActions_ChatListHeaderActions),FilterChatSystemType_FilterChatSystemType=__webpack_require__("ZNhd"),FilterChatSystemType_default=__webpack_require__.n(FilterChatSystemType_FilterChatSystemType),config=__webpack_require__("rEru"),List_FilterChatSystemType_FilterChatSystemType=function(props){var _cx,_cx2,setConfigSystemTypeFromChatSystemType=function(chatSystemType){chatSystemType===res_const.f.SENLIVE?(props.setConfigChatSystemType(res_const.h.SENLIVE),props.setSelectedConfigMenuOption(res_const.i.BLOCK_CHAT_SENLIVE_ACCOUNT)):(props.setConfigChatSystemType(res_const.h.SENDO),props.setSelectedConfigMenuOption(res_const.i.AUTO_REPLY))},onClickButton=function(chatSystemType){return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(props.setChatSystemType(chatSystemType),setConfigSystemTypeFromChatSystemType(chatSystemType),chatSystemType===res_const.f.SENLIVE?props.saveChattingChatState():props.saveChattingSenLiveState(),props.clearConversation(),chatSystemType!==res_const.f.CHAT){_context.next=9;break}return _context.next=7,regenerator_default.a.awrap(props.fetchHistoryListAsync({type:props.reduxState.selectedChatFilterOption.type}));case 7:_context.next=11;break;case 9:return _context.next=11,regenerator_default.a.awrap(props.fetchHistoryListAsync({type:props.reduxState.selectedSenLiveFilterOption.type}));case 11:props.disableAutoScroll(),chatSystemType===res_const.f.SENLIVE?(props.restoreChattingSenLiveState(),props.clearChattingSenLiveState()):(props.restoreChattingChatState(),props.clearChattingChatState());case 13:case"end":return _context.stop()}}))};return react_default.a.createElement("div",{className:FilterChatSystemType_default.a.filterChatSystemType},react_default.a.createElement("div",{className:FilterChatSystemType_default.a.groupBtn},react_default.a.createElement("button",{className:classnames_default()(FilterChatSystemType_default.a.btn,(_cx={},_cx[FilterChatSystemType_default.a.active]=props.reduxState.chatSystemType===res_const.f.CHAT,_cx)),onClick:function(){return onClickButton(res_const.f.CHAT)}},"Chat"),react_default.a.createElement("button",{className:classnames_default()(FilterChatSystemType_default.a.btn,(_cx2={},_cx2[FilterChatSystemType_default.a.active]=props.reduxState.chatSystemType===res_const.f.SENLIVE,_cx2)),onClick:function(){return onClickButton(res_const.f.SENLIVE)}},"SenLive")))};List_FilterChatSystemType_FilterChatSystemType.displayName="FilterChatSystemType";var List_FilterChatSystemType=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{chatSystemType:state.chat.chatSystemType,selectedChatFilterOption:state.chat.selectedChatFilterOption,selectedSenLiveFilterOption:state.chat.selectedSenLiveFilterOption}}}),(function(dispatch){return{setChatSystemType:Object(bindActionCreators.a)(setChatSystemType,dispatch),clearConversation:Object(bindActionCreators.a)(clearConversation,dispatch),fetchHistoryListAsync:Object(bindActionCreators.a)(actions_xmpp.fetchHistoryListAsync,dispatch),restoreChattingSenLiveState:Object(bindActionCreators.a)(restoreChattingSenLiveState,dispatch),restoreChattingChatState:Object(bindActionCreators.a)(restoreChattingChatState,dispatch),clearChattingSenLiveState:Object(bindActionCreators.a)(clearChattingSenLiveState,dispatch),clearChattingChatState:Object(bindActionCreators.a)(clearChattingChatState,dispatch),saveChattingSenLiveState:Object(bindActionCreators.a)(saveChattingSenLiveState,dispatch),saveChattingChatState:Object(bindActionCreators.a)(saveChattingChatState,dispatch),disableAutoScroll:Object(bindActionCreators.a)(disableAutoScroll,dispatch),setConfigChatSystemType:Object(bindActionCreators.a)(config.a,dispatch),setSelectedConfigMenuOption:Object(bindActionCreators.a)(config.b,dispatch)}})))(List_FilterChatSystemType_FilterChatSystemType),strophe=__webpack_require__("vi4O"),SenLiveContext=(__webpack_require__("D65A"),__webpack_require__("CJoK")),liveStream=__webpack_require__("T19g");function senLiveXmpp_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function connectSenLiveXMPPAsync(){return function(dispatch,getState){return new Promise((function(resolvePromise){SenLiveContext.a.saveResolveConnectXmppPromise(resolvePromise);var reduxState=getState(),userId=reduxState.auth.userInfo.fpt_id,access_token=reduxState.auth.access_token,userFullName=reduxState.auth.userInfo.full_name;if(userId&&access_token&&userFullName){var fullJID=Object(xmpp.c)(userId);SenLiveContext.a.setFullJID(fullJID);var password=access_token,shop_id=reduxState.auth.userInfo.shop_id;shop_id&&userHelper.a.isShopPartner&&(password+="||"+shop_id);var xmppConnection=SenLiveContext.a.getXmppConnectionSenLive();if(!xmppConnection){var senLiveWSDomain=setting.r;senLiveWSDomain="chatltws.sendo.vn/ws",xmppConnection=new strophe.Strophe.Connection(setting.N+"://"+senLiveWSDomain,{protocol:""+setting.N}),SenLiveContext.a.setXmppConnectionSenLive(xmppConnection)}xmppConnection.connect(fullJID,password,(function(xmppStatus){xmppStatus===strophe.Strophe.Status.CONNECTED&&(SenLiveContext.a.connectedXmpp(),SenLiveContext.a.resolveConnectXmppPromise(SenLiveContext.a.isConnected))})),setTimeout((function(){SenLiveContext.a.isConnected||SenLiveContext.a.resolveConnectXmppPromise(SenLiveContext.a.isConnected)}),1e3*setting.I)}else SenLiveContext.a.resolveConnectXmppPromise(SenLiveContext.a.isConnected)}))}}function fetchGetShardingRoomSuffix(){var IQData,result;return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,IQData={id:res_const.o.GET_SHARDING_ROOM_INFO_ID,type:"get",tagName:res_const.o.MUC_ROOM_SPECIFIC_TAG,tagAttr:{action:res_const.o.GET_ROOM_SUFFIX_ACTION,xmlns:res_const.o.MUC_ROOM_SPECIFIC_XMLNS,version:"1"},defaultResolveData:""},_context.next=4,regenerator_default.a.awrap(startFetchIQ(IQData));case 4:return result=_context.sent,_context.abrupt("return",result);case 8:return _context.prev=8,_context.t0=_context.catch(0),console.error(_context.t0),_context.abrupt("return","");case 12:case"end":return _context.stop()}}),null,null,[[0,8]])}function startFetchIQ(IQData){return new Promise((function(resolvePromise,rejectPromise){var xmppConnection=SenLiveContext.a.getXmppConnectionSenLive();if(xmppConnection){var textData="";IQData.tagData&&(textData=JSON.stringify(IQData.tagData));var fetchAuthzIQ=$iq({id:IQData.id,type:IQData.type||"set"}).c(IQData.tagName,function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?senLiveXmpp_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):senLiveXmpp_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},IQData.tagAttr),textData);xmppConnection.addHandler((function(xmppData){return function(xmlIQData,resolvePromise){try{var parsedData=Object(xmpp.t)(xmlIQData);resolvePromise(parsedData)}catch(error){resolvePromise("")}}(xmppData,resolvePromise),!1}),null,"iq",null,IQData.id,null),xmppConnection.send(fetchAuthzIQ)}else resolvePromise(IQData.defaultResolveData)}))}function joinRoomSenLiveAsync(roomName){return function(dispatch,getState){return new Promise((function(resolvePromise){SenLiveContext.a.saveResolveJoinRoomPromise(resolvePromise);var xmppConnection=SenLiveContext.a.getXmppConnectionSenLive();if(xmppConnection){var reduxState=getState(),nickName=Object(xmpp.f)(reduxState.auth.userInfo.fpt_id,reduxState.auth.userInfo.full_name);SenLiveContext.a.setNickName(nickName),xmppConnection.muc.init(xmppConnection);var roomJID=""+roomName+SenLiveContext.a.shardingRoomSuffix+"@"+setting.t;xmppConnection.muc.join(roomJID,nickName,(function(messageXml){return SenLiveContext.a.isJoinedRoom||(SenLiveContext.a.joinedRoom(),SenLiveContext.a.resolveJoinRoomPromise(SenLiveContext.a.isJoinedRoom)),dispatch(function(messageXml){return function(dispatch){var parsedMessage=Object(liveStream.g)(messageXml);Object(liveStream.e)(parsedMessage)||dispatch({type:"chat/ADD_SENLIVE_MSG_TO_HISOTRY",payload:{historyDetailMsg:Object(liveStream.c)(parsedMessage)}})}}(messageXml)),!0}),null,null,null,null),setTimeout((function(){SenLiveContext.a.isJoinedRoom||SenLiveContext.a.resolveJoinRoomPromise(SenLiveContext.a.isJoinedRoom)}),1e3*setting.J)}else SenLiveContext.a.resolveJoinRoomPromise(SenLiveContext.a.isJoinedRoom)}))}}function disconnectSenLiveXMPP(){var xmppConnection=SenLiveContext.a.getXmppConnectionSenLive();xmppConnection&&(SenLiveContext.a.disconnectedXmpp(),SenLiveContext.a.leftRoom(),xmppConnection.disconnect(),SenLiveContext.a.setXmppConnectionSenLive(null))}function sendGroupText(text){return function(dispatch,getState){Object(googleAnalytics.g)();var conversation=getState().chat.conversation,xmppConnection=SenLiveContext.a.getXmppConnectionSenLive(),fromAttrData=""+SenLiveContext.a.fullJID,toRoomJID=""+conversation.chat_id+SenLiveContext.a.shardingRoomSuffix+"@"+setting.t,msgXml=Object(strophe.$msg)({to:toRoomJID,from:fromAttrData,type:"groupchat",id:Object(xmpp.n)()}).c("body",{xmlns:strophe.Strophe.NS.CLIENT}).t(text);xmppConnection.send(msgXml)}}var List_ref=react_default.a.createElement(List_FilterChatSystemType,null),Chat_List_ChatList=function(_Component){function ChatList(props,context){var _this;return _this=_Component.call(this,props,context)||this,defineProperty_default()(assertThisInitialized_default()(_this),"setIsDisplaySearchChatList",(function(isDisplaySearchChatList){_this.setState({isDisplaySearchChatList:isDisplaySearchChatList})})),defineProperty_default()(assertThisInitialized_default()(_this),"loadMoreHistory",(function(isForceLoadMore){var paging,newChatList,newUserIds,shopIds;return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(void 0===isForceLoadMore&&(isForceLoadMore=!1),!(Object(get.a)(_this.props,"chatList.length",0)<setting.v||_this.state.shouldDisplayLoadingMoreList||_this.props.isLoadedLastHistory)||isForceLoadMore){_context.next=4;break}return _context.abrupt("return");case 4:return paging=Object(get.a)(_this.props.listPaging,"after","0"),_this.props.chatSystemType===res_const.f.SENLIVE&&(paging=_this.props.listPaging),_this.setState({shouldDisplayLoadingMoreList:!0}),_context.next=9,regenerator_default.a.awrap(_this.props.xmppActions.fetchHistoryListAsync({paging:paging,type:_this.props.filterType},!1,!0));case 9:newChatList=_context.sent,_this.setState({shouldDisplayLoadingMoreList:!1}),newChatList.length&&(newUserIds=Object(xmpp.k)(newChatList),shopIds=[],userHelper.a.getRole()===res_const.F.BUYER&&(shopIds=Object(xmpp.m)(newChatList)),_this.props.chatActions.getUserStatus(newUserIds,shopIds));case 12:case"end":return _context.stop()}}))})),defineProperty_default()(assertThisInitialized_default()(_this),"handleClickDeleteConversation",(function(event,conversation){return event.preventDefault(),event.stopPropagation(),_this.props.chatSystemType===res_const.f.SENLIVE?_this.props.chatActions.deleteConversationLiveStream(conversation):_this.props.xmppActions.deleteConversationAsync(conversation),!1})),defineProperty_default()(assertThisInitialized_default()(_this),"onClickChatList",(function(){_this.props.chatActions.clearConversation(),_this.props.chatActions.updateChatListByFilterType()})),defineProperty_default()(assertThisInitialized_default()(_this),"handleClickActiveConversation",(function(event,conversation){event.stopPropagation(),event.preventDefault(),conversation.chat_id!==_this.props.conversation.chat_id&&_this.props.chatActions.updateChatListByFilterType(),_this.props.isLoadingDetail||_this.props.isCreatingAsyncMessage||(googleAnalytics.c(conversation),_this.activeConversation(conversation))})),defineProperty_default()(assertThisInitialized_default()(_this),"activeConversation",(function(conversation){conversation&&conversation.chat_id&&(conversation.chat_id!==_this.props.conversation.chat_id?(_this.props.chatActions.clearConversation(),_this.loadChatDetails(conversation)):_this.props.chatDetails&&_this.props.chatDetails.length||_this.loadChatDetails(conversation),_this.props.messageDisplayBoxActions.updateLogicAutoScroll(conversation),_this.props.chatActions.activeConversation(conversation),_this.props.isOnWAP&&(_this.props.appActions.changeMobileStep(res_const.k.APP.MOBILE.STEP.CHAT_DETAIL),_this.props.appActions.hideChatList(),_this.props.appActions.displayChatDetail()))})),defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(className){return Object(helpers_styles.a)(ChatList_default.a,className,_this.props.isOnWAP)})),_this.state={userIds:[],shouldDisplayLoadingMoreList:!1,isDisplaySearchChatList:!1},_this.listChatRef=react_default.a.createRef(),_this}inheritsLoose_default()(ChatList,_Component);var _proto=ChatList.prototype;return _proto.componentDidMount=function(){var _this2=this,ROLE_SETTING=this.props.ROLE_SETTING;setInterval((function(){_this2.state&&_this2.state.userIds&&_this2.state.userIds.length>0&&_this2.props.chatActions.getUserStatus(_this2.state.userIds)}),1e3*ROLE_SETTING.CHECK_USER_STATUS_TIME_SECOND)},_proto.componentDidUpdate=function(prevProps){var userIds;return regenerator_default.a.async((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevProps.chatList.length!==this.props.chatList.length&&(userIds=Object(xmpp.k)(this.props.chatList),this.setState({userIds:userIds})),!(prevProps.chatList.length>=setting.v&&this.props.chatList.length<setting.v&&this.props.filterType===res_const.l.UNREPLIED)){_context2.next=4;break}return _context2.next=4,regenerator_default.a.awrap(this.loadMoreHistory(!0));case 4:case"end":return _context2.stop()}}),null,this)},_proto.loadChatDetails=function(conversation){var shardingRoomSuffix,partnerUserId,shopId;return regenerator_default.a.async((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!conversation){_context3.next=21;break}if(!conversation.chat_id){_context3.next=19;break}if(conversation.message_type!==res_const.s.LIVESTREAM){_context3.next=17;break}return disconnectSenLiveXMPP(),_context3.next=6,regenerator_default.a.awrap(this.props.xmppActions.fetchHistoryDetailAsync(conversation.chat_id,{type:res_const.d.LIVESTREAM}));case 6:if(conversation.streaming_status!==res_const.C.LIVE){_context3.next=15;break}return _context3.next=9,regenerator_default.a.awrap(this.props.connectSenLiveXMPPAsync());case 9:return _context3.next=11,regenerator_default.a.awrap(fetchGetShardingRoomSuffix());case 11:return shardingRoomSuffix=_context3.sent,SenLiveContext.a.setShardingRoomSuffix(shardingRoomSuffix),_context3.next=15,regenerator_default.a.awrap(this.props.joinRoomSenLiveAsync(conversation.chat_id));case 15:_context3.next=18;break;case 17:this.props.xmppActions.fetchHistoryDetailAsync(conversation.chat_id);case 18:this.props.chatActions.setCurrentTopic(Object(get.a)(conversation,"topic",null));case 19:conversation.partner_id&&(partnerUserId=Object(xmpp.j)(conversation.partner_id),this.props.chatActions.getUserStatus([partnerUserId])),conversation.shop_id&&userHelper.a.getRole()===res_const.F.BUYER&&(shopId=parseInt(conversation.shop_id,10))&&this.props.chatActions.fetchAndSetShopInfo(shopId);case 21:case"end":return _context3.stop()}}),null,this)},_proto.countUnread=function(){return this.props.chatList&&this.props.chatList.length?Object(chatHelper.r)(this.props.chatList):0},_proto.render=function(){var countUnread=this.countUnread(),isDisplayFilter=Boolean(!this.props.isOnWAP);return react_default.a.createElement("div",{className:classnames_default()(ChatList_default.a.container)},isDisplayFilter&&react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(ChatList_default.a.filter))},react_default.a.createElement(HeaderActions,{countUnread:countUnread,setIsDisplaySearchChatList:this.setIsDisplaySearchChatList})),react_default.a.createElement(List_ChatListView,{styles:ChatList_default.a,chatList:this.props.chatList,isOnWAP:this.props.isOnWAP,appChatWindowStatus:this.props.appChatWindowStatus,handleClickActiveConversation:this.handleClickActiveConversation,handleClickDeleteConversation:this.handleClickDeleteConversation,getResponsiveStyles:this.getResponsiveStyles,shouldDisplayLoadingMoreList:this.state.shouldDisplayLoadingMoreList,loadMoreHistory:this.loadMoreHistory,isDisplaySearchLoading:this.props.isDisplaySearchLoading,isDisplaySearchChatList:this.state.isDisplaySearchChatList,searchChatList:this.props.searchChatList,onClickChatList:this.onClickChatList,isDisplayLoadingHistory:this.props.isDisplayLoadingHistory}),userHelper.a.isSeller()&&List_ref)},ChatList}(react.Component);Chat_List_ChatList.displayName="ChatList";var List=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{conversation:state.chat.conversation,chatDetails:state.chat.chatDetails,chatList:state.chat.chatList,isOnWAP:Object(get.a)(state,"app.isOnWAP",!1),appChatWindowStatus:Object(get.a)(state,"app.chatWindowStatus",res_const.k.APP.CHAT_WINDOW_STATUS.CLOSED),listPaging:state.chat.listPaging,isLoadingDetail:Object(get.a)(state,"chat.isLoadingDetail",!1),isLoadedLastHistory:Object(get.a)(state,"chat.isLoadedLastHistory",!1),isCreatingAsyncMessage:Object(get.a)(state,"chat.isCreatingAsyncMessage",!1),searchChatList:Object(get.a)(state,"chat.searchChatList",null),isDisplaySearchLoading:Object(get.a)(state,"chat.isDisplaySearchLoading",!1),filterType:state.chat.filterType,chatSystemType:state.chat.chatSystemType,ROLE_SETTING:state.app.ROLE_SETTING,isDisplayLoadingHistory:state.chat.isDisplayLoadingHistory}}),(function(dispatch){return{chatActions:Object(bindActionCreators.a)(chat_namespaceObject,dispatch),appActions:Object(bindActionCreators.a)(app_namespaceObject,dispatch),xmppActions:Object(bindActionCreators.a)(actions_xmpp,dispatch),messageDisplayBoxActions:Object(bindActionCreators.a)(messageDisplayBox_namespaceObject,dispatch),connectSenLiveXMPPAsync:Object(bindActionCreators.a)(connectSenLiveXMPPAsync,dispatch),joinRoomSenLiveAsync:Object(bindActionCreators.a)(joinRoomSenLiveAsync,dispatch)}})))(Chat_List_ChatList),dist=__webpack_require__("zWfy"),dist_default=__webpack_require__.n(dist),last=__webpack_require__("qAkX"),reduce=__webpack_require__("owWc"),onlineTimeSince=__webpack_require__("Agl7"),Upload_ref=react_default.a.createElement("g",null,react_default.a.createElement("g",null,react_default.a.createElement("g",null,react_default.a.createElement("path",{d:"M149.995,0.001C67.156,0.001,0,67.16,0,149.999s67.156,149.997,149.995,149.997s150.003-67.161,150.003-149.997    C299.997,67.157,232.834,0.001,149.995,0.001z M70.75,226.844c-3.981,0-7.205-3.221-7.205-7.202V80.353    c0-3.979,3.224-7.202,7.205-7.202h158.497c3.981,0,7.205,3.224,7.205,7.202v77.081h-10.795h-6.147V89.834H80.323v93.027h7.949    l32.119-50.087l21.465,33.468l10.66,16.62h9.241l-15.281-23.827l9.959-15.53l25.241,39.355h10.177v8.375v16.412v10.374h10.374    h13.053v8.824H70.75z M207.264,121.042c0,8.232-6.676,14.908-14.908,14.908s-14.908-6.676-14.908-14.908    s6.676-14.908,14.908-14.908S207.264,112.813,207.264,121.042z M242.067,207.646v23.423H225.66v-4.225v-19.198h-23.428v-16.412    h23.428v-23.423h10.795h5.613v23.423h23.425v16.412H242.067z","data-original":"#000000",className:"active-path","data-old_color":"#F44501",fill:"#F64500"}))));function Upload(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 299.998 299.998",style:{enableBackground:"new 0 0 299.998 299.998"},xmlSpace:"preserve",width:"512px",height:"512px",className:!0},props),Upload_ref)}Upload.displayName="Upload";var BackToList_ref=react_default.a.createElement("defs",null,react_default.a.createElement("path",{id:"back-to-list-a",d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),BackToList_ref2=react_default.a.createElement("use",{fill:"#FFF",xlinkHref:"#back-to-list-a"});function BackToList(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},props),BackToList_ref,BackToList_ref2)}BackToList.displayName="BackToList";var objectWithoutPropertiesLoose=__webpack_require__("8OQS"),objectWithoutPropertiesLoose_default=__webpack_require__.n(objectWithoutPropertiesLoose),UploadImage_ref=react_default.a.createElement("path",{fill:"#000",fillOpacity:".4",fillRule:"nonzero",transform:"translate(3 2)",d:"M16 5v2.99s-1.99.01-2 0V5h-3s.01-1.99 0-2h3V0h2v3h3v2h-3zm-3 4V6h-3V3H2C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V9h-3zM2 17l3-4 2 3 3-4 4 5H2z"}),UploadImage_ref2=react_default.a.createElement("g",{fill:"none",fillRule:"evenodd",opacity:"0.4"},react_default.a.createElement("circle",{cx:"12",cy:"12",r:"3.2",fill:"#000",fillRule:"nonzero"}),react_default.a.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}),react_default.a.createElement("path",{d:"M0 0h24v24H0z"}));function UploadImage(props){var isOnWAP=props.isOnWAP,rest=objectWithoutPropertiesLoose_default()(props,["isOnWAP"]);return isOnWAP?react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},rest),UploadImage_ref2):react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:24,height:24,viewBox:"0 0 24 24"},rest),UploadImage_ref)}UploadImage.displayName="UploadImage";var CreateVoucher_ref=react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},react_default.a.createElement("g",{fill:"none",fillRule:"evenodd"},react_default.a.createElement("path",{fill:"#000",fillOpacity:"0.4",fillRule:"nonzero",d:"M20,12 C20,13.1 20.9,14 22,14 L22,18 C22,19.1 21.1,20 20,20 L4,20 C2.9,20 2,19.1 2,18 L2,14 C3.11,14 4,13.1 4,12 C4,10.9 3.11,10 2.01,10 L2.01,6 C2.01,4.9 2.9,4 4,4 L20,4 C21.1,4 22,4.9 22,6 L22,10 C20.9,10 20,10.9 20,12 Z M11,17 L13,17 L13,16 L14,16 C14.55,16 15,15.55 15,15 L15,12 C15,11.45 14.55,11 14,11 L11,11 L11,10 L15,10 L15,8 L13,8 L13,7 L11,7 L11,8 L10,8 C9.45,8 9,8.45 9,9 L9,12 C9,12.55 9.45,13 10,13 L13,13 L13,14 L9,14 L9,16 L11,16 L11,17 Z"}),react_default.a.createElement("rect",{width:"24",height:"24"})));function CreateVoucherIcon(){return CreateVoucher_ref}CreateVoucherIcon.displayName="CreateVoucherIcon";var SendIcon_ref=react_default.a.createElement("g",{fill:"none",fillRule:"evenodd"},react_default.a.createElement("path",{fill:"#E5101D",fillOpacity:"0.87",fillRule:"nonzero",d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),react_default.a.createElement("path",{d:"M0 0h24v24H0z"})),SendIcon_ref2=react_default.a.createElement("g",{fill:"none",fillRule:"evenodd",opacity:".4"},react_default.a.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),react_default.a.createElement("path",{d:"M0 0h24v24H0z"}));function SendIcon(props){var isTyping=props.isTyping,rest=objectWithoutPropertiesLoose_default()(props,["isTyping"]);return isTyping?react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},rest),SendIcon_ref):react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},rest),SendIcon_ref2)}SendIcon.displayName="SendIcon";var style=__webpack_require__("fH77"),style_default=__webpack_require__.n(style),js=__webpack_require__("+9FD"),js_default=__webpack_require__.n(js),msgDetail=__webpack_require__("o//j"),MSG_STATIC_BODY_TEXT_ORDER="B\u1ea1n \u0111\xe3 g\u1eedi m\u1ed9t \u0111\u01a1n h\xe0ng cho ",MSG_STATIC_BODY_TEXT_PRODUCTS="B\u1ea1n \u0111\xe3 g\u1eedi s\u1ea3n ph\u1ea9m cho ",MessageSender_MessageSender=function(){function MessageSender(){defineProperty_default()(this,"conversation",void 0),defineProperty_default()(this,"userInfo",void 0),defineProperty_default()(this,"parentContextData",void 0),defineProperty_default()(this,"currentTopic",void 0),defineProperty_default()(this,"newTopic",void 0),defineProperty_default()(this,"chatActions",void 0),defineProperty_default()(this,"isHaveTopicMsgInDetails",void 0),defineProperty_default()(this,"nextMsgData",void 0)}var _proto=MessageSender.prototype;return _proto.init=function(conversation,userInfo,parentContextData,currentTopic,chatActions,isHaveTopicMsgInDetails,nextMsgData){void 0===nextMsgData&&(nextMsgData=null),this.conversation=conversation,this.userInfo=userInfo,this.parentContextData=parentContextData,this.currentTopic=currentTopic;var newTopic=Object(get.a)(parentContextData,"topic",null);this.newTopic=newTopic,this.chatActions=chatActions,this.isHaveTopicMsgInDetails=isHaveTopicMsgInDetails,this.nextMsgData=nextMsgData},_proto.getMessageType=function(){var messageType=res_const.s.MESSAGE;return this.parentContextData&&(messageType=msgDetail.k(this.currentTopic,this.parentContextData,this.isHaveTopicMsgInDetails)),messageType},_proto.validateImageFiles=function(imageFiles){if(!imageFiles||!imageFiles.length)return res_text.b.MESSAGE_ERROR.UPLOAD_02;var firstImageFile=imageFiles[0];return firstImageFile&&firstImageFile.size&&!Object(includes.a)(firstImageFile.name,"svg")?firstImageFile.size>1024*setting.z*1024?res_text.b.MESSAGE_ERROR.UPLOAD_01:"":res_text.b.MESSAGE_ERROR.UPLOAD_02},_proto.getReceiver=function(){var receiver=xmpp.i(this.conversation);return this.parentContextData&&(receiver=msgDetail.l(receiver,this.parentContextData)),receiver},_proto.createImageMessageData=function(imageCanvasBlob){return{idmessage:xmpp.n(),isTempMessage:!0,receiver:this.getReceiver(),sender:this.userInfo,chat_id:this.conversation.chat_id,topic:this.newTopic||this.currentTopic,message_type:this.getMessageType(),message_object_type:res_const.q.IMAGE,imageCanvasBlob:imageCanvasBlob}},_proto.createTextMessageData=function(text,postback,replyInHidden){void 0===postback&&(postback=""),void 0===replyInHidden&&(replyInHidden=!1);var message_object_type=res_const.q.TEXT;postback&&(message_object_type=res_const.q.POST_BACK);var result={body:text,postback:postback,idmessage:xmpp.n(),receiver:this.getReceiver(),sender:this.userInfo,chat_id:this.conversation.chat_id,topic:this.newTopic||this.currentTopic,message_type:this.getMessageType(),message_object_type:message_object_type,sub_type:"",replyInHidden:replyInHidden};return message_object_type===res_const.q.TEXT&&(result.sub_type=Object(chatHelper.q)(text)),result},_proto.createOrderMessageData=function(orderContent){var receiver=this.getReceiver();return{body:MSG_STATIC_BODY_TEXT_ORDER+receiver.partner_fullname,idmessage:xmpp.n(),receiver:this.getReceiver(),sender:this.userInfo,chat_id:this.conversation.chat_id,topic:this.newTopic||this.currentTopic,message_type:this.getMessageType(),message_object_type:res_const.q.SHOP_ORDER,orderContent:orderContent}},_proto.createProductsMessageData=function(products){var receiver=this.getReceiver();return{body:MSG_STATIC_BODY_TEXT_PRODUCTS+receiver.partner_fullname,idmessage:xmpp.n(),receiver:this.getReceiver(),sender:this.userInfo,chat_id:this.conversation.chat_id,topic:this.newTopic||this.currentTopic,message_type:this.getMessageType(),message_object_type:res_const.q.PRODUCTS,products:products}},_proto.createErrorMessageData=function(errorMsg){return{receiver:this.getReceiver(),sender:this.userInfo,chat_id:this.conversation.chat_id,topic:this.newTopic||this.currentTopic,message_type:this.getMessageType(),message_object_type:res_const.q.IMAGE,error:{type:res_const.k.MSG_DETAIL.ERROR_TYPE.IMAGE,msg:errorMsg}}},_proto.convertToCanvasBlob=function(imageFile){return new Promise((function(resolve){js_default()(imageFile,(function(canvasImgElement){"error"!==canvasImgElement.type?canvasImgElement.toBlob((function(imageCanvasBlob){imageCanvasBlob.lastModified=imageFile.lastModified,imageCanvasBlob.lastModifiedDate=imageFile.lastModifiedDate,imageCanvasBlob.name=imageFile.name,resolve(imageCanvasBlob)}),imageFile.type):resolve(null)}),{maxWidth:setting.A.RESIZE_IMG_WIDTH,orientation:!0,meta:!0,canvas:!0})}))},_proto.sendImage=function(imageFiles){var errorMsg,errorMessageData,firstImageFile,imageCanvasBlob,_errorMessageData,messageData;return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(errorMsg=this.validateImageFiles(imageFiles))){_context.next=5;break}return errorMessageData=this.createErrorMessageData(errorMsg),this.chatActions.sendErrorImage(errorMessageData),_context.abrupt("return",!1);case 5:return firstImageFile=imageFiles[0],_context.next=8,regenerator_default.a.awrap(this.convertToCanvasBlob(firstImageFile));case 8:if(imageCanvasBlob=_context.sent){_context.next=13;break}return _errorMessageData=this.createErrorMessageData(res_text.b.MESSAGE_ERROR.UPLOAD_02),this.chatActions.sendErrorImage(_errorMessageData),_context.abrupt("return",!1);case 13:return messageData=this.createImageMessageData(imageCanvasBlob),this.chatActions.sendImage(messageData),_context.abrupt("return",!0);case 16:case"end":return _context.stop()}}),null,this)},_proto.sendText=function(text,postback,replyInHidden){void 0===postback&&(postback=""),void 0===replyInHidden&&(replyInHidden=!1);var messageData=this.createTextMessageData(text,postback,replyInHidden);Object(googleAnalytics.f)(messageData),this.chatActions.sendMessage(messageData)},_proto.sendOrderMessage=function(orderContent){var orderMsgData=this.createOrderMessageData(orderContent);Object(googleAnalytics.f)(orderMsgData),this.chatActions.sendOrderMessage(orderMsgData)},_proto.sendProducts=function(products){var productsMsgData=this.createProductsMessageData(products);Object(googleAnalytics.f)(productsMsgData),this.chatActions.sendProductMessage(productsMsgData)},MessageSender}(),helpers_classnames=__webpack_require__("g6u1"),Swiper=__webpack_require__("/j5z"),QuickReplyText_QuickReplyText=__webpack_require__("hPyD"),QuickReplyText_default=__webpack_require__.n(QuickReplyText_QuickReplyText);function QuickReplyText_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Form_QuickReplyText_QuickReplyText=function(_Component){function QuickReplyText(props,context){var _this;return _this=_Component.call(this,props,context)||this,defineProperty_default()(assertThisInitialized_default()(_this),"onClickQuickReplyButton",(function(e,text){e.preventDefault();var topicType=Object(get.a)(_this.props.topic,"type","");Object(googleAnalytics.a)(text,topicType),_this.props.sendMessage(text)})),defineProperty_default()(assertThisInitialized_default()(_this),"initSlider",(function(){_this.containerSwiper=new Swiper.a("."+QuickReplyText_default.a.quickReplyContainer,function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?QuickReplyText_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):QuickReplyText_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},{slidesPerView:"auto",grabCursor:!0,mousewheel:{forceToAxis:!0}}))})),defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(className){var isOnWAP=Object(get.a)(_this.props,"isOnWAP",!1);return Object(helpers_styles.a)(QuickReplyText_default.a,className,isOnWAP)})),_this.containerElementRef=react_default.a.createRef(),_this.prevBtnEle=react_default.a.createRef(),_this.nextBtnEle=react_default.a.createRef(),_this.isDragging=!1,_this.lastClientX=0,_this.state={quickReplyTexts:[]},_this.containerSwiper=null,_this}inheritsLoose_default()(QuickReplyText,_Component);var _proto=QuickReplyText.prototype;return _proto.componentDidMount=function(){var _this2=this;this.containerElementRef.current.addEventListener("wheel",(function(e){var isScrollUp=e.deltaY<0,isScrollDown=e.deltaY>0,isScrollLeft=e.deltaX<0,isScrollRight=e.deltaX>0;isScrollUp&&(e.preventDefault(),_this2.containerSwiper&&_this2.containerSwiper.slidePrev()),isScrollDown&&(e.preventDefault(),_this2.containerSwiper&&_this2.containerSwiper.slideNext()),isScrollLeft&&(e.preventDefault(),_this2.containerSwiper&&_this2.containerSwiper.slidePrev()),isScrollRight&&(e.preventDefault(),_this2.containerSwiper&&_this2.containerSwiper.slideNext())}))},_proto.componentDidUpdate=function(prevProps){this.containerSwiper&&this.containerSwiper.update();var prevChatId=Object(get.a)(prevProps,"conversation.chat_id",""),currChatId=Object(get.a)(this.props,"conversation.chat_id",""),prevTopicId=Object(get.a)(prevProps,"topic.items.0.id",""),currTopicId=Object(get.a)(this.props,"topic.items.0.id","");if(prevChatId!==currChatId||prevTopicId!==currTopicId){var userInfo={role:userHelper.a.getRole(),full_name:this.props.userInfo.full_name},quickReplyTexts=Object(chatHelper.k)(this.props.topic,userInfo);this.setState({quickReplyTexts:quickReplyTexts}),this.containerSwiper||this.initSlider()}},_proto.componentWillUnmount=function(){this.containerElementRef.current.removeEventListener("wheel",null)},_proto.render=function(){var _cx,_this3=this;return react_default.a.createElement("div",{ref:this.containerElementRef,className:Object(helpers_classnames.a)(this.getResponsiveStyles(QuickReplyText_default.a.quickReplyContainer),(_cx={},_cx[QuickReplyText_default.a.hide]=!this.props.isDisplayQuickReplyText,_cx),"swiper-container")},react_default.a.createElement("div",{className:Object(helpers_classnames.a)(this.getResponsiveStyles(QuickReplyText_default.a.inner),"swiper-wrapper")},this.state.quickReplyTexts.map((function(quickReplyText,index){var reactKey="quickReplyText-"+index;return react_default.a.createElement("button",{key:reactKey,type:"button",onClick:function(e){return _this3.onClickQuickReplyButton(e,quickReplyText)},className:Object(helpers_classnames.a)(_this3.getResponsiveStyles(QuickReplyText_default.a.quickReplyTextBtn),"swiper-slide")},react_default.a.createElement("span",null,quickReplyText))}))))},QuickReplyText}(react.Component);Form_QuickReplyText_QuickReplyText.displayName="QuickReplyText";var ToastMsg_ToastMsg=__webpack_require__("ebDm"),ToastMsg_default=__webpack_require__.n(ToastMsg_ToastMsg),ToastMsgState={setInfoMsg:function(){},setIsDisplay:function(){}};function showToast(infoMsg){ToastMsgState.setInfoMsg(infoMsg),ToastMsgState.setIsDisplay(!0),setTimeout((function(){ToastMsgState.setIsDisplay(!1)}),1e3*setting.o)}var Form_ToastMsg_ToastMsg=function(props){var _cx,_useState=Object(react.useState)(""),infoMsg=_useState[0],setInfoMsg=_useState[1],_useState2=Object(react.useState)(!1),isDisplay=_useState2[0],setIsDisplay=_useState2[1];return ToastMsgState={setInfoMsg:setInfoMsg,setIsDisplay:setIsDisplay},react_default.a.createElement("div",{className:classnames_default()(ToastMsg_default.a.toast,(_cx={},_cx[ToastMsg_default.a.open]=isDisplay,_cx))},react_default.a.createElement("div",{className:ToastMsg_default.a.content},react_default.a.createElement("span",{className:ToastMsg_default.a.text},infoMsg)))};Form_ToastMsg_ToastMsg.displayName="ToastMsg";var Form_ToastMsg=Form_ToastMsg_ToastMsg,chunk=__webpack_require__("ZBlo"),EmojiButton_ref=react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},react_default.a.createElement("path",{fill:"#000",fillOpacity:"0.4",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}),react_default.a.createElement("g",{fill:"none"},react_default.a.createElement("path",{d:"M0 0h24v24H0z"})));function EmojiButtonIcon(){return EmojiButton_ref}EmojiButtonIcon.displayName="EmojiButtonIcon";var EmojiAction_EmojiAction=__webpack_require__("pIOu"),EmojiAction_default=__webpack_require__.n(EmojiAction_EmojiAction),emojiIcons_emojiIcons=[{title:"grinning face",value:"\ud83d\ude00",type:res_const.j.UNICODE},{title:"beaming face with smiling eyes",value:"\ud83d\ude01",type:res_const.j.UNICODE},{title:"face with tears of joy",value:"\ud83d\ude02",type:res_const.j.UNICODE},{title:"rolling on the floor laughing",value:"\ud83e\udd23",type:res_const.j.UNICODE},{title:"grinning face with big eyes",value:"\ud83d\ude03",type:res_const.j.UNICODE},{title:"grinning face with smiling eyes",value:"\ud83d\ude04",type:res_const.j.UNICODE},{title:"grinning face with sweat",value:"\ud83d\ude05",type:res_const.j.UNICODE},{title:"grinning squinting face",value:"\ud83d\ude06",type:res_const.j.UNICODE},{title:"winking face",value:"\ud83d\ude09",type:res_const.j.UNICODE},{title:"smiling face with smiling eyes",value:"\ud83d\ude0a",type:res_const.j.UNICODE},{title:"face savoring food",value:"\ud83d\ude0b",type:res_const.j.UNICODE},{title:"smiling face with sunglasses",value:"\ud83d\ude0e",type:res_const.j.UNICODE},{title:"smiling face with heart-eyes",value:"\ud83d\ude0d",type:res_const.j.UNICODE},{title:"face blowing a kiss",value:"\ud83d\ude18",type:res_const.j.UNICODE},{title:"kissing face",value:"\ud83d\ude17",type:res_const.j.UNICODE},{title:"kissing face with smiling eyes",value:"\ud83d\ude19",type:res_const.j.UNICODE},{title:"kissing face with closed eyes",value:"\ud83d\ude1a",type:res_const.j.UNICODE},{title:"slightly smiling face",value:"\ud83d\ude42",type:res_const.j.UNICODE},{title:"hugging face",value:"\ud83e\udd17",type:res_const.j.UNICODE},{title:"star-struck",value:"\ud83e\udd29",type:res_const.j.UNICODE},{title:"thinking face",value:"\ud83e\udd14",type:res_const.j.UNICODE},{title:"face with raised eyebrow",value:"\ud83e\udd28",type:res_const.j.UNICODE},{title:"neutral face",value:"\ud83d\ude10",type:res_const.j.UNICODE},{title:"expressionless face",value:"\ud83d\ude11",type:res_const.j.UNICODE},{title:"face without mouth",value:"\ud83d\ude36",type:res_const.j.UNICODE},{title:"face with rolling eyes",value:"\ud83d\ude44",type:res_const.j.UNICODE},{title:"smirking face",value:"\ud83d\ude0f",type:res_const.j.UNICODE},{title:"persevering face",value:"\ud83d\ude23",type:res_const.j.UNICODE},{title:"sad but relieved face",value:"\ud83d\ude25",type:res_const.j.UNICODE},{title:"face with open mouth",value:"\ud83d\ude2e",type:res_const.j.UNICODE},{title:"zipper-mouth face",value:"\ud83e\udd10",type:res_const.j.UNICODE},{title:"hushed face",value:"\ud83d\ude2f",type:res_const.j.UNICODE},{title:"sleepy face",value:"\ud83d\ude2a",type:res_const.j.UNICODE},{title:"tired face",value:"\ud83d\ude2b",type:res_const.j.UNICODE},{title:"sleeping face",value:"\ud83d\ude34",type:res_const.j.UNICODE},{title:"relieved face",value:"\ud83d\ude0c",type:res_const.j.UNICODE},{title:"face with tongue",value:"\ud83d\ude1b",type:res_const.j.UNICODE},{title:"winking face with tongue",value:"\ud83d\ude1c",type:res_const.j.UNICODE},{title:"squinting face with tongue",value:"\ud83d\ude1d",type:res_const.j.UNICODE},{title:"drooling face",value:"\ud83e\udd24",type:res_const.j.UNICODE},{title:"unamused face",value:"\ud83d\ude12",type:res_const.j.UNICODE},{title:"downcast face with sweat",value:"\ud83d\ude13",type:res_const.j.UNICODE},{title:"pensive face",value:"\ud83d\ude14",type:res_const.j.UNICODE},{title:"confused face",value:"\ud83d\ude15",type:res_const.j.UNICODE},{title:"upside-down face",value:"\ud83d\ude43",type:res_const.j.UNICODE},{title:"money-mouth face",value:"\ud83e\udd11",type:res_const.j.UNICODE},{title:"astonished face",value:"\ud83d\ude32",type:res_const.j.UNICODE},{title:"slightly frowning face",value:"\ud83d\ude41",type:res_const.j.UNICODE},{title:"confounded face",value:"\ud83d\ude16",type:res_const.j.UNICODE},{title:"disappointed face",value:"\ud83d\ude1e",type:res_const.j.UNICODE},{title:"worried face",value:"\ud83d\ude1f",type:res_const.j.UNICODE},{title:"face with steam from nose",value:"\ud83d\ude24",type:res_const.j.UNICODE},{title:"crying face",value:"\ud83d\ude22",type:res_const.j.UNICODE},{title:"loudly crying face",value:"\ud83d\ude2d",type:res_const.j.UNICODE},{title:"frowning face with open mouth",value:"\ud83d\ude26",type:res_const.j.UNICODE},{title:"anguished face",value:"\ud83d\ude27",type:res_const.j.UNICODE},{title:"fearful face",value:"\ud83d\ude28",type:res_const.j.UNICODE},{title:"weary face",value:"\ud83d\ude29",type:res_const.j.UNICODE},{title:"exploding head",value:"\ud83e\udd2f",type:res_const.j.UNICODE},{title:"grimacing face",value:"\ud83d\ude2c",type:res_const.j.UNICODE},{title:"anxious face with sweat",value:"\ud83d\ude30",type:res_const.j.UNICODE},{title:"face screaming in fear",value:"\ud83d\ude31",type:res_const.j.UNICODE},{title:"flushed face",value:"\ud83d\ude33",type:res_const.j.UNICODE},{title:"zany face",value:"\ud83e\udd2a",type:res_const.j.UNICODE},{title:"dizzy face",value:"\ud83d\ude35",type:res_const.j.UNICODE},{title:"pouting face",value:"\ud83d\ude21",type:res_const.j.UNICODE},{title:"angry face",value:"\ud83d\ude20",type:res_const.j.UNICODE},{title:"face with symbols on mouth",value:"\ud83e\udd2c",type:res_const.j.UNICODE},{title:"face with medical mask",value:"\ud83d\ude37",type:res_const.j.UNICODE},{title:"face with thermometer",value:"\ud83e\udd12",type:res_const.j.UNICODE},{title:"face with head-bandage",value:"\ud83e\udd15",type:res_const.j.UNICODE},{title:"nauseated face",value:"\ud83e\udd22",type:res_const.j.UNICODE},{title:"face vomiting",value:"\ud83e\udd2e",type:res_const.j.UNICODE},{title:"sneezing face",value:"\ud83e\udd27",type:res_const.j.UNICODE},{title:"smiling face with halo",value:"\ud83d\ude07",type:res_const.j.UNICODE},{title:"cowboy hat face",value:"\ud83e\udd20",type:res_const.j.UNICODE},{title:"lying face",value:"\ud83e\udd25",type:res_const.j.UNICODE},{title:"shushing face",value:"\ud83e\udd2b",type:res_const.j.UNICODE},{title:"face with hand over mouth",value:"\ud83e\udd2d",type:res_const.j.UNICODE},{title:"face with monocle",value:"\ud83e\uddd0",type:res_const.j.UNICODE},{title:"nerd face",value:"\ud83e\udd13",type:res_const.j.UNICODE},{title:"smiling face with horns",value:"\ud83d\ude08",type:res_const.j.UNICODE},{title:"angry face with horns",value:"\ud83d\udc7f",type:res_const.j.UNICODE},{title:"clown face",value:"\ud83e\udd21",type:res_const.j.UNICODE},{title:"ogre",value:"\ud83d\udc79",type:res_const.j.UNICODE},{title:"goblin",value:"\ud83d\udc7a",type:res_const.j.UNICODE},{title:"skull",value:"\ud83d\udc80",type:res_const.j.UNICODE},{title:"skull and crossbones",value:"\u2620",type:res_const.j.UNICODE},{title:"ghost",value:"\ud83d\udc7b",type:res_const.j.UNICODE},{title:"alien",value:"\ud83d\udc7d",type:res_const.j.UNICODE},{title:"alien monster",value:"\ud83d\udc7e",type:res_const.j.UNICODE},{title:"robot face",value:"\ud83e\udd16",type:res_const.j.UNICODE},{title:"pile of poo",value:"\ud83d\udca9",type:res_const.j.UNICODE},{title:"grinning cat face",value:"\ud83d\ude3a",type:res_const.j.UNICODE},{title:"grinning cat face with smiling eyes",value:"\ud83d\ude38",type:res_const.j.UNICODE},{title:"cat face with tears of joy",value:"\ud83d\ude39",type:res_const.j.UNICODE},{title:"smiling cat face with heart-eyes",value:"\ud83d\ude3b",type:res_const.j.UNICODE},{title:"cat face with wry smile",value:"\ud83d\ude3c",type:res_const.j.UNICODE},{title:"kissing cat face",value:"\ud83d\ude3d",type:res_const.j.UNICODE},{title:"weary cat face",value:"\ud83d\ude40",type:res_const.j.UNICODE},{title:"crying cat face",value:"\ud83d\ude3f",type:res_const.j.UNICODE},{title:"pouting cat face",value:"\ud83d\ude3e",type:res_const.j.UNICODE},{title:"see-no-evil monkey",value:"\ud83d\ude48",type:res_const.j.UNICODE},{title:"hear-no-evil monkey",value:"\ud83d\ude49",type:res_const.j.UNICODE},{title:"speak-no-evil monkey",value:"\ud83d\ude4a",type:res_const.j.UNICODE},{title:"baby",value:"\ud83d\udc76",type:res_const.j.UNICODE},{title:"child",value:"\ud83e\uddd2",type:res_const.j.UNICODE},{title:"boy",value:"\ud83d\udc66",type:res_const.j.UNICODE},{title:"girl",value:"\ud83d\udc67",type:res_const.j.UNICODE},{title:"adult",value:"\ud83e\uddd1",type:res_const.j.UNICODE},{title:"man",value:"\ud83d\udc68",type:res_const.j.UNICODE},{title:"woman",value:"\ud83d\udc69",type:res_const.j.UNICODE},{title:"older adult",value:"\ud83e\uddd3",type:res_const.j.UNICODE},{title:"old man",value:"\ud83d\udc74",type:res_const.j.UNICODE},{title:"old woman",value:"\ud83d\udc75",type:res_const.j.UNICODE},{title:"prince",value:"\ud83e\udd34",type:res_const.j.UNICODE},{title:"princess",value:"\ud83d\udc78",type:res_const.j.UNICODE},{title:"man with Chinese cap",value:"\ud83d\udc72",type:res_const.j.UNICODE},{title:"woman with headscarf",value:"\ud83e\uddd5",type:res_const.j.UNICODE},{title:"bearded person",value:"\ud83e\uddd4",type:res_const.j.UNICODE},{title:"man in tuxedo",value:"\ud83e\udd35",type:res_const.j.UNICODE},{title:"bride with veil",value:"\ud83d\udc70",type:res_const.j.UNICODE},{title:"pregnant woman",value:"\ud83e\udd30",type:res_const.j.UNICODE},{title:"breast-feeding",value:"\ud83e\udd31",type:res_const.j.UNICODE},{title:"baby angel",value:"\ud83d\udc7c",type:res_const.j.UNICODE},{title:"Santa Claus",value:"\ud83c\udf85",type:res_const.j.UNICODE},{title:"Mrs. Claus",value:"\ud83e\udd36",type:res_const.j.UNICODE},{title:"woman dancing",value:"\ud83d\udc83",type:res_const.j.UNICODE},{title:"man dancing",value:"\ud83d\udd7a",type:res_const.j.UNICODE},{title:"people with bunny ears",value:"\ud83d\udc6f",type:res_const.j.UNICODE},{title:"person taking bath",value:"\ud83d\udec0",type:res_const.j.UNICODE},{title:"person in bed",value:"\ud83d\udecc",type:res_const.j.UNICODE},{title:"man in suit levitating",value:"\ud83d\udd74",type:res_const.j.UNICODE},{title:"speaking head",value:"\ud83d\udde3",type:res_const.j.UNICODE},{title:"bust in silhouette",value:"\ud83d\udc64",type:res_const.j.UNICODE},{title:"busts in silhouette",value:"\ud83d\udc65",type:res_const.j.UNICODE},{title:"person fencing",value:"\ud83e\udd3a",type:res_const.j.UNICODE},{title:"horse racing",value:"\ud83c\udfc7",type:res_const.j.UNICODE},{title:"skier",value:"\u26f7",type:res_const.j.UNICODE},{title:"snowboarder",value:"\ud83c\udfc2",type:res_const.j.UNICODE},{title:"racing car",value:"\ud83c\udfce",type:res_const.j.UNICODE},{title:"motorcycle",value:"\ud83c\udfcd",type:res_const.j.UNICODE},{title:"people wrestling",value:"\ud83e\udd3c",type:res_const.j.UNICODE},{title:"man and woman holding hands",value:"\ud83d\udc6b",type:res_const.j.UNICODE},{title:"two men holding hands",value:"\ud83d\udc6c",type:res_const.j.UNICODE},{title:"two women holding hands",value:"\ud83d\udc6d",type:res_const.j.UNICODE},{title:"kiss",value:"\ud83d\udc8f",type:res_const.j.UNICODE},{title:"couple with heart",value:"\ud83d\udc91",type:res_const.j.UNICODE},{title:"family",value:"\ud83d\udc6a",type:res_const.j.UNICODE},{title:"selfie",value:"\ud83e\udd33",type:res_const.j.UNICODE},{title:"flexed biceps",value:"\ud83d\udcaa",type:res_const.j.UNICODE},{title:"backhand index pointing left",value:"\ud83d\udc48",type:res_const.j.UNICODE},{title:"backhand index pointing right",value:"\ud83d\udc49",type:res_const.j.UNICODE},{title:"index pointing up",value:"\u261d",type:res_const.j.UNICODE},{title:"backhand index pointing up",value:"\ud83d\udc46",type:res_const.j.UNICODE},{title:"middle finger",value:"\ud83d\udd95",type:res_const.j.UNICODE},{title:"backhand index pointing down",value:"\ud83d\udc47",type:res_const.j.UNICODE},{title:"victory hand",value:"\u270c",type:res_const.j.UNICODE},{title:"crossed fingers",value:"\ud83e\udd1e",type:res_const.j.UNICODE},{title:"vulcan salute",value:"\ud83d\udd96",type:res_const.j.UNICODE},{title:"sign of the horns",value:"\ud83e\udd18",type:res_const.j.UNICODE},{title:"call me hand",value:"\ud83e\udd19",type:res_const.j.UNICODE},{title:"hand with fingers splayed",value:"\ud83d\udd90",type:res_const.j.UNICODE},{title:"raised hand",value:"\u270b",type:res_const.j.UNICODE},{title:"OK hand",value:"\ud83d\udc4c",type:res_const.j.UNICODE},{title:"thumbs up",value:"\ud83d\udc4d",type:res_const.j.UNICODE},{title:"thumbs down",value:"\ud83d\udc4e",type:res_const.j.UNICODE},{title:"raised fist",value:"\u270a",type:res_const.j.UNICODE},{title:"oncoming fist",value:"\ud83d\udc4a",type:res_const.j.UNICODE},{title:"left-facing fist",value:"\ud83e\udd1b",type:res_const.j.UNICODE},{title:"right-facing fist",value:"\ud83e\udd1c",type:res_const.j.UNICODE},{title:"raised back of hand",value:"\ud83e\udd1a",type:res_const.j.UNICODE},{title:"waving hand",value:"\ud83d\udc4b",type:res_const.j.UNICODE},{title:"love-you gesture",value:"\ud83e\udd1f",type:res_const.j.UNICODE},{title:"writing hand",value:"\u270d",type:res_const.j.UNICODE},{title:"clapping hands",value:"\ud83d\udc4f",type:res_const.j.UNICODE},{title:"open hands",value:"\ud83d\udc50",type:res_const.j.UNICODE},{title:"raising hands",value:"\ud83d\ude4c",type:res_const.j.UNICODE},{title:"palms up together",value:"\ud83e\udd32",type:res_const.j.UNICODE},{title:"folded hands",value:"\ud83d\ude4f",type:res_const.j.UNICODE},{title:"handshake",value:"\ud83e\udd1d",type:res_const.j.UNICODE},{title:"nail polish",value:"\ud83d\udc85",type:res_const.j.UNICODE},{title:"ear",value:"\ud83d\udc42",type:res_const.j.UNICODE},{title:"nose",value:"\ud83d\udc43",type:res_const.j.UNICODE},{title:"footprints",value:"\ud83d\udc63",type:res_const.j.UNICODE},{title:"eyes",value:"\ud83d\udc40",type:res_const.j.UNICODE},{title:"eye",value:"\ud83d\udc41",type:res_const.j.UNICODE},{title:"brain",value:"\ud83e\udde0",type:res_const.j.UNICODE},{title:"tongue",value:"\ud83d\udc45",type:res_const.j.UNICODE},{title:"mouth",value:"\ud83d\udc44",type:res_const.j.UNICODE},{title:"kiss mark",value:"\ud83d\udc8b",type:res_const.j.UNICODE},{title:"heart with arrow",value:"\ud83d\udc98",type:res_const.j.UNICODE},{title:"red heart",value:"\u2764",type:res_const.j.UNICODE},{title:"beating heart",value:"\ud83d\udc93",type:res_const.j.UNICODE},{title:"broken heart",value:"\ud83d\udc94",type:res_const.j.UNICODE},{title:"two hearts",value:"\ud83d\udc95",type:res_const.j.UNICODE},{title:"sparkling heart",value:"\ud83d\udc96",type:res_const.j.UNICODE},{title:"growing heart",value:"\ud83d\udc97",type:res_const.j.UNICODE},{title:"blue heart",value:"\ud83d\udc99",type:res_const.j.UNICODE},{title:"green heart",value:"\ud83d\udc9a",type:res_const.j.UNICODE},{title:"yellow heart",value:"\ud83d\udc9b",type:res_const.j.UNICODE},{title:"orange heart",value:"\ud83e\udde1",type:res_const.j.UNICODE},{title:"purple heart",value:"\ud83d\udc9c",type:res_const.j.UNICODE},{title:"black heart",value:"\ud83d\udda4",type:res_const.j.UNICODE},{title:"heart with ribbon",value:"\ud83d\udc9d",type:res_const.j.UNICODE},{title:"revolving hearts",value:"\ud83d\udc9e",type:res_const.j.UNICODE},{title:"heart decoration",value:"\ud83d\udc9f",type:res_const.j.UNICODE},{title:"heavy heart exclamation",value:"\u2763",type:res_const.j.UNICODE},{title:"love letter",value:"\ud83d\udc8c",type:res_const.j.UNICODE},{title:"zzz",value:"\ud83d\udca4",type:res_const.j.UNICODE},{title:"anger symbol",value:"\ud83d\udca2",type:res_const.j.UNICODE},{title:"bomb",value:"\ud83d\udca3",type:res_const.j.UNICODE},{title:"collision",value:"\ud83d\udca5",type:res_const.j.UNICODE},{title:"sweat droplets",value:"\ud83d\udca6",type:res_const.j.UNICODE},{title:"dashing away",value:"\ud83d\udca8",type:res_const.j.UNICODE},{title:"dizzy",value:"\ud83d\udcab",type:res_const.j.UNICODE},{title:"speech balloon",value:"\ud83d\udcac",type:res_const.j.UNICODE},{title:"left speech bubble",value:"\ud83d\udde8",type:res_const.j.UNICODE},{title:"right anger bubble",value:"\ud83d\uddef",type:res_const.j.UNICODE},{title:"thought balloon",value:"\ud83d\udcad",type:res_const.j.UNICODE},{title:"hole",value:"\ud83d\udd73",type:res_const.j.UNICODE},{title:"glasses",value:"\ud83d\udc53",type:res_const.j.UNICODE},{title:"sunglasses",value:"\ud83d\udd76",type:res_const.j.UNICODE},{title:"necktie",value:"\ud83d\udc54",type:res_const.j.UNICODE},{title:"t-shirt",value:"\ud83d\udc55",type:res_const.j.UNICODE},{title:"jeans",value:"\ud83d\udc56",type:res_const.j.UNICODE},{title:"scarf",value:"\ud83e\udde3",type:res_const.j.UNICODE},{title:"gloves",value:"\ud83e\udde4",type:res_const.j.UNICODE},{title:"coat",value:"\ud83e\udde5",type:res_const.j.UNICODE},{title:"socks",value:"\ud83e\udde6",type:res_const.j.UNICODE},{title:"dress",value:"\ud83d\udc57",type:res_const.j.UNICODE},{title:"kimono",value:"\ud83d\udc58",type:res_const.j.UNICODE},{title:"bikini",value:"\ud83d\udc59",type:res_const.j.UNICODE},{title:"woman\u2019s clothes",value:"\ud83d\udc5a",type:res_const.j.UNICODE},{title:"purse",value:"\ud83d\udc5b",type:res_const.j.UNICODE},{title:"handbag",value:"\ud83d\udc5c",type:res_const.j.UNICODE},{title:"clutch bag",value:"\ud83d\udc5d",type:res_const.j.UNICODE},{title:"shopping bags",value:"\ud83d\udecd",type:res_const.j.UNICODE},{title:"backpack",value:"\ud83c\udf92",type:res_const.j.UNICODE},{title:"man\u2019s shoe",value:"\ud83d\udc5e",type:res_const.j.UNICODE},{title:"running shoe",value:"\ud83d\udc5f",type:res_const.j.UNICODE},{title:"high-heeled shoe",value:"\ud83d\udc60",type:res_const.j.UNICODE},{title:"woman\u2019s sandal",value:"\ud83d\udc61",type:res_const.j.UNICODE},{title:"woman\u2019s boot",value:"\ud83d\udc62",type:res_const.j.UNICODE},{title:"crown",value:"\ud83d\udc51",type:res_const.j.UNICODE},{title:"woman\u2019s hat",value:"\ud83d\udc52",type:res_const.j.UNICODE},{title:"top hat",value:"\ud83c\udfa9",type:res_const.j.UNICODE},{title:"graduation cap",value:"\ud83c\udf93",type:res_const.j.UNICODE},{title:"billed cap",value:"\ud83e\udde2",type:res_const.j.UNICODE},{title:"rescue worker\u2019s helmet",value:"\u26d1",type:res_const.j.UNICODE},{title:"prayer beads",value:"\ud83d\udcff",type:res_const.j.UNICODE},{title:"lipstick",value:"\ud83d\udc84",type:res_const.j.UNICODE},{title:"ring",value:"\ud83d\udc8d",type:res_const.j.UNICODE},{title:"gem stone",value:"\ud83d\udc8e",type:res_const.j.UNICODE}],browserHelper=__webpack_require__("xnfK"),EmojiAction_ref=react_default.a.createElement(EmojiButtonIcon,null),Form_EmojiAction_EmojiAction=function(props){var _cx,emojiPanelRef=Object(react.useRef)(null),emojiBtnRef=Object(react.useRef)(null),emojiPanelBodyRef=Object(react.useRef)(null);Object(react.useEffect)((function(){var emojiPanelRefEle=emojiPanelRef.current,emojiBtnRefEle=emojiBtnRef.current,emojiPanelBodyRefEle=emojiPanelBodyRef.current;return document.addEventListener("mousedown",(function(e){return handleClickOutside(e,emojiPanelRefEle,emojiBtnRefEle)})),emojiPanelBodyRefEle.addEventListener("scroll",(function(e){return preventScrollToOutside(e,emojiPanelBodyRefEle)})),function(){document.removeEventListener("mousedown",(function(e){return handleClickOutside(e,emojiPanelRefEle,emojiBtnRefEle)})),emojiPanelBodyRefEle.removeEventListener("scroll",null)}}),[]);var handleClickOutside=function(event,emojiPanelRefEle,emojiBtnRefEle){emojiPanelRefEle&&!emojiPanelRefEle.contains(event.target)&&emojiBtnRefEle&&!emojiBtnRefEle.contains(event.target)&&props.onClickOutsidePanel()},preventScrollToOutside=function(event,emojiPanelRefEle){Boolean(emojiPanelRefEle.scrollTop+emojiPanelRefEle.clientHeight>=emojiPanelRefEle.scrollHeight)&&(emojiPanelRefEle.scrollTop=emojiPanelRefEle.scrollTop-1),Boolean(!emojiPanelRefEle.scrollTop)&&(emojiPanelRefEle.scrollTop=1)},iconsRows=Object(chunk.a)(emojiIcons_emojiIcons,8);return react_default.a.createElement(react.Fragment,null,react_default.a.createElement("button",{ref:emojiBtnRef,className:EmojiAction_default.a.emojiBtnContainer,onClick:props.onClickBtn},EmojiAction_ref),react_default.a.createElement("div",{ref:emojiPanelRef,className:classnames_default()(EmojiAction_default.a.emojiPanel,(_cx={},_cx[EmojiAction_default.a.displayEmojiPanel]=props.isDisplayEmojiPanel,_cx))},react_default.a.createElement("div",{ref:emojiPanelBodyRef,className:EmojiAction_default.a.panelBody},iconsRows.map((function(iconsRow,indexRow){return react_default.a.createElement("div",{className:EmojiAction_default.a.iconRow,key:"icon-row-"+indexRow},iconsRow.map((function(emojiIcon,indexIcon){var _cx2;return react_default.a.createElement("button",{key:"emoji-"+indexIcon,className:EmojiAction_default.a.iconBtn,onClick:function(event){return function(event,emojiData){event.preventDefault(),Object(googleAnalytics.b)(emojiData.title),props.onClickEmoji(emojiData)}(event,emojiIcon)}},react_default.a.createElement("span",{className:classnames_default()((_cx2={},_cx2[EmojiAction_default.a.window]=Object(browserHelper.e)(),_cx2)),role:"img","aria-label":emojiIcon.title},emojiIcon.value))})))})))))};Form_EmojiAction_EmojiAction.displayName="EmojiAction";var Form_EmojiAction=Form_EmojiAction_EmojiAction,orderIcon=__webpack_require__("lLvQ"),orderIcon_default=__webpack_require__.n(orderIcon),SendOrderButton_SendOrderButton=__webpack_require__("moN1"),SendOrderButton_default=__webpack_require__.n(SendOrderButton_SendOrderButton),reactstrap_cjs=__webpack_require__("aZmL"),Close=__webpack_require__("KJ0p"),Modal=__webpack_require__("+Kzv"),Modal_default=__webpack_require__.n(Modal),Modal_ref=react_default.a.createElement(Close.a,null),Modal_ChatModal=function(_Component){function ChatModal(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_Component.call.apply(_Component,[this].concat(args))||this,defineProperty_default()(assertThisInitialized_default()(_this),"closeModal",(function(){_this.props.closeModal()})),_this}return inheritsLoose_default()(ChatModal,_Component),ChatModal.prototype.render=function(){var _cx,_cx2,CloseBtn=react_default.a.createElement("button",{className:Modal_default.a.closeBtn,onClick:this.closeModal},Modal_ref);return react_default.a.createElement(reactstrap_cjs.Modal,{className:classnames_default()(Modal_default.a.modalDialog,this.props.modalDialogStyles),contentClassName:classnames_default()(Modal_default.a.modalContent,this.props.modalContentStyles),isOpen:this.props.isOpen,toggle:this.closeModal,modalClassName:classnames_default()(this.props.modalStyles)},react_default.a.createElement(reactstrap_cjs.ModalHeader,{className:classnames_default()(Modal_default.a.modalHeader,(_cx={},_cx[Modal_default.a.onWAP]=this.props.reduxState.isOnWAP,_cx)),close:CloseBtn},this.props.headerText),react_default.a.createElement("form",{onSubmit:this.props.submitModalForm},react_default.a.createElement(reactstrap_cjs.ModalBody,{className:classnames_default()(Modal_default.a.modalBody,this.props.modalBodyStyles)},this.props.children),react_default.a.createElement(reactstrap_cjs.ModalFooter,{className:classnames_default()(Modal_default.a.modalFooter,(_cx2={},_cx2[Modal_default.a.hide]=this.props.isHideFooter,_cx2))},react_default.a.createElement(reactstrap_cjs.Button,{type:"submit",className:Modal_default.a.submitBtn,disabled:this.props.isInvalidToSubmit},this.props.textSubmit))))},ChatModal}(react.Component);Modal_ChatModal.displayName="ChatModal",defineProperty_default()(Modal_ChatModal,"defaultProps",{isHideFooter:!1,modalBodyStyles:"",modalDialogStyles:"",modalContentStyles:"",modalStyles:""});var Chat_Modal=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{isOnWAP:state.app.isOnWAP}}}),null))(Modal_ChatModal),fetcher=__webpack_require__("721D"),parser_parseOrderDataToMsgOrder=function(orderData){var orderProducts=Object(get.a)(orderData,"Item",[]),firstProduct=Object(get.a)(orderProducts,"0",null),orderFinalPrice=0;return orderProducts.forEach((function(orderProduct){orderFinalPrice+=Object(get.a)(orderProduct,"Final_price",0)})),{external_id:Object(get.a)(firstProduct,"Product_id",""),final_price:""+orderFinalPrice,id:Object(get.a)(orderData,"Increment_id",""),image_url:Object(get.a)(firstProduct,"Image_url",""),name:Object(get.a)(firstProduct,"Name",""),order_attr:{rating:0,status_color:"#ff85ba",status_text:Object(get.a)(orderData,"Status_label",""),status_code:Object(get.a)(orderData,"Status",""),updated_at:""+Object(get.a)(orderData,"Updated_at","")}}},parser_parseProductDataToMsgProduct=function(productData){var result={product_id:Object(get.a)(productData,"id",0),app_dis_count_percent:Object(get.a)(productData,"discount_app",0),brand_id:Object(get.a)(productData,"brand_id",0),final_promotion_percent:Object(get.a)(productData,"sale_percent",0),free_shipping:Object(get.a)(productData,["options","is_shipping_discount"],0)?1:0,img_url_mob:Object(get.a)(productData,"image",""),is_certified:Object(get.a)(productData,["shop","is_certified"],0),is_product_installment:parseInt(Object(get.a)(productData,["options","is_installment"],0),10),is_senmall:Object(get.a)(productData,"is_senmall",0),name:Object(get.a)(productData,"name",""),product_url:Object(chatHelper.d)(Object(get.a)(productData,"cat_path","")),promotion_percent:Object(get.a)(productData,"sale_percent",0),shop_id:Object(get.a)(productData,["shop","id"],0),shop_name:Object(get.a)(productData,["shop","name"],""),min_max_price:Object(format_messageContent.e)(productData.sale_price_min),final_price:Object(get.a)(productData,"sale_price_min",0),price:Object(get.a)(productData,"default_price_min",0),price_max:Object(get.a)(productData,"default_price_max",0),is_promotion:!1,original_price:Object(get.a)(productData,"default_price_max",0)};return result.promotion_percent>0&&(result.is_promotion=!0),Object(chatHelper.s)(result.original_price)||(result.original_price=Object(format_messageContent.e)(result.price_max)),productData.final_price_max&&productData.final_price_max!==productData.final_price&&(result.min_max_price=Object(format_messageContent.e)(productData.final_price)+" - "+Object(format_messageContent.e)(productData.final_price_max)),result},map=__webpack_require__("zmn3"),OrderContent_OrderContent=__webpack_require__("pDBd"),OrderContent_default=__webpack_require__.n(OrderContent_OrderContent),defaultStatusSteps=[{number:1,isActive:!1,isCurrent:!1,label:res_text.d.ORDER.STATUS_TEXT_1},{number:2,isActive:!1,isCurrent:!1,label:res_text.d.ORDER.STATUS_TEXT_2},{number:3,isActive:!1,isCurrent:!1,label:res_text.d.ORDER.STATUS_TEXT_3},{number:4,isActive:!1,isCurrent:!1,label:res_text.d.ORDER.STATUS_TEXT_4}],ORDER_STATUS={TEXT:{VN_ECOM_NEW:"M\u1edbi",VN_ECOM_WAIT_CONFIRM:"Ch\u1edd x\xe1c nh\u1eadn",VN_ECOM_CONFIRM:"\u0110ang x\xe1c nh\u1eadn",VN_ECOM_CONFIRMED:"\u0110\xe3 x\xe1c nh\u1eadn",VN_ECOM_PICKING_UP:"Ch\u1edd giao h\xe0ng",VN_ECOM_DELIVERING:"\u0110ang v\u1eadn chuy\u1ec3n",VN_ECOM_DELIVERED:"\u0110\xe3 giao h\xe0ng",VN_ECOM_DROPPED_OFF:"\u0110\xe3 nh\u1eadn h\xe0ng",VN_ECOM_COMPLETED:"Ho\xe0n t\u1ea5t",VN_ECOM_CANCELED:"\u0110\xe3 h\u1ee7y"},CODE:{ECOM_NEW:"ecom_new",ECOM_DELAY:"ecom_delay",ECOM_DELAYED:"ecom_delayed",ECOM_ACEPT:"ecom_accept",ECOM_PROCESSING:"ecom_processing",ECOM_DELIVERING:"ecom_delivering",ECOM_PICKING_UP:"ecom_picking_up",ECOM_SORTING:"ecom_sorting",ECOM_COMPLETE:"ecom_complete",ECOM_POD:"ecom_pod",ECOM_CANCALED:"ecom_canceled"}};function OrderContent_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Chat_OrderContent_OrderContent=function(props){var orderContent=props.orderContent,imageUrl=Object(format_messageContent.d)(orderContent.image_url,"80x80")||"",imgAltText=orderContent.name||"",orderLabelText=res_text.d.ORDER.LABEL+orderContent.id,orderStatusText=Object(get.a)(orderContent,"order_attr.status_text",""),statusSteps=function(orderAttr){if(!orderAttr)return defaultStatusSteps;var result=[].concat(defaultStatusSteps);return result=Object(map.a)(result,(function(statusStep){return function(statusStep,orderAttr){var result=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?OrderContent_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):OrderContent_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},statusStep);(function(orderAttr){if(orderAttr.status_code)switch(orderAttr.status_text){case ORDER_STATUS.CODE.ECOM_COMPLETE:case ORDER_STATUS.CODE.ECOM_POD:return!0}if(orderAttr.status_text)switch(orderAttr.status_text){case ORDER_STATUS.TEXT.VN_ECOM_DELIVERED:case ORDER_STATUS.TEXT.VN_ECOM_DROPPED_OFF:case ORDER_STATUS.TEXT.VN_ECOM_COMPLETED:return!0}return!1})(orderAttr)&&statusStep.number<=4?(result.isActive=!0,4===statusStep.number&&(result.isCurrent=!0)):function(orderAttr){if(orderAttr.status_code)switch(orderAttr.status_text){case ORDER_STATUS.CODE.ECOM_DELIVERING:case ORDER_STATUS.CODE.ECOM_PICKING_UP:case ORDER_STATUS.CODE.ECOM_SORTING:return!0}if(orderAttr.status_text)switch(orderAttr.status_text){case ORDER_STATUS.TEXT.VN_ECOM_DELIVERING:case ORDER_STATUS.TEXT.VN_ECOM_PICKING_UP:return!0}return!1}(orderAttr)&&statusStep.number<=3?(result.isActive=!0,3===statusStep.number&&(result.isCurrent=!0)):function(orderAttr){if(orderAttr.status_code)switch(orderAttr.status_text){case ORDER_STATUS.CODE.ECOM_ACEPT:case ORDER_STATUS.CODE.ECOM_PROCESSING:return!0}if(orderAttr.status_text)switch(orderAttr.status_text){case ORDER_STATUS.TEXT.VN_ECOM_CONFIRMED:return!0}return!1}(orderAttr)&&statusStep.number<=2?(result.isActive=!0,2===statusStep.number&&(result.isCurrent=!0)):function(orderAttr){if(orderAttr.status_code)switch(orderAttr.status_text){case ORDER_STATUS.CODE.ECOM_NEW:case ORDER_STATUS.CODE.ECOM_DELAY:case ORDER_STATUS.CODE.ECOM_DELAYED:return!0}if(orderAttr.status_text)switch(orderAttr.status_text){case ORDER_STATUS.TEXT.VN_ECOM_CONFIRM:case ORDER_STATUS.TEXT.VN_ECOM_WAIT_CONFIRM:case ORDER_STATUS.TEXT.VN_ECOM_NEW:return!0}return!1}(orderAttr)&&statusStep.number<=1&&(result.isActive=!0,1===statusStep.number&&(result.isCurrent=!0));return result}(statusStep,orderAttr)}))}(orderContent.order_attr);return react_default.a.createElement("div",{className:OrderContent_default.a.orderContent},react_default.a.createElement("div",{className:OrderContent_default.a.title},react_default.a.createElement("img",{className:OrderContent_default.a.image,src:imageUrl,alt:imgAltText}),react_default.a.createElement("span",{className:OrderContent_default.a.label},orderLabelText)),react_default.a.createElement("div",{className:OrderContent_default.a.statusBox},react_default.a.createElement("p",null,react_default.a.createElement("strong",null,orderStatusText))),react_default.a.createElement("div",{className:OrderContent_default.a.statusSteps},statusSteps.map((function(statusStep){var isHideNextArrow=!1;return 1===statusStep.number&&(isHideNextArrow=!0),react_default.a.createElement(OrderContent_StatusStep,{key:"status-step-"+statusStep.number,stepNumber:statusStep.number,isActive:statusStep.isActive,isCurrent:statusStep.isCurrent,isHideNextArrow:isHideNextArrow},statusStep.label)}))))};Chat_OrderContent_OrderContent.displayName="OrderContent";var Chat_OrderContent=Chat_OrderContent_OrderContent,OrderContent_StatusStep=function(props){var _cx;return react_default.a.createElement("div",{className:classnames_default()(OrderContent_default.a.step,(_cx={},_cx[OrderContent_default.a.active]=props.isActive,_cx[OrderContent_default.a.current]=props.isCurrent,_cx))},react_default.a.createElement("div",{className:OrderContent_default.a.currentArrow}),!props.isHideNextArrow&&react_default.a.createElement("div",{className:OrderContent_default.a.nextArrow}),react_default.a.createElement("div",{className:OrderContent_default.a.numberBox},react_default.a.createElement("span",null,props.stepNumber)),react_default.a.createElement("p",{className:OrderContent_default.a.statuxText},props.children))};OrderContent_StatusStep.displayName="StatusStep",OrderContent_StatusStep.defaultProps={isActive:!1,isCurrent:!1,isHideNextArrow:!1};var startLoading=function(){return{type:"sendOrderData/START_LOADING"}},stopLoading=function(){return{type:"sendOrderData/STOP_LOADING"}},displayLoading=function(){return{type:"sendOrderData/DISPLAY_LOADING"}},OrderModal_OrderModal=__webpack_require__("D2xC"),OrderModal_default=__webpack_require__.n(OrderModal_OrderModal),TEXT_EMPTY_ORDER="Kh\xf4ng c\xf3 \u0111\u01a1n h\xe0ng",OrderModal_ref=react_default.a.createElement(Loading.a,null),OrderModal_ref2=react_default.a.createElement("span",null,"G\u1eedi"),SendOrderButton_OrderModal_OrderModal=function(props){var _cx,_cx2,_cx3,_cx4,_useState=Object(react.useState)([]),ordersContentState=_useState[0],setOrdersContentState=_useState[1];Object(react.useEffect)((function(){props.isDisplay&&function(){var shop_id,ordersData,msgOrders;regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return shop_id=parseInt(Object(get.a)(props.reduxState,"conversation.shop_id",0),10),setOrdersContentState([]),props.sendOrderDataActions.startLoading(),setTimeout((function(){props.sendOrderDataActions.displayLoading()}),500),_context.next=6,regenerator_default.a.awrap(props.fetchOrdersAsync(shop_id));case 6:ordersData=_context.sent,props.sendOrderDataActions.stopLoading(),msgOrders=ordersData.map((function(orderData){return parser_parseOrderDataToMsgOrder(orderData)})),setOrdersContentState(msgOrders);case 10:case"end":return _context.stop()}}))}()}),[props.isDisplay,props.reduxState.conversation]);var isDisplayEmpty=Boolean(!ordersContentState.length&&!props.reduxState.isLoading);return react_default.a.createElement(Chat_Modal,{isOpen:props.isDisplay,closeModal:props.onClose,headerText:function(){var result="",partnerName="c\u1ee7a: "+props.reduxState.conversation.partner_fullname;userHelper.a.isSeller()||(partnerName="v\u1edbi shop: "+props.reduxState.conversation.partner_fullname),result=res_text.e.HEADER_LABEL+partnerName;var shop_id=parseInt(Object(get.a)(props.reduxState,"conversation.shop_id",0),10);return Boolean(shop_id)||(result=res_text.e.ORDER_OF_USER_HEADER_LABEL),result}(),isHideFooter:!0,modalBodyStyles:classnames_default()(OrderModal_default.a.modalBody,(_cx={},_cx[OrderModal_default.a.onWAP]=props.isOnWAP,_cx)),modalDialogStyles:classnames_default()(OrderModal_default.a.modalDialog,(_cx2={},_cx2[OrderModal_default.a.onWAP]=props.isOnWAP,_cx2)),modalContentStyles:classnames_default()(OrderModal_default.a.modalContent,(_cx3={},_cx3[OrderModal_default.a.onWAP]=props.isOnWAP,_cx3)),submitModalForm:function(e){e.preventDefault()}},props.reduxState.isDisplayLoading&&react_default.a.createElement("div",{className:OrderModal_default.a.loading},OrderModal_ref),isDisplayEmpty&&react_default.a.createElement("div",{className:classnames_default()(OrderModal_default.a.emptyLabel,(_cx4={},_cx4[OrderModal_default.a.onWAP]=props.isOnWAP,_cx4))},react_default.a.createElement("p",{className:OrderModal_default.a.label},TEXT_EMPTY_ORDER)),ordersContentState.map((function(orderContent,index){return react_default.a.createElement("div",{key:"order-modal-item-"+index,className:OrderModal_default.a.orderItem},react_default.a.createElement("div",{className:OrderModal_default.a.orderContent},react_default.a.createElement(Chat_OrderContent,{orderContent:orderContent}),react_default.a.createElement("div",{className:OrderModal_default.a.orderHover},react_default.a.createElement("button",{type:"button",className:OrderModal_default.a.sendButton,onClick:function(){!function(orderContent){var messageSender=new MessageSender_MessageSender;messageSender.init(props.reduxState.conversation,props.reduxState.userInfo,props.reduxState.parentContextData,props.reduxState.currentTopic,props.chatActions,props.reduxState.isHaveTopicMsgInDetails),messageSender.sendOrderMessage(orderContent),props.enableAutoScrollToBottom(),props.onClose()}(orderContent)}},OrderModal_ref2))))})))};SendOrderButton_OrderModal_OrderModal.displayName="OrderModal";var SendOrderButton_OrderModal=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{conversation:state.chat.conversation,userInfo:state.auth.userInfo,parentContextData:state.messageDisplayBox.parentContextData,currentTopic:state.chat.currentTopic,isHaveTopicMsgInDetails:state.chat.isHaveTopicMsgInDetails,isLoading:state.sendOrderData.isLoading,isDisplayLoading:state.sendOrderData.isDisplayLoading}}}),(function(dispatch){return{fetchOrdersAsync:Object(bindActionCreators.a)(fetcher.g,dispatch),chatActions:Object(bindActionCreators.a)(chat_namespaceObject,dispatch),sendOrderDataActions:Object(bindActionCreators.a)(sendOrderData_namespaceObject,dispatch),enableAutoScrollToBottom:Object(bindActionCreators.a)(messageDisplayBox_enableAutoScrollToBottom,dispatch)}})))(SendOrderButton_OrderModal_OrderModal),SendOrderButton_ref=react_default.a.createElement("img",{src:orderIcon_default.a,alt:"order-icon"}),Form_SendOrderButton_SendOrderButton=function(props){var _useState=Object(react.useState)(!1),isDisplayOrderModal=_useState[0],setIsDisplayOrderModal=_useState[1];return react_default.a.createElement(Chat_TooltipWrapper_TooltipWrapper,{tooltipText:res_text.g.SEND_ORDER,className:SendOrderButton_default.a.tooltip,isOnWAP:props.isOnWAP},react_default.a.createElement("button",{onClick:function(event){setIsDisplayOrderModal(!isDisplayOrderModal)}},SendOrderButton_ref),react_default.a.createElement(SendOrderButton_OrderModal,{isDisplay:isDisplayOrderModal,onClose:function(){setIsDisplayOrderModal(!1)},isOnWAP:props.isOnWAP}))};Form_SendOrderButton_SendOrderButton.displayName="SendOrderButton";var Form_SendOrderButton=Form_SendOrderButton_SendOrderButton;function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var product_icon_ref=react_default.a.createElement("path",{d:"M714.098 412.956L544.199 158.52c-7.396-10.894-19.797-16.299-32.199-16.299s-24.832 5.404-32.199 16.668L309.902 412.955H124.131c-21.333 0-38.798 17.465-38.798 38.798 0 3.499.398 6.969 1.564 10.468L185.4 821.759c9.284 32.93 39.057 56.661 74.373 56.661h504.358c35.403-.062 65.264-23.719 74.7-56.082l.138-.551 98.56-359.566 1.166-10.468c0-21.333-17.465-38.798-38.798-38.798H714.126zm-318.464 0L512 242.289l116.338 170.667H395.662zM512 723.285c-42.798-.129-77.455-34.797-77.568-77.586v-.011c0-42.667 34.901-77.568 77.568-77.568s77.568 34.901 77.568 77.568c0 42.667-34.901 77.568-77.568 77.568z"}),product_icon=function(props){return react_default.a.createElement("svg",_extends({width:"1em",height:"1em",viewBox:"0 0 1024 1024"},props),product_icon_ref)},SendProductButton_SendProductButton=__webpack_require__("vw4L"),SendProductButton_default=__webpack_require__.n(SendProductButton_SendProductButton),remove=__webpack_require__("Olm7"),sendProductData_startLoading=function(){return{type:"sendProductData/START_LOADING"}},sendProductData_stopLoading=function(){return{type:"sendProductData/STOP_LOADING"}},sendProductData_displayLoading=function(){return{type:"sendProductData/DISPLAY_LOADING"}},clearLoadedProducts=function(){return{type:"sendProductData/CLEAR_PRODUCTS"}},loadProductFirstTime=function(_ref){return{type:"sendProductData/FIRST_LOAD_PRODUCTS",payload:{products:_ref.products,metaData:_ref.metaData}}},updateProducts=function(_ref2){return{type:"sendProductData/UPDATE_PRODUCTS",payload:{products:_ref2.products,metaData:_ref2.metaData}}},ProductModal_ProductModal=__webpack_require__("qwms"),ProductModal_default=__webpack_require__.n(ProductModal_ProductModal),ProductContent_ProductContent=__webpack_require__("2AqJ"),ProductContent_default=__webpack_require__.n(ProductContent_ProductContent),Chat_ProductContent_ProductContent=function(props){var product=props.productMsgData,resizedImageUrl=Object(format_messageContent.d)(product.img_url_mob,"135x135")||"",final_price_label=Object(format_messageContent.e)(product.final_price);product.min_max_price&&(final_price_label=product.min_max_price);var isDisplayPromotion=Boolean(product.is_promotion||product.price!==product.final_price);return react_default.a.createElement("div",{className:ProductContent_default.a.productContent},react_default.a.createElement("div",{className:ProductContent_default.a.thumbnail},react_default.a.createElement("img",{alt:"product-images",className:ProductContent_default.a.image,src:resizedImageUrl})),react_default.a.createElement("div",null,react_default.a.createElement("h3",{className:ProductContent_default.a.heading},react_default.a.createElement("span",{className:ProductContent_default.a.truncateMedium},product.name)),react_default.a.createElement("div",{className:classnames_default()(ProductContent_default.a.pricing)},react_default.a.createElement("p",{className:classnames_default()(ProductContent_default.a.finalPrice)},final_price_label),isDisplayPromotion&&react_default.a.createElement("p",{className:classnames_default()(ProductContent_default.a.originalPrice)},Object(format_messageContent.e)(product.original_price,!0))),react_default.a.createElement("div",{className:classnames_default()(ProductContent_default.a.shopInfo)},react_default.a.createElement(Chat_IconShop,{type:Object(chatHelper.p)(product)}),react_default.a.createElement("span",{className:ProductContent_default.a.shopName},product.shop_name))))};Chat_ProductContent_ProductContent.displayName="ProductContent";var Chat_ProductContent=Chat_ProductContent_ProductContent,text_TEXT_SEARCH_PRODUCT_PLACEHOLDER="T\xecm s\u1ea3n ph\u1ea9m c\u1ee7a Shop...",text_TEXT_EMPTY_PRODUCTS="Kh\xf4ng c\xf3 s\u1ea3n ph\u1ea9m",text_TEXT_SEND_BUTTON="G\u1eedi ";function checked_icon_extends(){return(checked_icon_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var checked_icon_ref=react_default.a.createElement("path",{fill:"#027af9",d:"M896 512c0 212.077-171.923 384-384 384S128 724.077 128 512s171.923-384 384-384 384 171.923 384 384z"}),checked_icon_ref2=react_default.a.createElement("path",{fill:"#fafafa",d:"M512 85.333C276.48 85.333 85.333 276.48 85.333 512S276.48 938.667 512 938.667 938.667 747.52 938.667 512 747.52 85.333 512 85.333zM512 896c-212.181 0-384-171.819-384-384s171.819-384 384-384 384 171.819 384 384-171.819 384-384 384z"}),checked_icon_ref3=react_default.a.createElement("path",{fill:"#fafafa",d:"M677.632 353.621L426.667 604.586 303.616 481.877c-7.704-7.704-18.346-12.468-30.101-12.468-23.511 0-42.57 19.059-42.57 42.57 0 11.755 4.765 22.398 12.468 30.101l153.088 153.088c7.721 7.718 18.386 12.492 30.165 12.492s22.445-4.774 30.165-12.492l280.96-280.96c7.767-7.754 12.571-18.474 12.571-30.315 0-11.778-4.753-22.445-12.445-30.189l.002.002c-7.709-7.762-18.386-12.567-30.186-12.567-11.758 0-22.401 4.77-30.101 12.481z"}),checked_icon=function(props){return react_default.a.createElement("svg",checked_icon_extends({width:"1em",height:"1em",viewBox:"0 0 1024 1024"},props),checked_icon_ref,checked_icon_ref2,checked_icon_ref3)},fetchSearchShopProductsAsyncAction=null,fetchShopProductsAsyncAction=null,sendProductDataAction=null,setSelectedProductsState=null,setCurrentPageState=null,ProductModal_ref=react_default.a.createElement(SearchIcon,null),ProductModal_ref2=react_default.a.createElement(Loading.a,null),SendProductButton_ProductModal_ProductModal=function(props){var _cx,_cx2,_cx3,_cx4,_cx5,_cx8,productContainerRef=Object(react.useRef)(null);fetchSearchShopProductsAsyncAction=props.fetchSearchShopProductsAsync,fetchShopProductsAsyncAction=props.fetchShopProductsAsync,sendProductDataAction=props.sendProductData;var _useState=Object(react.useState)([]),selectedProducts=_useState[0],setSelectedProducts=_useState[1],_useState2=Object(react.useState)(""),searchInputData=_useState2[0],setSearchInputData=_useState2[1],_useState3=Object(react.useState)(1),currentPage=_useState3[0],setCurrentPage=_useState3[1];setSelectedProductsState=setSelectedProducts,setCurrentPageState=setCurrentPage,Object(react.useEffect)((function(){return ProductModal_loadShopProductsData(),function(){props.sendProductData.clearLoadedProducts()}}),[]);var numberProductsPerRow=3;props.isOnWAP&&(numberProductsPerRow=2);var productRows=Object(chunk.a)(props.reduxState.products,numberProductsPerRow),isDisplayEmpty=Boolean(!productRows.length&&!props.reduxState.isLoading),partnerName="cho: "+props.reduxState.conversation.partner_fullname;userHelper.a.isSeller()||(partnerName="c\u1ee7a shop: "+props.reduxState.conversation.partner_fullname);var modalHeader=res_text.f.HEADER_LABEL+partnerName;return react_default.a.createElement(Chat_Modal,{isOpen:!0,closeModal:props.onClose,headerText:modalHeader,isHideFooter:!0,modalBodyStyles:classnames_default()(ProductModal_default.a.modalBody,(_cx={},_cx[ProductModal_default.a.onWAP]=props.isOnWAP,_cx)),modalDialogStyles:classnames_default()(ProductModal_default.a.modalDialog,(_cx2={},_cx2[ProductModal_default.a.onWAP]=props.isOnWAP,_cx2)),modalContentStyles:classnames_default()(ProductModal_default.a.modalContent,(_cx3={},_cx3[ProductModal_default.a.onWAP]=props.isOnWAP,_cx3)),submitModalForm:function(e){e.preventDefault()}},react_default.a.createElement("div",{className:ProductModal_default.a.header},react_default.a.createElement("div",{className:ProductModal_default.a.searchInput},ProductModal_ref,react_default.a.createElement("input",{autoFocus:!0,type:"text",placeholder:text_TEXT_SEARCH_PRODUCT_PLACEHOLDER,onChange:function(e){var searchValue=e.target.value;setSearchInputData(searchValue),searchProduct(searchValue)},value:searchInputData}))),react_default.a.createElement("div",{ref:productContainerRef,className:classnames_default()(ProductModal_default.a.productContainer,(_cx4={},_cx4[ProductModal_default.a.onWAP]=props.isOnWAP,_cx4)),onScroll:function(event){var metaData=props.reduxState.metaData;if(metaData&&Boolean(event.target.scrollTop+event.target.clientHeight>=event.target.scrollHeight)&&!props.reduxState.isLoading&&(event.target.scrollTop=event.target.scrollTop-1,currentPage<metaData.total_page)){var nextPage=currentPage+1;setCurrentPage(nextPage),ProductModal_loadMoreProductsData(nextPage,searchInputData)}}},props.reduxState.isDisplayLoading&&react_default.a.createElement("div",{className:ProductModal_default.a.loading},ProductModal_ref2),isDisplayEmpty&&react_default.a.createElement("div",{className:classnames_default()(ProductModal_default.a.emptyLabel,(_cx5={},_cx5[ProductModal_default.a.onWAP]=props.isOnWAP,_cx5))},react_default.a.createElement("p",{className:ProductModal_default.a.label},text_TEXT_EMPTY_PRODUCTS)),productRows.map((function(productRow,indexRow){var _cx6;return react_default.a.createElement("div",{key:"product-modal-item-row-"+indexRow,className:classnames_default()(ProductModal_default.a.productRow,(_cx6={},_cx6[ProductModal_default.a.onWAP]=props.isOnWAP,_cx6))},productRow.map((function(product,index){var _cx7,isChecked=Boolean(Object(find.a)(selectedProducts,(function(selectedProduct){return Object(get.a)(selectedProduct,"product_id","")===product.product_id})));return react_default.a.createElement("div",{key:"product-modal-item-"+index,className:classnames_default()(ProductModal_default.a.productItem,(_cx7={},_cx7[ProductModal_default.a.checked]=isChecked,_cx7[ProductModal_default.a.onWAP]=props.isOnWAP,_cx7)),onClick:function(){return function(product){Object(remove.a)(selectedProducts,(function(selectedProduct){return product.product_id===selectedProduct.product_id})).length?setSelectedProducts([].concat(selectedProducts)):selectedProducts.length>=6||setSelectedProducts([].concat(selectedProducts,[product]))}(product)}},react_default.a.createElement(Chat_ProductContent,{key:"product-modal-item-"+index,productMsgData:product}),react_default.a.createElement("div",{className:ProductModal_default.a.productHover},react_default.a.createElement(checked_icon,{className:ProductModal_default.a.checkedIcon})))})))}))),!!selectedProducts.length&&react_default.a.createElement("div",{className:ProductModal_default.a.selectionMenu},react_default.a.createElement("button",{type:"button",className:classnames_default()(ProductModal_default.a.selectionButton,(_cx8={},_cx8[ProductModal_default.a.onWAP]=props.isOnWAP,_cx8)),onClick:function(e){var messageSender=new MessageSender_MessageSender;messageSender.init(props.reduxState.conversation,props.reduxState.userInfo,props.reduxState.parentContextData,props.reduxState.currentTopic,props.chatActions,props.reduxState.isHaveTopicMsgInDetails),messageSender.sendProducts(selectedProducts),props.enableAutoScrollToBottom(),props.onClose()}},react_default.a.createElement("span",null,text_TEXT_SEND_BUTTON,"(",selectedProducts.length,"/",6,")"))))};SendProductButton_ProductModal_ProductModal.displayName="ProductModal";var SendProductButton_ProductModal=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{conversation:state.chat.conversation,userInfo:state.auth.userInfo,parentContextData:state.messageDisplayBox.parentContextData,currentTopic:state.chat.currentTopic,isHaveTopicMsgInDetails:state.chat.isHaveTopicMsgInDetails,products:state.sendProductData.products,metaData:state.sendProductData.metaData,isLoading:state.sendProductData.isLoading,isDisplayLoading:state.sendProductData.isDisplayLoading,searchProducts:state.sendProductData.searchProducts,searchMetaData:state.sendProductData.searchMetaData}}}),(function(dispatch){return{fetchSearchShopProductsAsync:Object(bindActionCreators.a)(fetcher.h,dispatch),fetchShopProductsAsync:Object(bindActionCreators.a)(fetcher.i,dispatch),sendProductData:Object(bindActionCreators.a)(sendProductData_namespaceObject,dispatch),chatActions:Object(bindActionCreators.a)(chat_namespaceObject,dispatch),enableAutoScrollToBottom:Object(bindActionCreators.a)(messageDisplayBox_enableAutoScrollToBottom,dispatch)}})))(SendProductButton_ProductModal_ProductModal),searchProduct=Object(debounce.a)((function(searchValue){if(!searchValue)return ProductModal_loadShopProductsData(),void setCurrentPageState(1);ProductModal_searchProductsData(1,searchValue),setCurrentPageState(1)}),500),ProductModal_loadMoreProductsData=function(page,searchValue){return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(void 0===page&&(page=1),void 0===searchValue&&(searchValue=""),searchValue){_context.next=5;break}return ProductModal_loadShopProductsData(page),_context.abrupt("return");case 5:ProductModal_searchProductsData(page,searchValue);case 6:case"end":return _context.stop()}}))},ProductModal_searchProductsData=function(page,searchValue){var productResponse,productsData,metaData,products;return regenerator_default.a.async((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return void 0===page&&(page=1),void 0===searchValue&&(searchValue=""),sendProductDataAction.startLoading(),1===page&&(sendProductDataAction.clearLoadedProducts(),setTimeout((function(){sendProductDataAction.displayLoading()}),500)),_context2.next=6,regenerator_default.a.awrap(fetchSearchShopProductsAsyncAction(page,searchValue));case 6:if(productResponse=_context2.sent,sendProductDataAction.stopLoading(),productsData=Object(get.a)(productResponse,"data",null),metaData=Object(get.a)(productResponse,"meta_data",null),productsData&&metaData){_context2.next=12;break}return _context2.abrupt("return");case 12:products=productsData.map((function(productData){return parser_parseProductDataToMsgProduct(productData)})),1===page?(sendProductDataAction.loadProductFirstTime({products:products,metaData:metaData}),setSelectedProductsState([])):sendProductDataAction.updateProducts({products:products,metaData:metaData});case 14:case"end":return _context2.stop()}}))},ProductModal_loadShopProductsData=function(page){var productResponse,productsData,metaData,products;return regenerator_default.a.async((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return void 0===page&&(page=1),sendProductDataAction.startLoading(),1===page&&(sendProductDataAction.clearLoadedProducts(),setTimeout((function(){sendProductDataAction.displayLoading()}),500)),_context3.next=5,regenerator_default.a.awrap(fetchShopProductsAsyncAction(page));case 5:if(productResponse=_context3.sent,sendProductDataAction.stopLoading(),productsData=Object(get.a)(productResponse,"data",null),metaData=Object(get.a)(productResponse,"meta_data",null),productsData&&metaData){_context3.next=11;break}return _context3.abrupt("return");case 11:products=productsData.map((function(productData){return parser_parseProductDataToMsgProduct(productData)})),1===page?(sendProductDataAction.loadProductFirstTime({products:products,metaData:metaData}),setSelectedProductsState([])):sendProductDataAction.updateProducts({products:products,metaData:metaData});case 13:case"end":return _context3.stop()}}))},Form_SendProductButton_SendProductButton=function(props){var _useState=Object(react.useState)(!1),isDisplayProductModal=_useState[0],setIsDisplayProductModal=_useState[1];return react_default.a.createElement(Chat_TooltipWrapper_TooltipWrapper,{tooltipText:res_text.g.SEND_PRODUCT,className:SendProductButton_default.a.tooltip,isOnWAP:props.isOnWAP},react_default.a.createElement("button",{onClick:function(event){setIsDisplayProductModal(!isDisplayProductModal)}},react_default.a.createElement(product_icon,{className:SendProductButton_default.a.productIcon})),isDisplayProductModal&&react_default.a.createElement(SendProductButton_ProductModal,{onClose:function(){setIsDisplayProductModal(!1)},isOnWAP:props.isOnWAP}))};Form_SendProductButton_SendProductButton.displayName="SendProductButton";var Form_SendProductButton=Form_SendProductButton_SendProductButton,PreviewContent_PreviewContent=__webpack_require__("B9LU"),PreviewContent_default=__webpack_require__.n(PreviewContent_PreviewContent),TopicOrderContent_TopicOrderContent=__webpack_require__("3i+/"),TopicOrderContent_default=__webpack_require__.n(TopicOrderContent_TopicOrderContent),Detail_TopicOrderContent_TopicOrderContent=function(_Component){function TopicOrderContent(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_Component.call.apply(_Component,[this].concat(args))||this,defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(styles,className){var isOnWAP=Object(get.a)(_this.props,"isOnWAP",!1);return Object(helpers_styles.a)(styles,className,isOnWAP)})),_this}return inheritsLoose_default()(TopicOrderContent,_Component),TopicOrderContent.prototype.render=function(){var order=this.props.order;return react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(TopicOrderContent_default.a,TopicOrderContent_default.a.topicOrderContent))},react_default.a.createElement("p",null,res_text.b.CHAT_MSG.TOPIC.ORDER.LABEL," ",order.id),react_default.a.createElement("div",{className:TopicOrderContent_default.a.topicOrderContentBody},react_default.a.createElement("span",null,order.name),react_default.a.createElement("div",{className:classnames_default()(TopicOrderContent_default.a.orderPricing)},react_default.a.createElement("span",{className:classnames_default()(TopicOrderContent_default.a.finalPrice)},Object(format_messageContent.e)(order.final_price)),!!order.price&&order.price!==order.final_price&&react_default.a.createElement("span",{className:classnames_default()(TopicOrderContent_default.a.originalPrice)},Object(format_messageContent.e)(order.price,!0)))))},TopicOrderContent}(react.Component);Detail_TopicOrderContent_TopicOrderContent.displayName="TopicOrderContent";var Detail_TopicOrderContent=Detail_TopicOrderContent_TopicOrderContent,TopicMessage_TopicMessage=__webpack_require__("qsEg"),TopicMessage_default=__webpack_require__.n(TopicMessage_TopicMessage),TopicMessage_ref=react_default.a.createElement("div",null),Chat_TopicMessage_TopicMessage=function(_Component){function TopicMessage(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_Component.call.apply(_Component,[this].concat(args))||this,defineProperty_default()(assertThisInitialized_default()(_this),"onClickProductTopic",(function(e){e.preventDefault();var product=Object(get.a)(_this.props,"topic.items.0",null),productUrl=Object(get.a)(product,"url",""),productId=Object(get.a)(product,"id",""),url=Object(chatHelper.n)(productUrl,productId);url&&_this.notifyClickTopic({type:res_const.t.TOPIC_TYPE.PRODUCT,data:{id:Object(get.a)(product,"id",""),name:Object(get.a)(product,"name",""),url:url}})})),defineProperty_default()(assertThisInitialized_default()(_this),"onClickOrderTopic",(function(e){e.preventDefault();var order=Object(get.a)(_this.props,"topic.items.0",null),orderUrl=Object(get.a)(order,"url",""),orderId=Object(get.a)(order,"id",""),url=Object(chatHelper.j)(orderUrl,orderId);url&&_this.notifyClickTopic({type:res_const.t.TOPIC_TYPE.ORDER,data:{id:orderId,url:url}})})),defineProperty_default()(assertThisInitialized_default()(_this),"onClickSenLiveTopic",(function(event){event.preventDefault();var senLiveUrl=Object(get.a)(_this.props.topic,"items.0.url","");senLiveUrl&&window.open(senLiveUrl,"_blank")})),defineProperty_default()(assertThisInitialized_default()(_this),"getParentResponsiveStyles",(function(styles,className){var isOnWAP=Object(get.a)(_this.props,"isOnWAP",!1);return Object(helpers_styles.a)(styles,className,isOnWAP)})),defineProperty_default()(assertThisInitialized_default()(_this),"notifyClickTopic",(function(notifyData){Object(notifyNewMessageToParent.a)(res_const.t.CLICK_ON_TOPIC,notifyData)})),_this}inheritsLoose_default()(TopicMessage,_Component);var _proto=TopicMessage.prototype;return _proto.renderProductPricing=function(styles,product){var productPrice=parseInt(product.price,10),productFinalPrice=parseInt(product.final_price,10);productFinalPrice>productPrice&&(productFinalPrice=productPrice);var finalPriceLabel=product.final_price_label;if(Object(chatHelper.s)(finalPriceLabel)||(finalPriceLabel=Object(format_messageContent.e)(productFinalPrice)),!Object(chatHelper.s)(finalPriceLabel))return TopicMessage_ref;var priceLabel=product.price_label;return Object(chatHelper.s)(priceLabel)||productPrice&&productPrice!==productFinalPrice&&(priceLabel=Object(format_messageContent.e)(productPrice,!0)),react_default.a.createElement("div",{className:classnames_default()(styles.topicPricing)},react_default.a.createElement("span",{className:classnames_default()(styles.finalPrice)},finalPriceLabel),Object(chatHelper.s)(priceLabel)&&react_default.a.createElement("span",{className:classnames_default()(styles.originalPrice)},priceLabel))},_proto.render=function(){var topic=this.props.topic,parentStyles=Object(get.a)(this.props,"styles",{}),firstTopicItem=Object(get.a)(topic,"items.0",null);if(!firstTopicItem)return"";var type=Object(get.a)(topic,"type",""),imageUrl=Object(format_messageContent.d)(firstTopicItem.image_url,"80x80")||"",headerText="";switch(imageUrl&&firstTopicItem.name&&(headerText=firstTopicItem.name),type){case res_const.E.PRODUCT:var product=firstTopicItem;return react_default.a.createElement("div",{className:classnames_default()(this.getParentResponsiveStyles(TopicMessage_default.a,TopicMessage_default.a.topic),TopicMessage_default.a.clickable,parentStyles.wrapperTopic),onClick:this.onClickProductTopic},react_default.a.createElement("div",{className:classnames_default()(TopicMessage_default.a.topicImage)},react_default.a.createElement("img",{src:imageUrl,alt:headerText})),react_default.a.createElement("div",{className:classnames_default()(this.getParentResponsiveStyles(TopicMessage_default.a,TopicMessage_default.a.topicContent))},react_default.a.createElement("p",null,headerText),!!product.selected_options_label&&react_default.a.createElement("span",{className:TopicMessage_default.a.optionsLabel},product.selected_options_label),react_default.a.createElement("div",{className:classnames_default()(TopicMessage_default.a.topicContentBody)},this.renderProductPricing(TopicMessage_default.a,product))));case res_const.E.ORDER:return react_default.a.createElement("div",{className:classnames_default()(this.getParentResponsiveStyles(TopicMessage_default.a,TopicMessage_default.a.topic),TopicMessage_default.a.clickable),onClick:this.onClickOrderTopic},react_default.a.createElement("div",{className:classnames_default()(TopicMessage_default.a.topicImage)},react_default.a.createElement("img",{src:imageUrl,alt:headerText})),react_default.a.createElement(Detail_TopicOrderContent,{order:firstTopicItem,isOnWAP:this.props.isOnWAP}));case res_const.E.SENLIVE:return react_default.a.createElement("div",{className:classnames_default()(this.getParentResponsiveStyles(TopicMessage_default.a,TopicMessage_default.a.topic),TopicMessage_default.a.clickable),onClick:this.onClickSenLiveTopic},react_default.a.createElement("div",{className:classnames_default()(TopicMessage_default.a.topicImage)},react_default.a.createElement("img",{src:imageUrl,alt:headerText})),react_default.a.createElement("div",{className:classnames_default()(this.getParentResponsiveStyles(TopicMessage_default.a,TopicMessage_default.a.topicContent))},react_default.a.createElement("p",null,headerText)));default:return""}},TopicMessage}(react.Component);Chat_TopicMessage_TopicMessage.displayName="TopicMessage",defineProperty_default()(Chat_TopicMessage_TopicMessage,"defaultProps",{isOnWAP:!1,styles:{}});var Chat_TopicMessage=Chat_TopicMessage_TopicMessage,Form_PreviewContent_PreviewContent=function(props){return Object(msgDetail.g)(props.currentTopic,props.parentContextData,props.isHaveTopicMsgInDetails)?null:react_default.a.createElement("div",{className:classnames_default()((className=PreviewContent_default.a.previewContent,Object(helpers_styles.a)(PreviewContent_default.a,className,props.isOnWAP)))},react_default.a.createElement("div",{className:PreviewContent_default.a.topicContainer},react_default.a.createElement(Chat_TopicMessage,{topic:props.parentContextData.topic,isOnWAP:props.isOnWAP,userInfo:props.userInfo})));var className};Form_PreviewContent_PreviewContent.displayName="PreviewContent";var Form_PreviewContent=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{isHaveTopicMsgInDetails:state.chat.isHaveTopicMsgInDetails}}),null))(Form_PreviewContent_PreviewContent),DEFAULT_INPUT_BOX_HEIGHT="20px",Form_ref=react_default.a.createElement(Form_ToastMsg,null),Form_ref2=react_default.a.createElement(CreateVoucherIcon,null),Form_ChatForm=function(_Component){function ChatForm(props,context){var _this;return _this=_Component.call(this,props,context)||this,defineProperty_default()(assertThisInitialized_default()(_this),"onClickEmoji",(function(emojiData){_this.setState((function(prevState){return{text:prevState.text+emojiData.value,isTyping:!1}})),_this.inputRef.focus()})),defineProperty_default()(assertThisInitialized_default()(_this),"toggleEmojiPanel",(function(){_this.setState((function(prevState){return{isDisplayEmojiPanel:!prevState.isDisplayEmojiPanel}}))})),defineProperty_default()(assertThisInitialized_default()(_this),"closeEmojiPanel",(function(){_this.setState({isDisplayEmojiPanel:!1})})),defineProperty_default()(assertThisInitialized_default()(_this),"sendMessage",(function(message){_this.setState({isTyping:!1});var messageTrimmed=message.trim();if(messageTrimmed)if(messageTrimmed.length>1e3)showToast(res_text.b.MESSAGE_ERROR.LIMIT_TEXT);else{var conversation=Object(get.a)(_this.props,"conversation",null),userInfo=Object(get.a)(_this.props,"userInfo",{}),parentContextData=Object(get.a)(_this.props,"parentContextData",null),currentTopic=Object(get.a)(_this.props,"currentTopic",null),messageSender=new MessageSender_MessageSender;messageSender.init(conversation,userInfo,parentContextData,currentTopic,_this.props.chatActions,_this.props.isHaveTopicMsgInDetails),conversation.message_type===res_const.s.LIVESTREAM?_this.props.sendGroupTextSenLive(messageTrimmed):messageSender.sendText(messageTrimmed),_this.props.app.networkStatus===res_const.k.APP.NETWORK_STATUS.ONLINE&&_this.props.app.xmppStatus===res_const.k.APP.XMPP_STATUS.CONNECTED&&_this.props.clearParentContextData(),_this.setState({text:""}),_this.props.enableAutoScrollToBottom()}else showToast(res_text.b.MESSAGE_ERROR.REQUIRED_TEXT)})),defineProperty_default()(assertThisInitialized_default()(_this),"autoResizeInputBox",(function(){_this.inputRef.scrollTop>0?_this.resizeInputBoxByScrollHeight():_this.resetInputBoxHeight()})),defineProperty_default()(assertThisInitialized_default()(_this),"resizeInputBoxByScrollHeight",(function(){_this.setState({inputBoxStyle:{height:_this.inputRef.scrollHeight+"px"}})})),defineProperty_default()(assertThisInitialized_default()(_this),"resetInputBoxHeight",(function(){_this.setState({inputBoxStyle:{height:DEFAULT_INPUT_BOX_HEIGHT}})})),defineProperty_default()(assertThisInitialized_default()(_this),"handleSendBtn",(function(event){event.preventDefault(),_this.inputRef.focus(),_this.sendMessage(_this.state.text)})),defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(className){var isOnWAP=Object(get.a)(_this.props,"app.isOnWAP",!1);return Object(helpers_styles.a)(style_default.a,className,isOnWAP)})),defineProperty_default()(assertThisInitialized_default()(_this),"isDisplayEmoji",(function(){var isOnWAP=Object(get.a)(_this.props,"app.isOnWAP",!1);return Boolean(!isOnWAP&&!Object(browserHelper.b)()&&!Object(browserHelper.c)())})),_this.state={text:"",isTyping:!1,isDisplayEmojiPanel:!1,inputBoxStyle:{height:DEFAULT_INPUT_BOX_HEIGHT}},_this.handleKeyPress=_this.handleKeyPress.bind(assertThisInitialized_default()(_this)),_this.handleInputBoxChange=_this.handleInputBoxChange.bind(assertThisInitialized_default()(_this)),_this}inheritsLoose_default()(ChatForm,_Component);var _proto=ChatForm.prototype;return _proto.componentDidMount=function(){var _this2=this;this.inputRef.addEventListener("focus",(function(){Object(get.a)(_this2.props,"app.isOnWAP",!1)&&setTimeout((function(){_this2.props.enableAutoScrollToBottom()}),500)})),this.inputRef.addEventListener("paste",(function(pasteEvent){pasteEvent.preventDefault();for(var clipboardDataItems=pasteEvent.clipboardData.items,i=0;i<clipboardDataItems.length;i++)if(Object(includes.a)(clipboardDataItems[i].type,"image")){var imageFile=clipboardDataItems[i].getAsFile();return Object(browserHelper.d)(imageFile)||(imageFile=Object(browserHelper.a)(imageFile,"image_from_clipboard.png")),void _this2.sendImage(imageFile)}var coppiedTextValue=pasteEvent.clipboardData.getData("text");if(coppiedTextValue){var newTextValue=_this2.state.text+coppiedTextValue;_this2.setState({text:newTextValue,isTyping:!1}),_this2.resizeInputBoxByScrollHeight()}}))},_proto.componentWillUnmount=function(){this.inputRef.removeEventListener("focus",null),this.inputRef.removeEventListener("paste",null)},_proto.handleInputBoxChange=function(e){this.autoResizeInputBox(),this.setState({text:e.target.value,isTyping:!0}),e.target.value.trim()||this.setState({isTyping:!1})},_proto.sendImage=function(imageFile){var messageSender,conversation,userInfo,parentContextData,currentTopic;return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return messageSender=new MessageSender_MessageSender,conversation=Object(get.a)(this.props,"conversation",null),userInfo=Object(get.a)(this.props,"userInfo",{}),parentContextData=Object(get.a)(this.props,"parentContextData",null),currentTopic=Object(get.a)(this.props,"currentTopic",null),messageSender.init(conversation,userInfo,parentContextData,currentTopic,this.props.chatActions,this.props.isHaveTopicMsgInDetails),_context.next=8,regenerator_default.a.awrap(messageSender.sendImage([imageFile]));case 8:this.props.markNotScrolledForImages(),this.props.enableAutoScrollToBottom();case 10:case"end":return _context.stop()}}),null,this)},_proto.handleKeyPress=function(event){if(13!==(event.which||event.keyCode))return!0;event.preventDefault(),this.setState({isDisplayEmojiPanel:!1}),this.resetInputBoxHeight(),this.sendMessage(event.target.value)},_proto.render=function(){var _cx,_this3=this,isSeller=userHelper.a.getRole()===res_const.F.SELLER,isOnWAP=Object(get.a)(this.props,"app.isOnWAP",!1),quickReplyTopic=Object(get.a)(this.props,"parentContextData.topic",null)||this.props.currentTopic,isSenLiveConversation=Boolean(this.props.conversation.message_type===res_const.s.LIVESTREAM),isNotAIConversation=Boolean(this.props.conversation.chat_id!==Object(get.a)(ChiDaiHelper.b.getDefaultChiDaiInfo(),"chat_id","")),isEnableSendOrder=Boolean((!userHelper.a.isSeller()||isNotAIConversation)&&!isSenLiveConversation),isEnableSendProduct=Boolean(isNotAIConversation&&!isSenLiveConversation),isEnableSendImage=Boolean(!isSenLiveConversation),isEnableSendVoucher=Boolean(isSeller&&this.props.currentTopic&&this.props.currentTopic.type===res_const.E.PRODUCT&&!isSenLiveConversation),isEnableQuickReply=Boolean(isNotAIConversation&&!isSenLiveConversation);return react_default.a.createElement("div",{className:classnames_default()(this.props.className,style_default.a.chatForm)},react_default.a.createElement(Form_PreviewContent,{currentTopic:this.props.currentTopic,parentContextData:this.props.parentContextData,isOnWAP:isOnWAP,userInfo:this.props.userInfo}),Form_ref,react_default.a.createElement(Form_QuickReplyText_QuickReplyText,{sendMessage:this.sendMessage,isOnWAP:this.props.app.isOnWAP,userInfo:this.props.userInfo,topic:quickReplyTopic,conversation:this.props.conversation,isDisplayQuickReplyText:isEnableQuickReply}),react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(style_default.a.form))},react_default.a.createElement("div",{className:classnames_default()(style_default.a.addons)},isEnableSendOrder&&react_default.a.createElement(Form_SendOrderButton,{isOnWAP:isOnWAP}),isEnableSendProduct&&react_default.a.createElement(Form_SendProductButton,{isOnWAP:isOnWAP}),isEnableSendImage&&react_default.a.createElement(Chat_TooltipWrapper_TooltipWrapper,{tooltipText:res_text.b.TOOLTIP.UPDATE_PICTURE_BTN,className:style_default.a.button,isOnWAP:isOnWAP},react_default.a.createElement("button",{className:classnames_default()(style_default.a.iconBtn),onClick:this.props.open},react_default.a.createElement(UploadImage,{className:style_default.a.iconUploadImage,isOnWAP:this.props.app.isOnWAP}))),isEnableSendVoucher&&react_default.a.createElement(Chat_TooltipWrapper_TooltipWrapper,{tooltipText:res_text.b.TOOLTIP.CREATE_VOUCHER_BTN,className:style_default.a.button,isOnWAP:isOnWAP},react_default.a.createElement("button",{className:classnames_default()(style_default.a.createVoucherBtn),onClick:this.props.openVoucherModal},Form_ref2))),react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(style_default.a.messagebox),(_cx={},_cx[style_default.a.displayEmojiPanel]=this.state.isDisplayEmojiPanel,_cx))},react_default.a.createElement("textarea",{style:this.state.inputBoxStyle,className:classnames_default()(style_default.a.inputBox),ref:function(inputRef){_this3.inputRef=inputRef,_this3.props.bindInputChatMessageRef(inputRef)},type:"text",value:this.state.text,onKeyPress:this.handleKeyPress,onChange:this.handleInputBoxChange,placeholder:res_text.b.CHAT_FORM.CHAT_INPUT_PLACEHOLDER}),this.isDisplayEmoji()&&react_default.a.createElement(Form_EmojiAction,{onClickBtn:this.toggleEmojiPanel,onClickEmoji:this.onClickEmoji,isDisplayEmojiPanel:this.state.isDisplayEmojiPanel,onClickOutsidePanel:this.closeEmojiPanel}),react_default.a.createElement(SendIcon,{className:classnames_default()(this.getResponsiveStyles(style_default.a.sendBtn)),onClick:this.handleSendBtn,isTyping:this.state.isTyping}))))},ChatForm}(react.Component);Form_ChatForm.displayName="ChatForm";var Form=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{conversation:state.chat.conversation,currentTopic:state.chat.currentTopic,userInfo:state.auth.userInfo,app:state.app,isHaveTopicMsgInDetails:state.chat.isHaveTopicMsgInDetails}}),(function(dispatch){return{chatActions:Object(bindActionCreators.a)(chat_namespaceObject,dispatch),sendGroupTextSenLive:Object(bindActionCreators.a)(sendGroupText,dispatch)}})))(Form_ChatForm),Detail_style=__webpack_require__("CykY"),Detail_style_default=__webpack_require__.n(Detail_style),ResponseRateStatus_ResponseRateStatus=__webpack_require__("ArOH"),ResponseRateStatus_default=__webpack_require__.n(ResponseRateStatus_ResponseRateStatus),Detail_ResponseRateStatus_ResponseRateStatus=function(_Component){function ResponseRateStatus(){return _Component.apply(this,arguments)||this}inheritsLoose_default()(ResponseRateStatus,_Component);var _proto=ResponseRateStatus.prototype;return _proto.renderDivider=function(){var isRenderDivider=Boolean(!!this.props.chatDetailsLength),onlineStatusText=Object(chatHelper.i)(this.props.conversation,this.props.listStatus);return isRenderDivider&&onlineStatusText?react_default.a.createElement("div",{className:ResponseRateStatus_default.a.dividerContainer},react_default.a.createElement("hr",{className:ResponseRateStatus_default.a.dividerLeft}),react_default.a.createElement("span",{className:ResponseRateStatus_default.a.lastOnlineText},onlineStatusText),react_default.a.createElement("hr",{className:ResponseRateStatus_default.a.dividerRight})):null},_proto.render=function(){var _cx,partnerId=Object(get.a)(this.props,"conversation.partner_id","");if(!partnerId)return null;var partnerStatus=this.props.listStatus[partnerId],partnerStatusType=Object(get.a)(partnerStatus,"status","unavailable"),isNewChat=Object(get.a)(this.props,"parentContextData.isNew",!1);if(!Boolean(!this.props.isOnWAP&&userHelper.a.getRole()===res_const.F.BUYER&&("unavailable"===partnerStatusType||isNewChat)))return null;var statusText=Object(chatHelper.o)(this.props.conversation,this.props.listStatus);if(!statusText)return null;var isRenderDivider=Boolean(!!this.props.chatDetailsLength);return react_default.a.createElement("div",{className:classnames_default()(ResponseRateStatus_default.a.container,(_cx={},_cx[ResponseRateStatus_default.a.marginTop]=isRenderDivider,_cx))},this.renderDivider(),react_default.a.createElement("span",{className:ResponseRateStatus_default.a.statusText},statusText))},ResponseRateStatus}(react.Component);Detail_ResponseRateStatus_ResponseRateStatus.displayName="ResponseRateStatus";var ErrorImage_ref=react_default.a.createElement("defs",null,react_default.a.createElement("path",{id:"error-image-icon-a",d:"M0 0h24v33H0z"}),react_default.a.createElement("linearGradient",{id:"error-image-icon-b",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},react_default.a.createElement("stop",{offset:"0%",stopColor:"#EEE"}),react_default.a.createElement("stop",{offset:"100%",stopColor:"#D8D8D8"}))),ErrorImage_ref2=react_default.a.createElement("g",{fill:"none",fillRule:"evenodd"},react_default.a.createElement("g",{transform:"translate(12 7.5)"},react_default.a.createElement("mask",{id:"error-image-icon-c",fill:"#fff"},react_default.a.createElement("use",{xlinkHref:"#error-image-icon-a"})),react_default.a.createElement("path",{fill:"url(#error-image-icon-b)",d:"M21.589 29.414c-.002.705-.597 1.276-1.33 1.277l-8.198.004-8.333.003a1.36 1.36 0 0 1-.766-.234 1.259 1.259 0 0 1-.563-1.04l.01-19.059v-.479l5.512-.002c1.26 0 2.282-.98 2.284-2.192l.001-2.373.002-3.013 10.064-.004c.733 0 1.327.57 1.328 1.275l-.011 25.837zM20.273 0L9.789.004c-.371 0-.727.142-.99.394L4.808 4.229.42 8.44c-.263.252-.41.594-.41.95v1.046L0 29.425c0 .541.13 1.077.378 1.564.624 1.23 1.924 2.012 3.348 2.01h4.102l12.43-.006c2.058-.001 3.728-1.604 3.73-3.58L24 3.576C24 1.6 22.332 0 20.273 0z",mask:"url(#error-image-icon-c)"})),react_default.a.createElement("path",{fill:"url(#error-image-icon-b)",d:"M12.586 18.261a.322.322 0 0 1-.322.307h-.519a.322.322 0 0 1-.322-.306l-.196-3.856a.322.322 0 0 1 .322-.339h.902c.184 0 .331.154.322.338l-.187 3.856zm-.587 2.09a.58.58 0 1 1 0-1.16.58.58 0 0 1 0 1.16zm6.829 1.466l-6.14-10.634a.795.795 0 0 0-1.377 0l-6.14 10.634a.795.795 0 0 0 .688 1.193h12.28a.795.795 0 0 0 .689-1.193z",transform:"translate(12 7.5)"}));function ErrorImage(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},props),ErrorImage_ref,ErrorImage_ref2)}ErrorImage.displayName="ErrorImage";var ErrorWarning_ref=react_default.a.createElement("g",{fill:"none",fillRule:"evenodd"},react_default.a.createElement("path",{d:"M0 0h24v24H0z"}),react_default.a.createElement("path",{fill:"#E5101D",fillRule:"nonzero",d:"M13 7h-2v6h2V7zm-1 15c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zm0-18c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8zm1 11h-2v2h2v-2z"}));function ErrorWarning(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},props),ErrorWarning_ref)}ErrorWarning.displayName="ErrorWarning";var ImageUploading_ref=react_default.a.createElement("defs",null,react_default.a.createElement("path",{id:"img-uploading-a",d:"M0 0h24v33H0z"}),react_default.a.createElement("linearGradient",{id:"img-uploading-b",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},react_default.a.createElement("stop",{offset:"0%",stopColor:"#EEE"}),react_default.a.createElement("stop",{offset:"100%",stopColor:"#D8D8D8"}))),ImageUploading_ref2=react_default.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(12 7.5)"},react_default.a.createElement("mask",{id:"img-uploading-c",fill:"#fff"},react_default.a.createElement("use",{xlinkHref:"#img-uploading-a"})),react_default.a.createElement("path",{fill:"url(#img-uploading-b)",d:"M21.589 29.414c-.002.705-.597 1.276-1.33 1.277l-8.198.004-8.333.003a1.36 1.36 0 0 1-.766-.234 1.259 1.259 0 0 1-.563-1.04l.01-19.059v-.479l5.512-.002c1.26 0 2.282-.98 2.284-2.192l.001-2.373.002-3.013 10.064-.004c.733 0 1.327.57 1.328 1.275l-.011 25.837zM20.273 0L9.789.004c-.371 0-.727.142-.99.394L4.808 4.229.42 8.44c-.263.252-.41.594-.41.95v1.046L0 29.425c0 .541.13 1.077.378 1.564.624 1.23 1.924 2.012 3.348 2.01h4.102l12.43-.006c2.058-.001 3.728-1.604 3.73-3.58L24 3.576C24 1.6 22.332 0 20.273 0z",mask:"url(#img-uploading-c)"}));function ImageUploading(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},props),ImageUploading_ref,ImageUploading_ref2)}ImageUploading.displayName="ImageUploading";var ChatMessage_ChatMessage=__webpack_require__("H/jF"),ChatMessage_default=__webpack_require__.n(ChatMessage_ChatMessage),isEqualWith=__webpack_require__("OeZu"),ProductMessage_ProductMessage=__webpack_require__("5dNY"),ProductMessage_default=__webpack_require__.n(ProductMessage_ProductMessage);function ProductMessage_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var ChatMessage_ProductMessage_ProductMessage=function(props){var _cx,_cx2,_cx3,isHideSwiperButton=!(props.products.length>1)||props.isOnWAP,swiperContainerRef=Object(react.useRef)(null);Object(react.useEffect)((function(){return initSlider(),function(){swiperContainerRef.current.swiper.destroy(!0,!0)}}),[]);var className,initSlider=function(){var sliderSetting={slidesPerView:"auto",grabCursor:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:ProductMessage_default.a.disabledSwiper}};new Swiper.a(swiperContainerRef.current,function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ProductMessage_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ProductMessage_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},sliderSetting))};return react_default.a.createElement("div",{className:classnames_default()((_cx={},_cx[ProductMessage_default.a.isOwner]=props.isOwner,_cx),(className=ProductMessage_default.a.productsMessage,Object(helpers_styles.a)(ProductMessage_default.a,className,props.isOnWAP)),"swiper-container"),ref:swiperContainerRef},react_default.a.createElement("div",{className:"swiper-wrapper"},props.products.map((function(product){var keyItem="product-card-"+product.product_id;return react_default.a.createElement("div",{className:classnames_default()("swiper-slide",ProductMessage_default.a.productCard),key:keyItem,onClick:function(){return function(product){var productUrl=Object(get.a)(product,"product_url",""),productId=Object(get.a)(product,"product_id",""),redirectProductUrl=Object(chatHelper.n)(productUrl,productId);if(redirectProductUrl){var notifyData={type:res_const.t.TOPIC_TYPE.PRODUCT,data:{id:Object(get.a)(product,"product_id",""),name:Object(get.a)(product,"name",""),url:redirectProductUrl}};Object(notifyNewMessageToParent.a)(res_const.t.CLICK_ON_TOPIC,notifyData)}}(product)}},react_default.a.createElement(Chat_ProductContent,{productMsgData:product}))}))),react_default.a.createElement("div",{className:classnames_default()((_cx2={},_cx2[ProductMessage_default.a.hideSwiperButton]=isHideSwiperButton,_cx2),"swiper-button-prev",ProductMessage_default.a.buttonPrev)}),react_default.a.createElement("div",{className:classnames_default()((_cx3={},_cx3[ProductMessage_default.a.hideSwiperButton]=isHideSwiperButton,_cx3),"swiper-button-next",ProductMessage_default.a.buttonNext)}))};ChatMessage_ProductMessage_ProductMessage.displayName="ProductMessage";var ChatMessage_ProductMessage=react_default.a.memo(ChatMessage_ProductMessage_ProductMessage,(function(prevProps,nextProps){return!(!Object(isEqualWith.a)(prevProps.products,nextProps.products,(function(prevProduct,nextProduct){return prevProduct.product_id===nextProduct.productId}))||prevProps.isOwner!==nextProps.isOwner||prevProps.isOnWAP!==nextProps.isOnWAP)})),OrderMessage_OrderMessage=__webpack_require__("kSIQ"),OrderMessage_default=__webpack_require__.n(OrderMessage_OrderMessage),_isOnWAP=!1,ChatMessage_OrderMessage_OrderMessage=function(props){var _cx;_isOnWAP=props.isOnWAP;var orderContent=props.content;return react_default.a.createElement("div",{className:classnames_default()((_cx={},_cx[OrderMessage_default.a.isOwner]=props.isOwner,_cx),OrderMessage_getResponsiveStyles(OrderMessage_default.a.orderMessage)),onClick:function(){return function(orderContent){var orderUrl=Object(get.a)(orderContent,"url",""),orderId=Object(get.a)(orderContent,"id",""),orderUrlByRole=Object(chatHelper.j)(orderUrl,orderId);if(!orderUrlByRole)return;var notifyData={type:res_const.t.TOPIC_TYPE.ORDER,data:{id:orderId,url:orderUrlByRole}};Object(notifyNewMessageToParent.a)(res_const.t.CLICK_ON_TOPIC,notifyData)}(orderContent)}},react_default.a.createElement(Chat_OrderContent,{orderContent:orderContent}))};ChatMessage_OrderMessage_OrderMessage.displayName="OrderMessage";var ChatMessage_OrderMessage=ChatMessage_OrderMessage_OrderMessage;function OrderMessage_getResponsiveStyles(className){return Object(helpers_styles.a)(OrderMessage_default.a,className,_isOnWAP)}var BotMessage_BotMessage=__webpack_require__("RQUf"),BotMessage_default=__webpack_require__.n(BotMessage_BotMessage),AttachmentMessage_AttachmentMessage=__webpack_require__("MPIb"),AttachmentMessage_default=__webpack_require__.n(AttachmentMessage_AttachmentMessage),AttachmentMessage_isOnWAP=!1,BotMessage_AttachmentMessage_AttachmentMessage=function(props){AttachmentMessage_isOnWAP=props.isOnWAP;props.isDisplayReport;var attachment=Object(get.a)(props.message,"botContent.message.attachment",null),payloadButtons=Object(get.a)(attachment,"payload.buttons",[]),payloadVoucher=Object(get.a)(attachment,"payload.voucher",{}),payloadTitle=he_default.a.unescape(Object(get.a)(attachment,"payload.title","")||""),payloadContent=he_default.a.unescape(Object(get.a)(attachment,"payload.content","")||""),payloadText=he_default.a.unescape(Object(get.a)(attachment,"payload.text","")||""),voucherImageSrc="https://media3.scdn.vn/img4/2021/04_09/okWO3sOHcIqTi7vLW3Yg.jpg";return payloadVoucher.is_percent_discount&&(voucherImageSrc="https://media3.scdn.vn/img4/2021/04_09/qsJr9YT0nu0HdwTcOlxD.png"),""===payloadTitle&&""===payloadContent||(payloadText=payloadContent),react_default.a.createElement("div",{className:classnames_default()(AttachmentMessage_getResponsiveStyles(AttachmentMessage_default.a.attachmentMessage))},""!==payloadTitle&&react_default.a.createElement("p",{className:AttachmentMessage_default.a.boldText},payloadTitle),""!==payloadText&&react_default.a.createElement("p",null,payloadText),payloadVoucher.discount_text&&react_default.a.createElement("p",null,react_default.a.createElement("img",{src:voucherImageSrc,className:AttachmentMessage_default.a.imageVoucherLeft}),payloadVoucher.discount_text),payloadButtons.map((function(buttonPayload,index){var key="button-payload-"+index;return react_default.a.createElement("button",{key:key,className:""+(buttonPayload.display_invert?AttachmentMessage_default.a.buttonPayloadRed:AttachmentMessage_default.a.buttonPayload),onClick:function(event){!function(event,isOwner,buttonPayload,sendMessage){switch(event.preventDefault(),buttonPayload.type){case res_const.g.ATTACHMENT.BUTTON_TYPE.WEB_URL:isOwner||void 0===buttonPayload.payload_tracking||null===buttonPayload.payload_tracking||""===buttonPayload.payload_tracking||sendMessage(buttonPayload.title,buttonPayload.payload_tracking,!0);var newUrl="";if(buttonPayload.url.indexOf("chi-tiet-don-hang/rating")>-1){var url=new URL(buttonPayload.url),domain="https://".concat(url.hostname),params=new URLSearchParams(url.search);newUrl=params.has("increment_id")?domain+"/chi-tiet-don-hang/"+params.get("increment_id"):domain+"/don-hang/"}window.open(newUrl||buttonPayload.url,"_blank");break;case res_const.g.ATTACHMENT.BUTTON_TYPE.POST_BACK:isOwner||sendMessage(buttonPayload.title,buttonPayload.payload,buttonPayload.reply_in_hidden)}}(event,props.isOwner,buttonPayload,props.sendMessage)}},buttonPayload.title)})))};BotMessage_AttachmentMessage_AttachmentMessage.displayName="AttachmentMessage";var BotMessage_AttachmentMessage=BotMessage_AttachmentMessage_AttachmentMessage;function AttachmentMessage_getResponsiveStyles(className){return Object(helpers_styles.a)(AttachmentMessage_default.a,className,AttachmentMessage_isOnWAP)}function report_icon_extends(){return(report_icon_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var report_icon_ref=react_default.a.createElement("g",{fill:"#D0D0D0",fillRule:"evenodd"},react_default.a.createElement("path",{d:"M12 21a9 9 0 110-18 9 9 0 010 18zm0-2a7 7 0 100-14 7 7 0 000 14z"}),react_default.a.createElement("path",{fillRule:"nonzero",d:"M12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2z"})),report_icon=function(props){return react_default.a.createElement("svg",report_icon_extends({width:"1em",height:"1em",viewBox:"0 0 24 24"},props),report_icon_ref)},ReportButton_ReportButton=__webpack_require__("nSyn"),ReportButton_default=__webpack_require__.n(ReportButton_ReportButton),ReportModal_ReportModal=__webpack_require__("pJxH"),ReportModal_default=__webpack_require__.n(ReportModal_ReportModal),REPORT_MODAL_TEXT_MODAL_HEADER_LABEL="B\xe1o c\xe1o n\u1ed9i dung",REPORT_MODAL_TEXT_MODAL_BODY_HEADING="B\u1ea1n mu\u1ed1n b\xe1o c\xe1o v\u1ec1 n\u1ed9i dung:",REPORT_MODAL_TEXT_MODAL_BODY_THANKS="\xdd ki\u1ebfn \u0111\xf3ng g\xf3p c\u1ee7a b\u1ea1n l\xe0 s\u1ef1 h\u1ed7 tr\u1ee3 r\u1ea5t l\u1edbn cho vi\u1ec7c c\u1ea3i thi\u1ec7n ch\u1ea5t l\u01b0\u1ee3ng d\u1ecbch v\u1ee5 \u0111\u1ec3 ch\xfang t\xf4i c\xf3 th\u1ec3 ph\u1ee5c v\u1ee5 b\u1ea1n t\u1ed1t h\u01a1n n\u1eefa.",REPORT_MODAL_TEXT_SUBMIT_BTN_LABEL="\u0110\u1ed3ng \xfd",ReportButton_ReportModal_ReportModal=function(props){return react_default.a.createElement(reactstrap_cjs.Modal,{className:ReportModal_default.a.modalDialog,contentClassName:ReportModal_default.a.modalContent,isOpen:props.isOpen,toggle:function(){props.closeModal()},centered:!0},react_default.a.createElement(reactstrap_cjs.ModalHeader,{className:ReportModal_default.a.modalHeader,close:react_default.a.createElement(ReportModal_CloseBtn,{onClick:function(){props.closeModal()}})},REPORT_MODAL_TEXT_MODAL_HEADER_LABEL),react_default.a.createElement(reactstrap_cjs.ModalBody,{className:ReportModal_default.a.modalBody},react_default.a.createElement("h5",null,REPORT_MODAL_TEXT_MODAL_BODY_HEADING),react_default.a.createElement("p",{className:ReportModal_default.a.messageContent},'"',props.message_object.title,'"'),react_default.a.createElement("p",null,REPORT_MODAL_TEXT_MODAL_BODY_THANKS),react_default.a.createElement("button",{onClick:function(){props.onSubmit(props.message_object)}},REPORT_MODAL_TEXT_SUBMIT_BTN_LABEL)))};ReportButton_ReportModal_ReportModal.displayName="ReportModal";var ReportButton_ReportModal=ReportButton_ReportModal_ReportModal,ReportModal_ref=react_default.a.createElement(Close.a,null),ReportModal_CloseBtn=function(props){return react_default.a.createElement("button",{className:ReportModal_default.a.closeBtn,onClick:props.onClick},ReportModal_ref)};ReportModal_CloseBtn.displayName="CloseBtn";var AI_REPORT_SETTING_SUBMIT_REPORT_MESSAGE_TEXT="T\xf4i mu\u1ed1n b\xe1o c\xe1o n\u1ed9i dung: ",AI_REPORT_SETTING_SUBSTRING_CHARACTER_NUMBER=100;function ReportButton_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ReportButton_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ReportButton_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ReportButton_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var BotMessage_ReportButton_ReportButton=function(props){var _useState=Object(react.useState)(!1),isOpenReportModal=_useState[0],setIsOpenReportModal=_useState[1];return react_default.a.createElement(react.Fragment,null,react_default.a.createElement("button",{className:ReportButton_default.a.reportButton,onClick:function(){setIsOpenReportModal(!0)}},react_default.a.createElement(report_icon,{className:ReportButton_default.a.reportIcon})),react_default.a.createElement(ReportButton_ReportModal,{isOpen:isOpenReportModal,closeModal:function(){setIsOpenReportModal(!1)},message_object:props.message_object,onSubmit:function(message_object){var summaryText=message_object.title.substring(0,AI_REPORT_SETTING_SUBSTRING_CHARACTER_NUMBER);message_object.title.length>AI_REPORT_SETTING_SUBSTRING_CHARACTER_NUMBER&&(summaryText+="...");var payloadData={type:res_const.a.REPORT_MODAL,message:ReportButton_objectSpread({},message_object.botContent)},payload="sendo-payload|survey|"+JSON.stringify(payloadData);props.sendMessage(AI_REPORT_SETTING_SUBMIT_REPORT_MESSAGE_TEXT+'\n"'+summaryText+'"',payload),setIsOpenReportModal(!1)}}))};BotMessage_ReportButton_ReportButton.displayName="ReportButton";var BotMessage_ReportButton=BotMessage_ReportButton_ReportButton,TextMessage_TextMessage=__webpack_require__("wMZH"),TextMessage_default=__webpack_require__.n(TextMessage_TextMessage),ChatMessage_TextMessage_TextMessage=function(props){var _cx,_cx2,className,_useState=Object(react.useState)(!1),isDisplaySentTime=_useState[0],setIsDisplaySentTime=_useState[1];return react_default.a.createElement("div",{className:classnames_default()((_cx={},_cx[TextMessage_default.a.errorMsg]=props.isError,_cx),(_cx2={},_cx2[TextMessage_default.a.isOwner]=props.isOwner,_cx2),(className=TextMessage_default.a.textMessage,Object(helpers_styles.a)(TextMessage_default.a,className,props.isOnWAP))),onClick:function(event){props.timestamp&&setIsDisplaySentTime(!isDisplaySentTime)}},react_default.a.createElement(ChatMessage_TextContent,{textContent:props.textContent,isOwner:props.isOwner}),Boolean(isDisplaySentTime||props.isDisplayTime)&&react_default.a.createElement("p",{className:TextMessage_default.a.sentTime},react_default.a.createElement(Chat_TimeStampAutoRefresh,{timestamp:props.timestamp,formatTimeFunction:timeSince.b})))};ChatMessage_TextMessage_TextMessage.displayName="TextMessage",ChatMessage_TextMessage_TextMessage.defaultProps={isError:!1,isOwner:!1,timestamp:0,isDisplayTime:!1};var ChatMessage_TextMessage=ChatMessage_TextMessage_TextMessage,BotMessage_ref=react_default.a.createElement("div",null),ChatMessage_BotMessage_BotMessage=function(props){var message_object=props.message.message_object;return react_default.a.createElement("div",{className:BotMessage_default.a.botMessage},function(){switch(Object(ChiDaiHelper.d)(message_object)){case res_const.c.NORMAL_TEXT:return react_default.a.createElement(ChatMessage_TextMessage,{message_id:props.message.message_id,textContent:message_object.botContent.message.text,isOwner:!1,isError:!1,isOnWAP:props.isOnWAP,timestamp:props.message.timestamp,isDisplayTime:props.message.isDisplayTime});case res_const.c.ATTACHMENT:return react_default.a.createElement(BotMessage_AttachmentMessage,{message:message_object,isOnWAP:props.isOnWAP,sendMessage:props.sendMessage,isOwner:props.isOwner,isDisplayReport:props.isDisplayReport});default:return BotMessage_ref}}(),props.isDisplayReport&&react_default.a.createElement(BotMessage_ReportButton,{message_object:message_object,sendMessage:props.sendMessage}))};ChatMessage_BotMessage_BotMessage.displayName="BotMessage";var ChatMessage_BotMessage=ChatMessage_BotMessage_BotMessage,QuoteMessage_QuoteMessage=__webpack_require__("4lKA"),QuoteMessage_default=__webpack_require__.n(QuoteMessage_QuoteMessage),QuoteContent_QuoteContent=__webpack_require__("6AuL"),QuoteContent_default=__webpack_require__.n(QuoteContent_QuoteContent),QuoteMessage_QuoteContent_QuoteContent=function(props){var _cx;var className,displayQuoteTxt='"'+props.quote.msg_txt+'"';return react_default.a.createElement("div",{className:classnames_default()((className=QuoteContent_default.a.quoteContent,Object(helpers_styles.a)(QuoteContent_default.a,className,props.isOnWAP)),(_cx={},_cx[QuoteContent_default.a.isOwner]=props.isOwner,_cx))},react_default.a.createElement("p",{className:QuoteContent_default.a.quoteTxt},displayQuoteTxt))};QuoteMessage_QuoteContent_QuoteContent.displayName="QuoteContent";var QuoteMessage_QuoteContent=QuoteMessage_QuoteContent_QuoteContent,ChatMessage_QuoteMessage_QuoteMessage=function(props){var _cx,_cx2,_useState=Object(react.useState)(!1),isDisplaySentTime=_useState[0],setIsDisplaySentTime=_useState[1];var className,messageContent=Object(get.a)(props.quote,"txt","");return react_default.a.createElement("div",{className:classnames_default()((_cx={},_cx[QuoteMessage_default.a.errorMsg]=props.isError,_cx),(_cx2={},_cx2[QuoteMessage_default.a.isOwner]=props.isOwner,_cx2),(className=QuoteMessage_default.a.quoteMessage,Object(helpers_styles.a)(QuoteMessage_default.a,className,props.isOnWAP))),onClick:function(event){props.timestamp&&setIsDisplaySentTime(!isDisplaySentTime)}},react_default.a.createElement(QuoteMessage_QuoteContent,{quote:props.quote,isOwner:props.isOwner,isOnWAP:props.isOnWAP}),react_default.a.createElement(ChatMessage_TextContent,{textContent:messageContent,isOwner:props.isOwner}),Boolean(isDisplaySentTime||props.isDisplayTime)&&react_default.a.createElement("p",{className:QuoteMessage_default.a.sentTime},react_default.a.createElement(Chat_TimeStampAutoRefresh,{timestamp:props.timestamp,formatTimeFunction:timeSince.b})))};ChatMessage_QuoteMessage_QuoteMessage.displayName="QuoteMessage",ChatMessage_QuoteMessage_QuoteMessage.defaultProps={isError:!1,isOwner:!1,timestamp:0,isDisplayTime:!1};var ChatMessage_QuoteMessage=ChatMessage_QuoteMessage_QuoteMessage,dropRight=__webpack_require__("+Z1G"),ImagesMessage_ImagesMessage=__webpack_require__("RGw8"),ImagesMessage_default=__webpack_require__.n(ImagesMessage_ImagesMessage),ChatMessage_ImagesMessage_ImagesMessage=function(props){var validImageUrls=props.message_object.urls;props.message_object.urls.length>6&&(validImageUrls=Object(dropRight.a)(props.message_object.urls,props.message_object.urls.length-6));return react_default.a.createElement("div",{className:classnames_default()(ImagesMessage_default.a.imagesMessage,function(){switch(validImageUrls.length){case 6:return ImagesMessage_default.a.sixImages;case 5:return ImagesMessage_default.a.fiveImages;case 4:return ImagesMessage_default.a.fourImages;case 3:return ImagesMessage_default.a.threeImages;case 2:return ImagesMessage_default.a.twoImages;default:return ImagesMessage_default.a.oneImages}}())},validImageUrls.map((function(imageUrl,index){return react_default.a.createElement(ImagesMessage_Image,{key:"image-msg-"+index,imageUrl:imageUrl,altText:props.message_object.title})})))};ChatMessage_ImagesMessage_ImagesMessage.displayName="ImagesMessage";var ChatMessage_ImagesMessage=ChatMessage_ImagesMessage_ImagesMessage,ImagesMessage_Image=function(props){var displayImageUrl=Object(format_messageContent.d)(props.imageUrl,"400x400")||props.imageUrl;return react_default.a.createElement("a",{className:ImagesMessage_default.a.imageContainer,target:"_blank",rel:"noopener noreferrer",href:props.imageUrl},react_default.a.createElement("img",{className:ImagesMessage_default.a.msgImage,src:displayImageUrl,alt:props.altText}))};ImagesMessage_Image.displayName="Image";var EmojiMessage_EmojiMessage=__webpack_require__("/TAp"),EmojiMessage_default=__webpack_require__.n(EmojiMessage_EmojiMessage),ChatMessage_EmojiMessage_EmojiMessage=function(props){return react_default.a.createElement("div",{className:1===props.emojiIcons.length?EmojiMessage_default.a.biggestEmoji:EmojiMessage_default.a.biggerEmoji},props.emojiIcons.map((function(emojiIcon,index){return react_default.a.createElement("span",{key:"emoji-icon-"+index},emojiIcon)})))};ChatMessage_EmojiMessage_EmojiMessage.displayName="EmojiMessage";var ChatMessage_EmojiMessage=ChatMessage_EmojiMessage_EmojiMessage,Star=__webpack_require__("Z5r+"),IconStarStroke=__webpack_require__("ZCfh"),OrderRatingMessage_OrderRatingMessage=__webpack_require__("BQCb"),OrderRatingMessage_default=__webpack_require__.n(OrderRatingMessage_OrderRatingMessage),ChatMessage_OrderRatingMessage_OrderRatingMessage=function(props){var firstItem=props.message_object.items[0],imageUrl=Object(format_messageContent.d)(firstItem.image_url,"180x180"),orderIdLabel="#"+firstItem.id,ratingStars=function(ratingPoint){for(var result=[],index=0;index<ratingPoint;index++)result.push({type:res_const.x.FULL});if(5===result.length)return result;for(var totalRemainStars=5-result.length,_index=0;_index<totalRemainStars;_index++)result.push({type:res_const.x.EMPTY});return result}(parseInt(firstItem.order_attr.rating,10));return react_default.a.createElement("div",{className:OrderRatingMessage_default.a.orderRatingMessage},react_default.a.createElement("p",{className:OrderRatingMessage_default.a.headerLabel},"K\u1ebft qu\u1ea3 \u0111\xe1nh gi\xe1:"),react_default.a.createElement("div",{className:OrderRatingMessage_default.a.content},react_default.a.createElement("img",{alt:"product-images",className:OrderRatingMessage_default.a.image,src:imageUrl}),react_default.a.createElement("div",{className:OrderRatingMessage_default.a.info},react_default.a.createElement("p",{className:OrderRatingMessage_default.a.label},"\u0110\u01a1n h\xe0ng: ",react_default.a.createElement("span",{className:OrderRatingMessage_default.a.orderNumber},orderIdLabel)),react_default.a.createElement("div",{className:OrderRatingMessage_default.a.stars},ratingStars.map((function(ratingStar,index){return ratingStar.type===res_const.x.FULL?react_default.a.createElement(Star.a,{key:"rating_star_"+index,className:OrderRatingMessage_default.a.icon}):react_default.a.createElement(IconStarStroke.a,{key:"rating_star_"+index,className:OrderRatingMessage_default.a.icon})}))))))};ChatMessage_OrderRatingMessage_OrderRatingMessage.displayName="OrderRatingMessage";var ChatMessage_OrderRatingMessage=ChatMessage_OrderRatingMessage_OrderRatingMessage;var ChatMessage_isOnWAP=!1;function ChatMessage_getResponsiveStyles(className){return Object(helpers_styles.a)(ChatMessage_default.a,className,ChatMessage_isOnWAP)}var ChatMessage_ref=react_default.a.createElement("div",null),Detail_ChatMessage_ChatMessage=function(props){if(!props.chatDetail)return ChatMessage_ref;ChatMessage_isOnWAP=props.isOnWAP;var chatDetail=props.chatDetail,isOwner=!!chatDetail.is_owner,isError=Boolean(chatDetail.message_status===res_const.r.FAILED),clientError=Object(get.a)(chatDetail,"clientInfo.error",null);return clientError?react_default.a.createElement(ChatMessage_ErrorMessage,{error:clientError,isOwner:isOwner}):Object(get.a)(chatDetail,"clientInfo.isTempMessage",!1)?react_default.a.createElement(ChatMessage_TempMessage,{message:chatDetail.message_object,isOwner:isOwner}):react_default.a.createElement(ChatMessage_ContentMessage,{message:chatDetail,handleImageLoaded:props.handleImageLoaded,isOwner:isOwner,isError:isError,sendMessage:props.sendMessage})};Detail_ChatMessage_ChatMessage.displayName="ChatMessage";var Detail_ChatMessage=Detail_ChatMessage_ChatMessage,ChatMessage_ref2=react_default.a.createElement(ErrorImage,null),ChatMessage_ErrorMessage=function(props){switch(props.error.type){case res_const.k.MSG_DETAIL.ERROR_TYPE.IMAGE:return react_default.a.createElement("div",{className:ChatMessage_default.a.errorImageContainer},react_default.a.createElement("div",{className:ChatMessage_default.a.errorImageInfo},react_default.a.createElement("div",{className:ChatMessage_default.a.defaultImageContainer},ChatMessage_ref2),react_default.a.createElement(ErrorWarning,{className:ChatMessage_default.a.warningIcon})),!!props.error.msg&&react_default.a.createElement("span",{className:ChatMessage_default.a.messageStatus},props.error.msg));default:return react_default.a.createElement(ChatMessage_TextMessage,{textContent:props.error.msg,isOwner:props.isOwner,isOnWAP:ChatMessage_isOnWAP,isError:!0})}},ChatMessage_TextContent=function(props){var textContentParts=format_messageContent.f(props.textContent);return textContentParts.length?react_default.a.createElement(react.Fragment,null,textContentParts.map((function(textContentPart,textContentPartIndex){var _cx;switch(textContentPart.type){case"text":return react_default.a.createElement("span",{key:"text_"+textContentPartIndex},textContentPart.text);case"url":return format_messageContent.g(textContentPart.url)?react_default.a.createElement("a",{key:"url_"+textContentPartIndex,className:classnames_default()(ChatMessage_default.a.textLink,(_cx={},_cx[ChatMessage_default.a.isOwner]=props.isOwner,_cx)),onClick:function(event){return event.stopPropagation()},target:"_blank",rel:"noopener noreferrer",href:textContentPart.url},textContentPart.text):react_default.a.createElement("span",{key:"text_"+textContentPartIndex},textContentPart.text);default:return null}}))):react_default.a.createElement("span",null,props.textContent)};ChatMessage_TextContent.displayName="TextContent",ChatMessage_TextContent.defaultProps={isOwner:!1};var ChatMessage_ref3=react_default.a.createElement(ImageUploading,null),ChatMessage_TempMessage=function(props){switch(props.message.type){case res_const.q.IMAGE:return react_default.a.createElement("div",{className:classnames_default()(ChatMessage_getResponsiveStyles(ChatMessage_default.a.tempImageInfo))},react_default.a.createElement("div",{className:classnames_default()(ChatMessage_default.a.defaultImageContainer)},ChatMessage_ref3));default:var title=props.message.title;return react_default.a.createElement(ChatMessage_TextMessage,{textContent:title,isOwner:props.isOwner,isError:!0,isOnWAP:ChatMessage_isOnWAP})}},ChatMessage_ref4=react_default.a.createElement("div",null),ChatMessage_ref5=react_default.a.createElement("div",null),_ref6=react_default.a.createElement("div",null),_ref7=react_default.a.createElement("div",null),_ref8=react_default.a.createElement("div",null),ChatMessage_ContentMessage=function(props){var message_object=props.message.message_object,textContent=Object(get.a)(message_object,"title",""),firstMessageItem=Object(get.a)(message_object,"items.0",null);switch(message_object.type){case res_const.q.SHOP_ORDER:return firstMessageItem?react_default.a.createElement(ChatMessage_OrderMessage,{content:firstMessageItem,isOwner:props.isOwner,isOnWAP:ChatMessage_isOnWAP}):"";case res_const.q.VOUCHER:return firstMessageItem?react_default.a.createElement(ChatMessage_VoucherMessage,{content:firstMessageItem}):"";case res_const.q.QUOTE:return message_object.quote&&message_object.quote.txt?react_default.a.createElement(ChatMessage_QuoteMessage,{quote:message_object.quote,isOwner:props.isOwner,isError:props.isError,isOnWAP:ChatMessage_isOnWAP,timestamp:props.message.timestamp,isDisplayTime:props.message.isDisplayTime}):"";case res_const.q.AUTO_REPLY:case res_const.q.POST_BACK:case res_const.q.TEXT:if(!textContent)return"";var messageContent=he_default.a.unescape(textContent),emojiIcons=Object(chatHelper.h)(messageContent);return emojiIcons.length?react_default.a.createElement(ChatMessage_EmojiMessage,{emojiIcons:emojiIcons}):react_default.a.createElement(ChatMessage_TextMessage,{message_id:props.message.message_id,textContent:messageContent,isOwner:props.isOwner,isError:props.isError,isOnWAP:ChatMessage_isOnWAP,timestamp:props.message.timestamp,isDisplayTime:props.message.isDisplayTime});case res_const.q.IMAGE:return message_object.urls&&message_object.urls.length?react_default.a.createElement(ChatMessage_ImagesMessage,{message_object:message_object,onFinishedLoad:props.handleImageLoaded(message_object)}):ChatMessage_ref4;case res_const.q.PRODUCTS:return message_object.products&&message_object.products.length?react_default.a.createElement(ChatMessage_ProductMessage,{products:message_object.products,isOwner:props.isOwner,isOnWAP:ChatMessage_isOnWAP}):ChatMessage_ref5;case res_const.q.BOT:return textContent?Object(chatHelper.y)(message_object)?react_default.a.createElement(ChatMessage_BotMessage,{isOwner:props.isOwner,isDisplayReport:Object(ChiDaiHelper.f)(props.message),sendMessage:props.sendMessage,message:props.message,isOnWAP:ChatMessage_isOnWAP}):_ref7:_ref6;case res_const.q.ORDER_RATING:return 0===parseInt(Object(get.a)(message_object,"items.0.order_attr.rating","0.0"),10)?react_default.a.createElement(ChatMessage_TextMessage,{textContent:res_text.b.CHAT_MSG.REQUIRE_USING_APP_FOR_RATING,isOnWAP:ChatMessage_isOnWAP,timestamp:props.message.timestamp}):react_default.a.createElement(ChatMessage_OrderRatingMessage,{message_object:message_object})}return _ref8};ChatMessage_ContentMessage.displayName="ContentMessage";var ChatMessage_VoucherMessage=function(props){if(!props.content||!props.content.voucher_attr)return"";var imageUrl=format_messageContent.d(props.content.image_url,"80x80")||"",headerText=res_text.b.CHAT_MSG.TOPIC.VOUCHER.LABEL,expiredTimeTimestamp=parseInt(props.content.voucher_attr.expired_time),expireDate=new Date(expiredTimeTimestamp),expireText=""+res_text.b.CHAT_MSG.TOPIC.VOUCHER.EXPIRE_INFO.WILL_EXPIRE+expireDate.getHours()+":"+expireDate.getMinutes()+" "+res_text.b.CHAT_MSG.TOPIC.VOUCHER.EXPIRE_INFO.AT+expireDate.getDate()+"/"+(expireDate.getMonth()+1)+"/"+expireDate.getFullYear();return react_default.a.createElement("div",{className:classnames_default()(ChatMessage_getResponsiveStyles(ChatMessage_default.a.voucherMessage),ChatMessage_default.a.clickable),onClick:function(e){return ChatMessage_onClickProductTopic(e,props.content)}},react_default.a.createElement("p",{className:classnames_default()(ChatMessage_default.a.expireHeader)},headerText),react_default.a.createElement("div",{className:classnames_default()(ChatMessage_default.a.productContent)},react_default.a.createElement("div",{className:classnames_default()(ChatMessage_default.a.imageContainer)},react_default.a.createElement("img",{src:imageUrl,alt:headerText})),react_default.a.createElement("div",{className:classnames_default()(ChatMessage_getResponsiveStyles(ChatMessage_default.a.infoContent))},react_default.a.createElement("p",{className:ChatMessage_default.a.productName},props.content.name),!!props.content.selected_options_label&&react_default.a.createElement("span",{className:ChatMessage_default.a.optionsLabel},props.content.selected_options_label),react_default.a.createElement("div",{className:classnames_default()(ChatMessage_default.a.pricingContent)},ChatMessage_renderVoucherPricing(props.content)))),react_default.a.createElement("div",{className:classnames_default()(ChatMessage_default.a.voucherBtn)},react_default.a.createElement("p",{className:classnames_default()(ChatMessage_default.a.voucherText)},res_text.b.CHAT_MSG.TOPIC.VOUCHER.EXPIRE_INFO.CODE_LABEL,react_default.a.createElement("strong",null,props.content.voucher_attr.voucher_code),res_text.b.CHAT_MSG.TOPIC.VOUCHER.EXPIRE_INFO.DISCOUNT_LABEL,format_messageContent.e(props.content.voucher_attr.voucher_val))),react_default.a.createElement("p",{className:classnames_default()(ChatMessage_default.a.expireText)},expireText))};ChatMessage_VoucherMessage.displayName="VoucherMessage";var ChatMessage_onClickProductTopic=function(e,product){e.preventDefault();var productUrl=Object(get.a)(product,"url",""),productId=Object(get.a)(product,"external_id",""),url=Object(chatHelper.n)(productUrl,productId);url&&ChatMessage_notifyClickTopic({type:res_const.t.TOPIC_TYPE.PRODUCT,data:{id:Object(get.a)(product,"external_id",""),name:Object(get.a)(product,"name",""),url:url}})},ChatMessage_notifyClickTopic=function(notifyData){Object(notifyNewMessageToParent.a)(res_const.t.CLICK_ON_TOPIC,notifyData)},ChatMessage_renderVoucherPricing=function(voucherContent){var final_price_label=format_messageContent.e(voucherContent.final_price);return voucherContent.final_price_label&&(final_price_label=voucherContent.final_price_label),react_default.a.createElement("div",{className:classnames_default()(ChatMessage_default.a.pricing)},react_default.a.createElement("span",{className:classnames_default()(ChatMessage_default.a.finalPrice)},final_price_label))};ChatMessage_renderVoucherPricing.displayName="renderVoucherPricing";var TypingIndicator=__webpack_require__("8IYJ"),TypingIndicator_default=__webpack_require__.n(TypingIndicator),Detail_TypingIndicator=function(props){return react_default.a.createElement("div",{className:TypingIndicator_default.a.typingIndicator},react_default.a.createElement("div",{className:classnames_default()(TypingIndicator_default.a.dot,TypingIndicator_default.a.firstDot)}),react_default.a.createElement("div",{className:classnames_default()(TypingIndicator_default.a.dot,TypingIndicator_default.a.secondDot)}),react_default.a.createElement("div",{className:classnames_default()(TypingIndicator_default.a.dot,TypingIndicator_default.a.thirdDot)}))},AIQuickReplies_AIQuickReplies=__webpack_require__("Naf7"),AIQuickReplies_default=__webpack_require__.n(AIQuickReplies_AIQuickReplies);function AIQuickReplies_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var ChatMessage_AIQuickReplies_AIQuickReplies=function(props){var _cx,containerRef=Object(react.useRef)(null);Object(react.useEffect)((function(){return initSlider(),containerRef.current.addEventListener("wheel",(function(event){return event.preventDefault()})),function(){containerRef.current.removeEventListener("wheel",null)}}),[]);var initSlider=function(){new Swiper.a(containerRef.current,function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?AIQuickReplies_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):AIQuickReplies_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},{slidesPerView:"auto",grabCursor:!0,mousewheel:{forceToAxis:!0},setWrapperSize:!0}))},quickReplies=Object(get.a)(props.message,"message_object.botContent.message.quick_replies",[]);return react_default.a.createElement("div",{ref:containerRef,className:classnames_default()(AIQuickReplies_default.a.AIquickReplies,(_cx={},_cx[AIQuickReplies_default.a.onWAP]=props.isOnWAP,_cx),"swiper-container"),onWheel:function(event){var isScrollUp=event.deltaY<0,isScrollDown=event.deltaY>0,isScrollLeft=event.deltaX<0,isScrollRight=event.deltaX>0,swiperContainer=containerRef.current.swiper;swiperContainer&&(isScrollUp?swiperContainer.slidePrev():isScrollDown?swiperContainer.slideNext():isScrollLeft?swiperContainer.slidePrev():isScrollRight&&swiperContainer.slideNext())},onScroll:function(event){event.preventDefault()}},react_default.a.createElement("div",{className:classnames_default()(AIQuickReplies_default.a.wrapper,"swiper-wrapper")},quickReplies.map((function(quickReply,index){return quickReply.content_type===res_const.b.TEXT?react_default.a.createElement("button",{key:"AI_quick_reply_"+index,className:classnames_default()(AIQuickReplies_default.a.textQuickReplyBtn,"swiper-slide"),onClick:function(){return function(quickReply){props.sendMessage(quickReply.title,quickReply.payload)}(quickReply)}},react_default.a.createElement("img",{src:quickReply.image_url,alt:"AI_quick_reply_image"}),react_default.a.createElement("label",null,quickReply.title)):react_default.a.createElement("div",{key:"AI_quick_reply_"+index})}))))};ChatMessage_AIQuickReplies_AIQuickReplies.displayName="AIQuickReplies";var ChatMessage_AIQuickReplies=ChatMessage_AIQuickReplies_AIQuickReplies,EmptyChatList_ref=react_default.a.createElement("defs",null,react_default.a.createElement("linearGradient",{id:"empty-chat-list-a",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},react_default.a.createElement("stop",{offset:"0%",stopColor:"#EEE"}),react_default.a.createElement("stop",{offset:"100%",stopColor:"#D8D8D8"}))),EmptyChatList_ref2=react_default.a.createElement("g",{fill:"none",fillRule:"evenodd"},react_default.a.createElement("path",{fill:"url(#empty-chat-list-a)",fillRule:"nonzero",d:"M4 16.586l2.293-2.293A1 1 0 0 1 7 14h10V5H4v11.586zM18 14c0 .55-.45 1-1 1H7l-4 4V5c0-.55.45-1 1-1h13c.55 0 1 .45 1 1v9z"}),react_default.a.createElement("circle",{cx:"7",cy:"10",r:"1",fill:"#DEDEDE"}),react_default.a.createElement("circle",{cx:"10",cy:"10",r:"1",fill:"#DEDEDE"}),react_default.a.createElement("circle",{cx:"13",cy:"10",r:"1",fill:"#DEDEDE"}),react_default.a.createElement("path",{fill:"#DEDEDE",d:"M20 6h-1v10H8v1c0 .55.45 1 1 1h8l4 3V7c0-.55-.45-1-1-1z"}));function EmptyChatList(props){return react_default.a.createElement("svg",extends_default()({xmlns:"http://www.w3.org/2000/svg",width:"96",height:"96",viewBox:"0 0 24 24"},props),EmptyChatList_ref,EmptyChatList_ref2)}EmptyChatList.displayName="EmptyChatList";var Chat=__webpack_require__("v9QV"),BlankChatMsg_BlankChatMsg=__webpack_require__("zdJG"),BlankChatMsg_default=__webpack_require__.n(BlankChatMsg_BlankChatMsg),WELL_DONE_TEXT_REPLIED_ALL_MESSAGE="B\u1ea1n \u0111\xe3 tr\u1ea3 l\u1eddi h\u1ebft Chat c\u1ee7a ng\u01b0\u1eddi mua.",WELL_DONE_TEXT_READ_ALL_MESSAGE="B\u1ea1n \u0111\xe3 \u0111\u1ecdc h\u1ebft Chat c\u1ee7a ng\u01b0\u1eddi mua.",BlankChatMsg_ref=react_default.a.createElement(Chat.a,{color:"#E5101D"}),ChatContainer_BlankChatMsg_BlankChatMsg=function(_PureComponent){function BlankChatMsg(){return _PureComponent.apply(this,arguments)||this}inheritsLoose_default()(BlankChatMsg,_PureComponent);var _proto=BlankChatMsg.prototype;return _proto.renderText=function(){if(this.props.errorMsg)return react_default.a.createElement(react.Fragment,null,react_default.a.createElement("p",null,this.props.errorMsg));if(!this.props.isInitFromParentSite){var parentSiteUrl=res_const.z.BUYER_DOMAIN,parentSiteText="Sendo.vn";return this.props.userRole===res_const.F.SELLER&&(parentSiteUrl=res_const.z.SELLER_DOMAIN,parentSiteText="Ban.sendo.vn"),react_default.a.createElement(react.Fragment,null,react_default.a.createElement("p",null,react_default.a.createElement("span",null,res_text.a.PLEASE_ACCESS_IN_SENDO),react_default.a.createElement("a",{className:BlankChatMsg_default.a.boldRed,href:parentSiteUrl},parentSiteText),react_default.a.createElement("span",null,res_text.a.FOR_OPENING_CHAT)))}var ROLE_TEXT=this.props.ROLE_TEXT;if(this.props.userRole===res_const.F.BUYER)return react_default.a.createElement(react.Fragment,null,react_default.a.createElement("div",{className:BlankChatMsg_default.a.firstText},react_default.a.createElement("span",null,ROLE_TEXT.CHAT_GUIDE.PRESS_BUTTON),BlankChatMsg_ref,react_default.a.createElement("span",{className:BlankChatMsg_default.a.boldRed},ROLE_TEXT.CHAT_GUIDE.CHAT_NOW),react_default.a.createElement("span",null,ROLE_TEXT.CHAT_GUIDE.AT_PAGE)),react_default.a.createElement("p",null,ROLE_TEXT.CHAT_GUIDE.DETAIL_TO_CHAT));if(!this.props.auditUserInfo.isValid)return react_default.a.createElement(react.Fragment,null,react_default.a.createElement("p",null,ROLE_TEXT.CHAT_GUIDE.NOT_VALID_SELLER," ",react_default.a.createElement("span",{className:BlankChatMsg_default.a.highlight},this.props.userInfo.full_name)),react_default.a.createElement("p",null,ROLE_TEXT.CHAT_GUIDE.ASK_CHAT_PERMISSION));var isDisplayGuideClickChatBtn=Boolean(this.props.filterType===res_const.l.ALL||this.props.chatList.length>1);return this.props.chatSystemType===res_const.f.SENLIVE?isDisplayGuideClickChatBtn?!this.props.chatDetails.length&&this.props.conversation.chat_id?react_default.a.createElement(react.Fragment,null,react_default.a.createElement("p",{className:BlankChatMsg_default.a.wellDoneText},"Kh\xf4ng c\xf3 n\u1ed9i dung Chat c\u1ee7a SenLive n\xe0y")):react_default.a.createElement(react.Fragment,null,react_default.a.createElement("p",{className:BlankChatMsg_default.a.wellDoneText},"H\xe3y ch\u1ecdn xem n\u1ed9i dung Chat c\u1ee7a SenLive \u1edf danh s\xe1ch b\xean tr\xe1i")):react_default.a.createElement(react.Fragment,null,react_default.a.createElement("p",{className:BlankChatMsg_default.a.wellDoneText},"B\u1ea1n ch\u01b0a c\xf3 l\u1ecbch s\u1eed Chat trong SenLive")):isDisplayGuideClickChatBtn?react_default.a.createElement(react.Fragment,null,react_default.a.createElement("div",{className:BlankChatMsg_default.a.firstText},react_default.a.createElement("span",null,ROLE_TEXT.CHAT_GUIDE.PRESS_BUTTON),react_default.a.createElement("span",{className:BlankChatMsg_default.a.boldRed},ROLE_TEXT.CHAT_GUIDE.CHAT_NOW),react_default.a.createElement("div",{className:BlankChatMsg_default.a.sellerIcon}),react_default.a.createElement("span",null,ROLE_TEXT.CHAT_GUIDE.AT_PAGE)),react_default.a.createElement("p",null,react_default.a.createElement("span",{className:BlankChatMsg_default.a.highlight},"chi ti\u1ebft \u0111\u01a1n h\xe0ng")," ho\u1eb7c"," ",react_default.a.createElement("span",{className:BlankChatMsg_default.a.highlight},"l\u1ecbch s\u1eed quan t\xe2m")," \u0111\u1ec3 chat v\u1edbi ng\u01b0\u1eddi mua")):react_default.a.createElement(react.Fragment,null,this.props.filterType===res_const.l.UNREPLIED&&react_default.a.createElement("p",{className:BlankChatMsg_default.a.wellDoneText},WELL_DONE_TEXT_REPLIED_ALL_MESSAGE),this.props.filterType===res_const.l.UNREAD&&react_default.a.createElement("p",{className:BlankChatMsg_default.a.wellDoneText},WELL_DONE_TEXT_READ_ALL_MESSAGE),react_default.a.createElement("div",{className:BlankChatMsg_default.a.secondText},react_default.a.createElement("div",{className:BlankChatMsg_default.a.firstText},react_default.a.createElement("span",null,ROLE_TEXT.CHAT_GUIDE.PRESS_BUTTON),ROLE_TEXT.CHAT_GUIDE.CHAT_NOW,react_default.a.createElement("div",{className:BlankChatMsg_default.a.sellerIcon}),react_default.a.createElement("span",null,ROLE_TEXT.CHAT_GUIDE.AT_PAGE)),react_default.a.createElement("p",null,react_default.a.createElement("span",{className:BlankChatMsg_default.a.highlight},"chi ti\u1ebft \u0111\u01a1n h\xe0ng")," ho\u1eb7c"," ",react_default.a.createElement("span",{className:BlankChatMsg_default.a.highlight},"l\u1ecbch s\u1eed quan t\xe2m")," \u0111\u1ec3 chat v\u1edbi ng\u01b0\u1eddi mua kh\xe1c.")))},_proto.render=function(){return react_default.a.createElement("div",{className:BlankChatMsg_default.a.emptyChatList},react_default.a.createElement(EmptyChatList,{className:BlankChatMsg_default.a.bigIcon}),this.renderText())},BlankChatMsg}(react.PureComponent);ChatContainer_BlankChatMsg_BlankChatMsg.displayName="BlankChatMsg",defineProperty_default()(ChatContainer_BlankChatMsg_BlankChatMsg,"defaultProps",{errorMsg:""});var ChatContainer_BlankChatMsg=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{isInitFromParentSite:state.app.isInitFromParentSite,ROLE_TEXT:state.app.ROLE_TEXT,userRole:state.auth.role,auditUserInfo:state.auth.auditUserInfo,chatList:state.chat.chatList,chatSystemType:state.chat.chatSystemType,chatDetails:state.chat.chatDetails,conversation:state.chat.conversation}}),null))(ChatContainer_BlankChatMsg_BlankChatMsg),seen=__webpack_require__("XSn6"),seen_default=__webpack_require__.n(seen),sent=__webpack_require__("4HpP"),sent_default=__webpack_require__.n(sent),LiveStreamMessage_LiveStreamMessage=__webpack_require__("+GyL"),LiveStreamMessage_default=__webpack_require__.n(LiveStreamMessage_LiveStreamMessage),LiveStreamMessage_TextMessage_TextMessage=__webpack_require__("s9jV"),TextMessage_TextMessage_default=__webpack_require__.n(LiveStreamMessage_TextMessage_TextMessage);function TextMessage_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Detail_LiveStreamMessage_TextMessage_TextMessage=function(props){var _cx,partner_fpt_id=Object(xmpp.l)(props.partner_id);function onClickTextMessage(textMsg){if(partner_fpt_id!==userHelper.a.getCurrentUserInfo().fpt_id){var receiver={partner_id:partner_fpt_id+setting.p,partner_avatar:"",partner_fullname:props.partner_fullname},shop_info=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?TextMessage_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):TextMessage_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},userHelper.a.getCurrentUserInfo(),{shop_name:userHelper.a.getCurrentUserInfo().full_name}),topic=Object(format_messageContent.c)(shop_info),newChatId=Object(chatHelper.e)(props.userInfo.fpt_id,receiver.partner_id,res_const.F.SELLER),parentContextData=Object(chatHelper.f)(newChatId,topic,shop_info),newConversation=Object(xmpp.e)(newChatId,receiver,parentContextData);props.setChatSystemType(res_const.f.CHAT),props.setFilterType(res_const.l.ALL),props.saveChattingSenLiveState(),props.clearConversation(),props.fetchHistoryListAsync({type:res_const.l.ALL}),props.setQuoteForNextMsg({msg_id:props.messsage_id,msg_txt:textMsg,msg_created_by:props.partner_fullname,msg_created_by_fpt_id:partner_fpt_id,msg_created_at:props.timestamp,created_by:props.userInfo.full_name,created_by_fpt_id:props.userInfo.fpt_id}),props.openNewChat(newConversation,parentContextData)}}return react_default.a.createElement("div",{className:classnames_default()(TextMessage_TextMessage_default.a.textMessage,(_cx={},_cx[TextMessage_TextMessage_default.a.disabledClick]=Boolean(partner_fpt_id===userHelper.a.getCurrentUserInfo().fpt_id),_cx)),onClick:function(){return onClickTextMessage(props.textContent)}},react_default.a.createElement("span",{className:TextMessage_TextMessage_default.a.fullname},props.partner_fullname,":"),react_default.a.createElement("input",{type:"hidden",value:""+Object(xmpp.l)(props.partner_id)}),react_default.a.createElement(ChatMessage_TextContent,{textContent:props.textContent,isOwner:!1}),react_default.a.createElement("p",{className:TextMessage_TextMessage_default.a.sentTime},react_default.a.createElement(Chat_TimeStampAutoRefresh,{timestamp:props.timestamp,formatTimeFunction:timeSince.b})))};Detail_LiveStreamMessage_TextMessage_TextMessage.displayName="TextMessage",Detail_LiveStreamMessage_TextMessage_TextMessage.defaultProps={messsage_id:""};var LiveStreamMessage_TextMessage=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{userInfo:state.auth.userInfo}}),(function(dispatch){return{openNewChat:Object(bindActionCreators.a)(openNewChat,dispatch),fetchHistoryListAsync:Object(bindActionCreators.a)(actions_xmpp.fetchHistoryListAsync,dispatch),setFilterType:Object(bindActionCreators.a)(setFilterType,dispatch),setChatSystemType:Object(bindActionCreators.a)(setChatSystemType,dispatch),clearConversation:Object(bindActionCreators.a)(clearConversation,dispatch),saveChattingSenLiveState:Object(bindActionCreators.a)(saveChattingSenLiveState,dispatch),setQuoteForNextMsg:Object(bindActionCreators.a)(setQuoteForNextMsg,dispatch)}})))(Detail_LiveStreamMessage_TextMessage_TextMessage),BlockChatSenLiveAction_BlockChatSenLiveAction=__webpack_require__("qCUe"),BlockChatSenLiveAction_default=__webpack_require__.n(BlockChatSenLiveAction_BlockChatSenLiveAction),confirmModal=function(infoMsg,acceptLabel,cancelLabel){return function(dispatch,getState){return new Promise((function(resolvePromise){dispatch({type:"confirmModal/SET_RESOLVE_PROMISE",payload:{resolvePromise:resolvePromise}}),dispatch({type:"confirmModal/SET_INFO_MSG",payload:{infoMsg:infoMsg,acceptLabel:acceptLabel,cancelLabel:cancelLabel}}),dispatch({type:"confirmModal/OPEN_MODAL",payload:{infoMsg:infoMsg}})}))}},closeConfirmModal=function(){return function(dispatch,getState){getState().confirmModal.resolvePromise(!1),dispatch({type:"confirmModal/CLOSE_MODAL"})}},confirmModal_acceptConfirmModal=function(){return function(dispatch,getState){getState().confirmModal.resolvePromise(!0),dispatch({type:"confirmModal/CLOSE_MODAL"})}},BlockChatSenLiveAction_ref=react_default.a.createElement("div",null),BlockChatSenLiveAction_ref2=react_default.a.createElement("div",null),BlockChatSenLiveAction_ref3=react_default.a.createElement("div",null),LiveStreamMessage_BlockChatSenLiveAction_BlockChatSenLiveAction=function(props){return react_default.a.createElement("div",{className:classnames_default()(props.className,BlockChatSenLiveAction_default.a.blockChatSenLiveAction)},react_default.a.createElement("button",{className:BlockChatSenLiveAction_default.a.onClickMenuButton},react_default.a.createElement("div",{className:BlockChatSenLiveAction_default.a.dotIcon},BlockChatSenLiveAction_ref,BlockChatSenLiveAction_ref2,BlockChatSenLiveAction_ref3),react_default.a.createElement("div",{className:classnames_default()(BlockChatSenLiveAction_default.a.dropdownContent)},react_default.a.createElement("li",{onClick:function(event){return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return event.preventDefault(),_context.next=3,regenerator_default.a.awrap(props.confirmModal("B\u1ea1n c\xf3 mu\u1ed1n ch\u1eb7n ng\u01b0\u1eddi xem "+(props.partner_fullname||props.partner_fpt_id)+" g\u1eedi chat \u1edf SenLive kh\xf4ng ?","Ch\u1eb7n","H\u1ee7y"));case 3:if(_context.sent){_context.next=6;break}return _context.abrupt("return");case 6:props.fetchBlockSenLiveUser(props.partner_fpt_id,props.partner_fullname);case 7:case"end":return _context.stop()}}))}},"Ch\u1eb7n"))))};LiveStreamMessage_BlockChatSenLiveAction_BlockChatSenLiveAction.displayName="BlockChatSenLiveAction",LiveStreamMessage_BlockChatSenLiveAction_BlockChatSenLiveAction.defaultProps={className:""};var LiveStreamMessage_BlockChatSenLiveAction=Object(Recompose_cjs.compose)(Object(lib.connect)(null,(function(dispatch){return{fetchBlockSenLiveUser:Object(bindActionCreators.a)(fetcher.a,dispatch),confirmModal:Object(bindActionCreators.a)(confirmModal,dispatch)}})))(LiveStreamMessage_BlockChatSenLiveAction_BlockChatSenLiveAction),Detail_LiveStreamMessage_LiveStreamMessage=function(props){return react_default.a.createElement("div",{className:LiveStreamMessage_default.a.livestream},react_default.a.createElement("div",{className:LiveStreamMessage_default.a.textContent},react_default.a.createElement(LiveStreamMessage_TextMessage,{message_id:props.chatDetail.message_id,textContent:props.chatDetail.content,timestamp:props.chatDetail.timestamp,partner_fullname:props.chatDetail.partner_fullname,partner_id:props.chatDetail.partner_id,chatDetailRef:props.chatDetailRef}),props.userFptId!==Object(liveStream.d)(props.chatDetail.partner_id)&&react_default.a.createElement(LiveStreamMessage_BlockChatSenLiveAction,{className:LiveStreamMessage_default.a.hoverActions,partner_fullname:props.chatDetail.partner_fullname,partner_fpt_id:Object(liveStream.d)(props.chatDetail.partner_id)})))};Detail_LiveStreamMessage_LiveStreamMessage.displayName="LiveStreamMessage";var Detail_LiveStreamMessage=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{userFptId:state.auth.userInfo.fpt_id}}),null))(Detail_LiveStreamMessage_LiveStreamMessage),QuoteByInfo_QuoteByInfo=__webpack_require__("biKn"),QuoteByInfo_default=__webpack_require__.n(QuoteByInfo_QuoteByInfo),Detail_QuoteByInfo_QuoteByInfo=function(props){var _cx;var from=props.quote.created_by;props.quote.created_by_fpt_id===props.userInfo.fpt_id&&(from="B\u1ea1n");var className,to=props.quote.msg_created_by;return props.quote.msg_created_by_fpt_id===props.userInfo.fpt_id&&(to="b\u1ea1n"),react_default.a.createElement("div",{className:classnames_default()((className=QuoteByInfo_default.a.quoteByInfo,Object(helpers_styles.a)(QuoteByInfo_default.a,className,props.isOnWAP)),(_cx={},_cx[QuoteByInfo_default.a.isOwner]=props.isOwner,_cx))},react_default.a.createElement("span",null,from," \u0111\xe3 tr\u1ea3 l\u1eddi ",to))};Detail_QuoteByInfo_QuoteByInfo.displayName="QuoteByInfo";var Detail_QuoteByInfo=Detail_QuoteByInfo_QuoteByInfo,ai_get_started=__webpack_require__("k/aL"),ai_get_started_default=__webpack_require__.n(ai_get_started),AIGetStarted_AIGetStarted=__webpack_require__("Rsme"),AIGetStarted_default=__webpack_require__.n(AIGetStarted_AIGetStarted),Detail_AIGetStarted_AIGetStarted=function(props){function getResponsiveStyles(className){return Object(helpers_styles.a)(AIGetStarted_default.a,className,props.isOnWAP)}Object(react.useEffect)((function(){setTimeout((function(){props.scrollToBottom()}),100)}),[]);return react_default.a.createElement("div",{className:classnames_default()(getResponsiveStyles(AIGetStarted_default.a.AIGetStarted))},react_default.a.createElement("img",{className:AIGetStarted_default.a.logo,src:ai_get_started_default.a,alt:"default get started"}),react_default.a.createElement("div",{className:AIGetStarted_default.a.content},react_default.a.createElement(ChatListView_Avatar,{className:AIGetStarted_default.a.avatarContainer,isOnlyDisplayAvatar:!0,conversation:props.conversation}),react_default.a.createElement("div",{className:classnames_default()(getResponsiveStyles(AIGetStarted_default.a.introduce))},react_default.a.createElement(ChatMessage_TextMessage,{textContent:"Tr\u1ee3 l\xfd \u1ea3o Sendo s\u1eed d\u1ee5ng c\xf4ng ngh\u1ec7 tr\xed th\xf4ng minh nh\xe2n t\u1ea1o (AI) t\xedch h\u1ee3p c\xe1c t\xednh n\u0103ng v\u01b0\u1ee3t tr\u1ed9i v\u1edbi c\xf4ng ngh\u1ec7 c\u1ee7a Sendo:\n- T\xecm ki\u1ebfm c\xe1c s\u1ea3n ph\u1ea9m tr\xean s\xe0n TM\u0110T Sendo\n- Ki\u1ec3m tra th\xf4ng tin \u0111\u01a1n h\xe0ng, ch\u01b0\u01a1ng tr\xecnh khuy\u1ebfn m\xe3i,...\n\nCh\u1ecdn B\u1eaft \u0110\u1ea7u \u0111\u1ec3 chat ngay v\u1edbi Tr\u1ee3 l\xfd \u1ea3o Sendo b\u1ea1n nh\xe9!",isOnWAP:props.isOnWAP}))))};Detail_AIGetStarted_AIGetStarted.displayName="AIGetStarted";var Detail_AIGetStarted=Detail_AIGetStarted_AIGetStarted,AIGetStartedButton_AIGetStartedButton=__webpack_require__("eAY3"),AIGetStartedButton_default=__webpack_require__.n(AIGetStartedButton_AIGetStartedButton),Detail_AIGetStartedButton_AIGetStartedButton=function(props){return react_default.a.createElement("button",{onClick:props.onClick,className:AIGetStartedButton_default.a.AIGetStartedButton},setting.g.FIRST_MESSAGE)};Detail_AIGetStartedButton_AIGetStartedButton.displayName="AIGetStartedButton";var Detail_AIGetStartedButton=Detail_AIGetStartedButton_AIGetStartedButton;function Detail_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Detail_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Detail_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Detail_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var Detail_ref=react_default.a.createElement(BackToList,null),Detail_ref2=react_default.a.createElement(Loading.a,null),Detail_ref3=react_default.a.createElement("span",null,"\u0110ang k\u1ebft n\u1ed1i \u0111\u1ebfn m\xe1y ch\u1ee7..."),Detail_ref4=react_default.a.createElement(Loading.a,{isSmall:!0}),Detail_ref5=react_default.a.createElement(Detail_TypingIndicator,null),Detail_ChatDetail=function(_Component){function ChatDetail(props,_context){var _this;return _this=_Component.call(this,props,_context)||this,defineProperty_default()(assertThisInitialized_default()(_this),"onScrollMsgList",(function(event){if(_this.msgRef.current){var context=assertThisInitialized_default()(_this),stoppedScrollChecker=null;null!==stoppedScrollChecker&&(clearTimeout(stoppedScrollChecker),context.isScrolling||(context.isScrolling=!0)),stoppedScrollChecker=setTimeout((function(){context.isScrolling=!1,context.updateAutoScrollToBottom(),context.state.isFirstTimeLoad&&(context.isStopAutoLoad=!1,context.endLoadChat=!1,context.lengthChatDetail=0,context.setState({isShowLoadMoreBtn:!1}));var totalLoadedMessage=Object(get.a)(context.props,"chatDetails.length",0);context.lengthChatDetail=totalLoadedMessage,context.isNeedLoadPreviousChatDetail()?(totalLoadedMessage>=setting.w&&context.setState({isLoadingMoreDetail:!0}),context.loadPreviousChatDetail()):0!==context.msgRef.current.scrollTop||context.endLoadChat||(context.isStopAutoLoad=!0,context.setState({isShowLoadMoreBtn:!0})),context.state.isFirstTimeLoad&&context.setState(Detail_objectSpread({},context.state,{isFirstTimeLoad:!1})),context.saveCurrentScrollState()}),150)}})),defineProperty_default()(assertThisInitialized_default()(_this),"onWheelMsgList",(function(e){_this.isScrolledByUser||(_this.isScrolledByUser=!0)})),defineProperty_default()(assertThisInitialized_default()(_this),"onTouchStartMsgList",(function(event){event.stopPropagation(),1===event.targetTouches.length&&(_this.lastSingleTouchPositionY=event.targetTouches[0].clientY)})),defineProperty_default()(assertThisInitialized_default()(_this),"onTouchMoveMsgList",(function(event){event.stopPropagation(),1===event.targetTouches.length&&disableRubberBand(_this.msgRef.current,event,_this.lastSingleTouchPositionY),_this.isScrolledByUser||(_this.isScrolledByUser=!0)})),defineProperty_default()(assertThisInitialized_default()(_this),"onDropRejected",(function(){_this.setState({dropzoneActive:!1})})),defineProperty_default()(assertThisInitialized_default()(_this),"onDropAccepted",(function(acceptedFiles){var conversation,userInfo,parentContextData,currentTopic,messageSender;return regenerator_default.a.async((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!_this.props.isCreatingAsyncMessage){_context2.next=2;break}return _context2.abrupt("return");case 2:return _this.setState({dropzoneActive:!1}),conversation=Object(get.a)(_this.props,"conversation",{}),userInfo=Object(get.a)(_this.props,"userInfo",{}),parentContextData=Object(get.a)(_this.props,"messageDisplayBox.parentContextData",null),currentTopic=Object(get.a)(_this.props,"currentTopic",null),(messageSender=new MessageSender_MessageSender).init(conversation,userInfo,parentContextData,currentTopic,_this.props.chatActions,_this.props.isHaveTopicMsgInDetails),_context2.next=11,regenerator_default.a.awrap(messageSender.sendImage(acceptedFiles));case 11:_this.props.messageDisplayBoxActions.markNotScrolledForImages(),_this.props.messageDisplayBoxActions.enableAutoScrollToBottom();case 13:case"end":return _context2.stop()}}))})),defineProperty_default()(assertThisInitialized_default()(_this),"isChangedConversation",(function(prevProps){var prevConversation=Object(get.a)(prevProps,"conversation",{}),currentConversation=Object(get.a)(_this.props,"conversation",{});return prevConversation.chat_id!==currentConversation.chat_id})),defineProperty_default()(assertThisInitialized_default()(_this),"isNeedRestoreScrollTopSenLive",(function(prevProps){return!!(!_this.props.isLoadingDetail&&_this.props.chatDetails.length&&_this.msgRef.current&&_this.props.conversation.chat_id&&_this.props.chatSystemType===res_const.f.SENLIVE&&_this.props.savedChattingSenLiveState.conversation.chat_id&&_this.props.conversation.chat_id===_this.props.savedChattingSenLiveState.conversation.chat_id)})),defineProperty_default()(assertThisInitialized_default()(_this),"isNeedRestoreScrollTopChat",(function(prevProps){return!!(!_this.props.isLoadingDetail&&_this.props.chatDetails.length&&_this.msgRef.current&&_this.props.conversation.chat_id&&_this.props.chatSystemType===res_const.f.CHAT&&_this.props.savedChattingChatState.conversation.chat_id&&_this.props.conversation.chat_id===_this.props.savedChattingChatState.conversation.chat_id)})),defineProperty_default()(assertThisInitialized_default()(_this),"isHaveParentContextData",(function(){return!!Object(get.a)(_this.props,"messageDisplayBox.parentContextData.chat_id","")})),defineProperty_default()(assertThisInitialized_default()(_this),"isOpenChatFromClosed",(function(prevProps){return prevProps.app.chatWindowStatus===res_const.k.APP.CHAT_WINDOW_STATUS.CLOSED&&_this.props.app.chatWindowStatus===res_const.k.APP.CHAT_WINDOW_STATUS.OPENED||prevProps.app.isOnWAP!==_this.props.app.isOnWAP})),defineProperty_default()(assertThisInitialized_default()(_this),"initImageWaitForLoadedWhenNeeded",(function(prevProps){var prevChatDetails=Object(get.a)(prevProps,"chatDetails",[]),currentChatDetails=Object(get.a)(_this.props,"chatDetails",[]);if(!prevChatDetails.length&&currentChatDetails.length){var totalFirstLoadImages=Object(reduce.a)(_this.props.chatDetails,(function(count,item){var itemType=Object(get.a)(item,"message_object.type","");return Object(get.a)(item,"clientInfo.isFirstLoad",!1)&&itemType===res_const.q.IMAGE?count+1:count}),0);totalFirstLoadImages&&(_this.totalFirstLoadImages=totalFirstLoadImages,_this.totalFirstLoadImagesLoaded=0)}})),defineProperty_default()(assertThisInitialized_default()(_this),"isDisplayAIGetStarted",(function(prevProps){return Boolean(_this.props.conversation.chat_id===ChiDaiHelper.b.getDefaultChiDaiInfo().chat_id&&!_this.props.isLoadingDetail&&!_this.props.chatDetails.length)})),defineProperty_default()(assertThisInitialized_default()(_this),"isDisplayChatFormForSenLive",(function(conversation){return conversation.message_type!==res_const.s.LIVESTREAM||conversation.streaming_status===res_const.C.LIVE})),defineProperty_default()(assertThisInitialized_default()(_this),"isDisplayChatForm",(function(){return _this.isDisplayChatFormForSenLive(_this.props.conversation)&&!_this.isDisplayAIGetStarted()})),defineProperty_default()(assertThisInitialized_default()(_this),"sendGetStartedBotMsg",(function(){_this.sendMessage(setting.g.FIRST_MESSAGE)})),defineProperty_default()(assertThisInitialized_default()(_this),"restoreScrollTopSenLive",(function(){_this.msgRef.current.scrollTop=_this.props.savedChattingSenLiveState.scrollTop})),defineProperty_default()(assertThisInitialized_default()(_this),"restoreScrollTopChat",(function(){_this.msgRef.current.scrollTop=_this.props.savedChattingChatState.scrollTop})),defineProperty_default()(assertThisInitialized_default()(_this),"shouldLoadPrevious",(function(prevProps){return!Object(get.a)(prevProps,"chatDetails",[]).length&&_this.props.paging.count===setting.w&&_this.msgRef.current.clientHeight&&_this.msgRef.current.scrollHeight<=_this.msgRef.current.clientHeight})),defineProperty_default()(assertThisInitialized_default()(_this),"shouldAutoScrollToBottom",(function(){var currentConversation=Object(get.a)(_this.props,"conversation",{}),currentShouldAutoScroll=Object(get.a)(_this.props,"messageDisplayBox.scrollStatus.shouldAutoScroll",!1),currentChatDetails=Object(get.a)(_this.props,"chatDetails",[]);return currentConversation.chat_id&&currentShouldAutoScroll&&currentChatDetails.length&&_this.msgRef.current.scrollHeight>_this.msgRef.current.clientHeight&&(currentConversation.chat_id!==_this.props.savedChattingSenLiveState.conversation.chat_id&&_this.props.chatSystemType===res_const.f.SENLIVE||currentConversation.chat_id!==_this.props.savedChattingChatState.conversation.chat_id&&_this.props.chatSystemType===res_const.f.CHAT)})),defineProperty_default()(assertThisInitialized_default()(_this),"shouldMarkSeenMsg",(function(){var currentConversation=Object(get.a)(_this.props,"conversation",null),currentApp=Object(get.a)(_this.props,"app",{}),isNotConnectedXmpp=Boolean(currentApp.networkStatus===res_const.k.APP.NETWORK_STATUS.OFFLINE||currentApp.xmppStatus===res_const.k.APP.XMPP_STATUS.DISCONNECTED),shouldMarkSeenMessage=Boolean(currentConversation&&!Object(chatHelper.v)(currentConversation)&&!isNotConnectedXmpp&&currentApp.chatWindowStatus===res_const.k.APP.CHAT_WINDOW_STATUS.OPENED),currentShouldAutoScroll=Object(get.a)(_this.props,"messageDisplayBox.scrollStatus.shouldAutoScroll",!1),currentChatDetails=Object(get.a)(_this.props,"chatDetails",[]);return currentConversation.chat_id&&currentShouldAutoScroll&&currentChatDetails.length&&shouldMarkSeenMessage})),defineProperty_default()(assertThisInitialized_default()(_this),"setFirstTimeLoad",(function(){if(_this.setState({isFirstTimeLoad:!0,isShowMessage:!1,isShowToolTip:!1,showToolTip:_this.state.showToolTip+1,isShowLoadMoreBtn:!1,isDisableLoadMoreBtn:!1}),_this.scrollToBottom(),clearTimeout(_this.showMessageTime),clearTimeout(_this.showToolTip),_this.state.showToolTip<2){var context=assertThisInitialized_default()(_this);context.setState({isShowToolTip:!0}),_this.showToolTip=setTimeout((function(){context.setState({isShowToolTip:!1})}),2e3)}})),defineProperty_default()(assertThisInitialized_default()(_this),"autoFocusInput",(function(){var context=assertThisInitialized_default()(_this),autoFocusInterval=setInterval((function(){context.inputChatMessageRef&&(clearInterval(autoFocusInterval),context.inputChatMessageRef.focus())}),1e3)})),defineProperty_default()(assertThisInitialized_default()(_this),"saveCurrentScrollState",(function(){_this.msgRef.current&&_this.props.chatActions.saveCurrentScrollState(_this.msgRef.current.scrollTop)})),defineProperty_default()(assertThisInitialized_default()(_this),"updateAutoScrollToBottom",(function(){if(_this.msgRef.current){var currentMsgRef=_this.msgRef.current;if(currentMsgRef){var isBottomScrolled=Boolean(currentMsgRef.scrollTop+currentMsgRef.clientHeight>=currentMsgRef.scrollHeight);isBottomScrolled&&(_this.props.messageDisplayBoxActions.enableAutoScrollToBottom(),_this.isScrolledByUser=!1),isBottomScrolled||!_this.isScrolledByUser||_this.state.isFirstTimeLoad||(_this.props.messageDisplayBoxActions.disableAutoScroll(),_this.isScrolledByUser=!1)}}})),defineProperty_default()(assertThisInitialized_default()(_this),"isNeedLoadPreviousChatDetail",(function(){if(!_this.msgRef.current)return!1;var isTopScrolled=Boolean(!_this.msgRef.current.scrollTop);return Boolean(isTopScrolled&&!_this.state.isFirstTimeLoad&&!_this.props.isLoadingDetail&&!_this.props.isLoadedLastDetail&&!_this.isStopAutoLoad)})),defineProperty_default()(assertThisInitialized_default()(_this),"isNeedMarkFirstTimeLoad",(function(prevProps){var currentParentContextDataChatId=Object(get.a)(_this.props,"messageDisplayBox.parentContextData.chat_id",""),prevConversation=Object(get.a)(prevProps,"conversation",{}),currentConversation=Object(get.a)(_this.props,"conversation",{}),isActiveNewConversation=Boolean(prevConversation.chat_id!==currentConversation.chat_id);return Boolean(isActiveNewConversation||currentParentContextDataChatId)})),defineProperty_default()(assertThisInitialized_default()(_this),"markFirstTimeLoad",(function(){_this.setState({isFirstTimeLoad:!0})})),defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(className){var isOnWAP=Object(get.a)(_this.props,"app.isOnWAP",!1);return Object(helpers_styles.a)(Detail_style_default.a,className,isOnWAP)})),defineProperty_default()(assertThisInitialized_default()(_this),"updateListChatHeight",(function(){if(_this.props.app.isOnWAP){var heightValue=window.innerHeight-131;_this.setState({msgListStyle:Detail_objectSpread({},_this.state.msgListStyle,{height:heightValue+"px"})})}})),defineProperty_default()(assertThisInitialized_default()(_this),"bindInputChatMessageRef",(function(inputChatMessageRef){inputChatMessageRef&&(_this.inputChatMessageRef=inputChatMessageRef)})),defineProperty_default()(assertThisInitialized_default()(_this),"onClickLoadMore",(function(e){if(_this.msgRef.current){_this.updateAutoScrollToBottom();var chatId=Object(get.a)(_this.props,"conversation.chat_id","");if(chatId){var paging=Object(get.a)(_this.props,"paging.after",0),currentMsgRef=_this.msgRef.current,lastScrollTop=currentMsgRef.scrollHeight,fetchDetailType=res_const.d.DEFAULT;_this.props.chatSystemType===res_const.f.SENLIVE&&(fetchDetailType=res_const.d.LIVESTREAM,paging=_this.props.paging),_this.setState({isDisableLoadMoreBtn:!0}),_this.props.xmppActions.fetchHistoryDetailAsync(chatId,{type:fetchDetailType,paging:paging},setting.d.VERSION_LOAD_MORE,!0).then((function(){_this.setState({isDisableLoadMoreBtn:!1}),currentMsgRef.scrollTop=currentMsgRef.scrollHeight-lastScrollTop;var totalChatDetail=Object(get.a)(_this.props,"chatDetails.length",0),limit=setting.w;_this.props.app.isOnWAP&&(limit=setting.x),paging&&(limit*=2);var newMessagesLoaded=totalChatDetail-_this.lengthChatDetail;if(newMessagesLoaded<limit)if(_this.endLoadChat=!0,0===newMessagesLoaded){_this.setState({isShowLoadMoreBtn:!1,isShowMessage:!0});var context=assertThisInitialized_default()(_this);_this.showMessageTime=setTimeout((function(){context.setState({isShowMessage:!1})}),2e3)}else _this.setState({isShowLoadMoreBtn:!1,isShowMessage:!1});_this.lengthChatDetail=totalChatDetail}))}}})),defineProperty_default()(assertThisInitialized_default()(_this),"sendMessage",(function(text,postback,replyInHidden){void 0===postback&&(postback=""),void 0===replyInHidden&&(replyInHidden=!1);var conversation=Object(get.a)(_this.props,"conversation",{}),userInfo=Object(get.a)(_this.props,"userInfo",{}),parentContextData=Object(get.a)(_this.props,"messageDisplayBox.parentContextData",null),currentTopic=Object(get.a)(_this.props,"currentTopic",null),messageSender=new MessageSender_MessageSender;messageSender.init(conversation,userInfo,parentContextData,currentTopic,_this.props.chatActions,_this.props.isHaveTopicMsgInDetails),messageSender.sendText(text,postback,replyInHidden),_this.props.messageDisplayBoxActions.enableAutoScrollToBottom()})),defineProperty_default()(assertThisInitialized_default()(_this),"scrollToBottom",(function(){null!==_this.msgRef.current&&void 0!==_this.msgRef.current&&(_this.msgRef.current.scrollTop=_this.msgRef.current.scrollHeight)})),defineProperty_default()(assertThisInitialized_default()(_this),"handleBackToListClick",(function(){_this.props.messageDisplayBoxActions.disableAutoScroll(),_this.goBackMenu()})),defineProperty_default()(assertThisInitialized_default()(_this),"handleImageLoaded",(function(message){message.isImageNeedScroll&&!_this.props.messageDisplayBox.alreadyScrollLatestImage&&(_this.totalFirstLoadImagesLoaded=_this.totalFirstLoadImagesLoaded+1,_this.totalFirstLoadImagesLoaded>=_this.totalFirstLoadImages&&_this.props.messageDisplayBox.scrollStatus.shouldAutoScroll&&setTimeout((function(){_this.scrollToBottom(),_this.props.messageDisplayBoxActions.alreadyScrollLatestImage()}),150))})),defineProperty_default()(assertThisInitialized_default()(_this),"renderMessageType",(function(chatDetail){var result="";switch(chatDetail.message_type){case res_const.s.TOPIC:var firstTopicItemId=Object(get.a)(chatDetail,"topic.items.0.id","");chatDetail.topic&&chatDetail.topic.type!==res_const.E.SHOP&&firstTopicItemId&&(result=react_default.a.createElement(Chat_TopicMessage,{styles:Detail_style_default.a.wrapperTopic,topic:chatDetail.topic,isOnWAP:_this.props.app.isOnWAP,userInfo:_this.props.userInfo}));break;case res_const.s.LIVESTREAM:result=react_default.a.createElement(Detail_LiveStreamMessage,{chatDetail:chatDetail,chatDetailRef:_this.msgRef});break;case res_const.s.AUTO_REPLY:case res_const.s.MESSAGE:default:if(chatDetail.message_object){var _cx,isDisplayQuoteByInfo=Boolean(chatDetail.message_object&&chatDetail.message_object.type===res_const.q.QUOTE);result=react_default.a.createElement(react.Fragment,null,isDisplayQuoteByInfo&&react_default.a.createElement(Detail_QuoteByInfo,{quote:chatDetail.message_object.quote,userInfo:_this.props.userInfo,isOwner:Boolean(chatDetail.is_owner)}),react_default.a.createElement("div",{className:classnames_default()((_cx={},_cx[Detail_style_default.a.isread]=!!chatDetail.is_read,_cx[Detail_style_default.a.isowner]=!!chatDetail.is_owner,_cx[Detail_style_default.a.onWAP]=!!_this.props.app.isOnWAP,_cx),Detail_style_default.a.msgContent)},react_default.a.createElement(Detail_ChatMessage,{sendMessage:_this.sendMessage,chatDetail:chatDetail,isOnWAP:_this.props.app.isOnWAP,handleImageLoaded:_this.handleImageLoaded})),chatDetail.isDisplayAIQuickReplies&&react_default.a.createElement(ChatMessage_AIQuickReplies,{message:chatDetail,isOnWAP:_this.props.app.isOnWAP,sendMessage:_this.sendMessage}))}}return result})),defineProperty_default()(assertThisInitialized_default()(_this),"renderMessageStatus",(function(chatDetail){var _cx3,statusText="";switch(chatDetail.message_status){case res_const.r.FAILED:statusText=res_text.b.CHAT_MSG.STATUS.NOT_SENT;var errorType=Object(get.a)(chatDetail,"clientInfo.error.type",-1);Object(get.a)(chatDetail,"clientInfo.error.msg","")&&(statusText=chatDetail.clientInfo.errorMsg,errorType===res_const.k.MSG_DETAIL.ERROR_TYPE.IMAGE&&(statusText=chatDetail.clientInfo.errorMsg));break;case res_const.r.SENDING:statusText=res_text.b.CHAT_MSG.STATUS.SENDING;break;case res_const.r.SELLER_UNREAD_BUYER_SEEN_AUTO_REPLY:case res_const.r.PARTNER_UNSEEN:case res_const.r.SENT:case res_const.r.PARTNER_SEEN:var _cx2;statusText=res_text.b.CHAT_MSG.STATUS.SENT;var iconStatus=sent_default.a;return chatDetail.message_status!==res_const.r.PARTNER_SEEN&&chatDetail.message_status!==res_const.r.SELLER_UNREAD_BUYER_SEEN_AUTO_REPLY||(statusText=res_text.b.CHAT_MSG.STATUS.INFO.HAVE_READ,iconStatus=seen_default.a),react_default.a.createElement("div",{className:classnames_default()((_cx2={},_cx2[Detail_style_default.a.isowner]=!!chatDetail.is_owner,_cx2),Detail_style_default.a.messageStatus,Detail_style_default.a.iconStatus)},react_default.a.createElement("img",{src:iconStatus,alt:"seen-icon"})," ",statusText);case res_const.r.SELLER_UNREAD_BUYER_UNSEEN_AUTO_REPLY:case res_const.r.OWNER_UNREAD:case res_const.r.OWNER_READ:}return react_default.a.createElement("div",{className:classnames_default()((_cx3={},_cx3[Detail_style_default.a.isowner]=!!chatDetail.is_owner,_cx3),Detail_style_default.a.messageStatus)},statusText)})),defineProperty_default()(assertThisInitialized_default()(_this),"renderListDetail",(function(){if(_this.props.chatDetails&&_this.props.chatDetails.length)return _this.props.chatDetails.map((function(item,itemIndex){var _cx4;if(item.message_type===res_const.s.TIME_DIVIDER){var _keyItem="time_divider_"+itemIndex;return react_default.a.createElement("div",{key:_keyItem,className:Detail_style_default.a.timeDidiver},react_default.a.createElement("span",{className:Detail_style_default.a.text},item.text))}var chatDetail=Detail_objectSpread({},item,{message_object:Detail_objectSpread({},item.message_object)}),msgType=Object(get.a)(chatDetail,"message_object.type",""),msgIsFirstLoad=Object(get.a)(chatDetail,"clientInfo.isFirstLoad",!1);(msgType===res_const.q.IMAGE&&msgIsFirstLoad||chatDetail.isNewImage)&&(chatDetail.message_object.isImageNeedScroll=!0);var keyItem=chatDetail.message_id+"_"+itemIndex+"_"+chatDetail.message_type,isErrorMessage=Boolean(chatDetail.message_status===res_const.r.FAILED);return react_default.a.createElement("div",{key:keyItem,className:classnames_default()(_this.getResponsiveStyles(Detail_style_default.a.item),(_cx4={},_cx4[Detail_style_default.a.errorMessage]=isErrorMessage,_cx4[Detail_style_default.a.isOwner]=!!chatDetail.is_owner,_cx4))},_this.renderMessageType(chatDetail),Boolean(chatDetail.isDisplayStatus)&&_this.renderMessageStatus(chatDetail))}))})),defineProperty_default()(assertThisInitialized_default()(_this),"getHeaderText",(function(){var conversation=Object(get.a)(_this.props,"conversation",{});return _this.props.shopInfos[conversation.shop_id]?react_default.a.createElement("a",{href:_this.props.shopInfos[conversation.shop_id].shop_url,target:"_blank",rel:"noopener noreferrer"},react_default.a.createElement("span",null,conversation.partner_fullname)):conversation.partner_fullname})),_this.state={accept:"image/*",dropzoneActive:!1,isFirstTimeLoad:!0,isLoadingMoreDetail:!1,isShowLoadMoreBtn:!1,isShowMessage:!1,showToolTip:0,isShowToolTip:!1,isDisableLoadMoreBtn:!1,msgListStyle:{height:"387px"}},_this.totalFirstLoadImages=0,_this.totalFirstLoadImagesLoaded=0,_this.msgRef=react_default.a.createRef(),_this.dzopzoneRef=react_default.a.createRef(),_this.onScrollMsgList=Object(debounce.a)(_this.onScrollMsgList,80),_this.inputChatMessageRef=null,_this.isScrolling=!1,_this.isStopAutoLoad=!1,_this.lengthChatDetail=0,_this.endLoadChat=!1,_this.showMessageTime=null,_this.showToolTip=null,_this.lastSingleTouchPositionY=0,_this.isScrolledByUser=!1,_this}inheritsLoose_default()(ChatDetail,_Component);var _proto=ChatDetail.prototype;return _proto.componentDidMount=function(){this.updateListChatHeight(),this.msgRef.current.addEventListener("scroll",this.onScrollMsgList)},_proto.componentDidUpdate=function(prevProps){(this.isChangedConversation(prevProps)||this.isHaveParentContextData())&&this.setFirstTimeLoad(),this.shouldLoadPrevious(prevProps)&&this.loadPreviousChatDetail(),this.shouldAutoScrollToBottom()&&this.scrollToBottom(),this.isNeedRestoreScrollTopSenLive(prevProps)&&this.restoreScrollTopSenLive(),this.isNeedRestoreScrollTopChat(prevProps)&&this.restoreScrollTopChat(),this.shouldMarkSeenMsg()&&this.sendSeenMessage(prevProps),!this.isChangedConversation(prevProps)&&!this.isOpenChatFromClosed(prevProps)||this.props.app.isOnWAP||this.autoFocusInput(),this.isOpenChatFromClosed(prevProps)&&this.updateListChatHeight(),this.initImageWaitForLoadedWhenNeeded(prevProps)},_proto.componentWillUnmount=function(){this.msgRef.current.removeEventListener("scroll",null)},_proto.onDragEnter=function(e){this.setState({dropzoneActive:!0})},_proto.onDragLeave=function(){this.setState({dropzoneActive:!1})},_proto.onOpenUploadFile=function(){this.props.isCreatingAsyncMessage||this.dzopzoneRef.current.open()},_proto.loadPreviousChatDetail=function(){var _this2=this;if(this.msgRef.current){var chatId=Object(get.a)(this.props,"conversation.chat_id","");if(chatId){var paging=Object(get.a)(this.props,"paging.after",0),currentMsgRef=this.msgRef.current,lastScrollTop=currentMsgRef.scrollHeight,fetchDetailType=res_const.d.DEFAULT;this.props.chatSystemType===res_const.f.SENLIVE&&(fetchDetailType=res_const.d.LIVESTREAM,paging=this.props.paging),this.props.xmppActions.fetchHistoryDetailAsync(chatId,{type:fetchDetailType,paging:paging},setting.d.VERSION,!0).then((function(){_this2.setState({isLoadingMoreDetail:!1});var newScrollTop=currentMsgRef.scrollHeight-lastScrollTop,totalChatDetail=Object(get.a)(_this2.props,"chatDetails.length",0);_this2.lengthChatDetail===totalChatDetail?(_this2.setState({isShowLoadMoreBtn:!0}),_this2.isStopAutoLoad=!0):_this2.lengthChatDetail=totalChatDetail,currentMsgRef.scrollTop=newScrollTop}))}}},_proto.sendSeenMessage=function(){var userInfo=Object(get.a)(this.props,"userInfo",{}),conversation=Object(get.a)(this.props,"conversation",{}),currentChatDetails=Object(get.a)(this.props,"chatDetails",[]),message=Object(last.a)(currentChatDetails),receiver=xmpp.i(conversation);receiver.partner_id||(receiver.partner_id=message.partner_id);var seenData={receiver:receiver,message:message,sender:userInfo};this.props.chatActions.sendSeenMessage(seenData)},_proto.goBackMenu=function(){this.props.chatActions.clearConversation(),this.props.appActions.hideChatDetail(),this.props.appActions.displayChatList(),this.props.appActions.changeMobileStep(res_const.k.APP.MOBILE.STEP.CHAT_LIST)},_proto.getStatus=function(conversation){return Object(get.a)(this.props.listStatus[conversation.partner_id],"status","")},_proto.getStatusText=function(conversation){var statusText="Kh\xf4ng tr\u1ef1c tuy\u1ebfn",partnerStatus=this.props.listStatus[conversation.partner_id];if("available"===Object(get.a)(partnerStatus,"status","unavailable"))return statusText="\u0110ang tr\u1ef1c tuy\u1ebfn",Object(ChiDaiHelper.f)(conversation)&&(statusText="B\u1ea1n c\u1ea7n h\u1ed7 tr\u1ee3 g\xec kh\xf4ng?"),statusText;var responseRateText=Object(chatHelper.o)(conversation,this.props.listStatus);if(responseRateText)return responseRateText;var lastOnlineTimeStampSecond=Object(get.a)(partnerStatus,"last_access_time",0);if(lastOnlineTimeStampSecond){var lastOnlineTimeStampMilisecond=1e3*lastOnlineTimeStampSecond;statusText="Ho\u1ea1t \u0111\u1ed9ng g\u1ea7n nh\u1ea5t c\xe1ch \u0111\xe2y "+Object(onlineTimeSince.a)(lastOnlineTimeStampMilisecond)}return statusText},_proto.render=function(){var _cx5,_cx6,_cx7,_cx8,_cx9,_cx10,_cx11,_cx12,_cx13,_this3=this,conversation=Object(get.a)(this.props,"conversation",{}),accept=this.state.accept,isDisplayNetworkStatus=Boolean(this.props.app.networkStatus===res_const.k.APP.NETWORK_STATUS.OFFLINE||this.props.app.xmppStatus===res_const.k.APP.XMPP_STATUS.DISCONNECTED),isHideRightPanel=Boolean(!conversation||!conversation.chat_id)&&!this.props.messageDisplayBox.parentContextData.isNew,isDisplayAppError=!isDisplayNetworkStatus&&!isHideRightPanel&&this.props.app.error.isDisplay,isOnWAP=Object(get.a)(this.props,"app.isOnWAP",!1),shouldDisplayLoadingMoreDetail=this.state.isLoadingMoreDetail&&!this.props.shouldDisplayLoadingDetail,isDisplayTyping=Boolean(Object(ChiDaiHelper.f)(conversation)&&this.props.isChiDaiTyping),isDisplayBlankMsg=Boolean(!this.props.conversation.chat_id&&!this.props.isLoadingDetail||this.props.chatSystemType===res_const.f.SENLIVE&&this.props.conversation.streaming_status!==res_const.C.LIVE&&!this.props.chatDetails.length&&!this.props.isLoadingDetail);return react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(Detail_style_default.a.container))},isOnWAP&&react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(Detail_style_default.a.header))},react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.backToListMenuMobile),onClick:this.handleBackToListClick},Detail_ref),!isHideRightPanel&&react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.headerRight)},react_default.a.createElement("h3",{className:classnames_default()(Detail_style_default.a.fullname)},this.getHeaderText()),react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.info)},react_default.a.createElement("label",{className:classnames_default()(Detail_style_default.a.status,Detail_style_default.a[this.getStatus(conversation)])},this.getStatusText(conversation))))),react_default.a.createElement(dist_default.a,{ref:this.dzopzoneRef,disableClick:!0,multiple:!1,className:classnames_default()((_cx5={},_cx5[Detail_style_default.a.hideBoth]=isHideRightPanel||isDisplayBlankMsg,_cx5),this.getResponsiveStyles(Detail_style_default.a.dropzone)),accept:accept,onDropAccepted:this.onDropAccepted,onDropRejected:this.onDropRejected,onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),inputProps:{className:classnames_default()((_cx6={},_cx6[Detail_style_default.a.hide]=isOnWAP,_cx6))}},!!this.props.shouldDisplayLoadingDetail&&Detail_ref2,isDisplayNetworkStatus&&!isHideRightPanel&&react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.errorStatus)},Detail_ref3),isDisplayAppError&&react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.errorStatus)},react_default.a.createElement("span",null,this.props.app.error.message)),react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(Detail_style_default.a.list),(_cx7={},_cx7[Detail_style_default.a.hide]=this.props.shouldDisplayLoadingDetail,_cx7[Detail_style_default.a.loadingMore]=shouldDisplayLoadingMoreDetail,_cx7)),ref:this.msgRef,style:this.state.msgListStyle,onWheel:this.onWheelMsgList,onTouchMove:this.onTouchMoveMsgList,onTouchStart:this.onTouchStartMsgList},react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(Detail_style_default.a.chatContainer),(_cx8={},_cx8[Detail_style_default.a.livestream]=Boolean(conversation.message_type===res_const.s.LIVESTREAM),_cx8[Detail_style_default.a.previewContentPlaceHolder]=!Object(msgDetail.g)(this.props.currentTopic,this.props.messageDisplayBox.parentContextData,this.props.isHaveTopicMsgInDetails),_cx8))},this.isDisplayAIGetStarted()&&react_default.a.createElement(Detail_AIGetStarted,{scrollToBottom:this.scrollToBottom,conversation:conversation,isOnWAP:isOnWAP}),!this.isDisplayAIGetStarted()&&chatHelper.g.getActiveChatColdDB()&&react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.blockTooltip,"fade",(_cx9={},_cx9[Detail_style_default.a.in]=!0===this.state.isShowToolTip,_cx9))},react_default.a.createElement("label",{className:Detail_style_default.a.textAlert},"Cu\u1ed9n l\xean \u0111\u1ec3 xem tin nh\u1eafn c\u0169 h\u01a1n")),!this.isDisplayAIGetStarted()&&chatHelper.g.getActiveChatColdDB()&&react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.blockAlert,Detail_style_default.a.fadeOut,(_cx10={},_cx10[Detail_style_default.a.fadeIn]=!0===this.state.isShowMessage,_cx10))},react_default.a.createElement("label",{className:Detail_style_default.a.textAlert},"Kh\xf4ng c\xf2n tin nh\u1eafn c\u0169 h\u01a1n")),!this.isDisplayAIGetStarted()&&chatHelper.g.getActiveChatColdDB()&&react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.blockLoadMore,(_cx11={},_cx11[Detail_style_default.a.hide]=!1===this.state.isShowLoadMoreBtn,_cx11))},react_default.a.createElement("label",{className:classnames_default()(Detail_style_default.a.labelLoadMore)},"Hi\u1ec3n th\u1ecb l\u1ecbch s\u1eed tin nh\u1eafn c\u0169 h\u01a1n"),!this.state.isDisableLoadMoreBtn&&react_default.a.createElement("button",{onClick:this.onClickLoadMore,className:classnames_default()(Detail_style_default.a.btnLoadMore,"btn btn-link")},"Xem"),this.state.isDisableLoadMoreBtn&&react_default.a.createElement("span",{className:classnames_default()(Detail_style_default.a.loader,Detail_style_default.a.loadingLoadMore)})),shouldDisplayLoadingMoreDetail&&react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.loadMore)},Detail_ref4),this.renderListDetail(),isDisplayTyping&&Detail_ref5,react_default.a.createElement(Detail_ResponseRateStatus_ResponseRateStatus,{chatDetailsLength:this.props.chatDetails.length,conversation:conversation,listStatus:this.props.listStatus,isOnWAP:isOnWAP,parentContextData:this.props.messageDisplayBox.parentContextData}))),react_default.a.createElement("div",{className:classnames_default()(Detail_style_default.a.overlay,(_cx12={},_cx12[Detail_style_default.a.dropzoneActive]=this.state.dropzoneActive,_cx12[Detail_style_default.a.hide]=isOnWAP,_cx12))},react_default.a.createElement(Upload,{className:classnames_default()(Detail_style_default.a.uploadIcon),width:64,height:64}))),this.isDisplayAIGetStarted()&&react_default.a.createElement(Detail_AIGetStartedButton,{onClick:function(){return _this3.sendGetStartedBotMsg()}}),react_default.a.createElement(Form,{className:classnames_default()((_cx13={},_cx13[Detail_style_default.a.hideBoth]=isHideRightPanel||!this.isDisplayChatForm(),_cx13)),open:this.onOpenUploadFile.bind(this),parentContextData:this.props.messageDisplayBox.parentContextData,enableAutoScrollToBottom:this.props.messageDisplayBoxActions.enableAutoScrollToBottom,clearParentContextData:this.props.messageDisplayBoxActions.clearParentContextData,bindInputChatMessageRef:this.bindInputChatMessageRef,openVoucherModal:this.props.openVoucherModal,markNotScrolledForImages:this.props.messageDisplayBoxActions.markNotScrolledForImages}),isDisplayBlankMsg&&react_default.a.createElement(ChatContainer_BlankChatMsg,{userInfo:this.props.userInfo,filterType:this.props.filterType,errorMsg:this.props.chatErrorMsg}))},ChatDetail}(react.Component);Detail_ChatDetail.displayName="ChatDetail",defineProperty_default()(Detail_ChatDetail,"defaultProps",{isCreatingAsyncMessage:!1});var Detail=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{userInfo:state.auth.userInfo,conversation:state.chat.conversation,chatDetails:state.chat.chatDetails,paging:state.chat.detailPaging,listStatus:state.chat.listStatus,shopInfos:Object(get.a)(state.chat,"shopInfos",{}),shouldDisplayLoadingDetail:Object(get.a)(state,"chat.shouldDisplayLoadingDetail",!1),messageDisplayBox:state.messageDisplayBox,isLoadingDetail:Object(get.a)(state,"chat.isLoadingDetail",!1),isLoadedLastDetail:Object(get.a)(state,"chat.isLoadedLastDetail",!1),isCreatingAsyncMessage:Object(get.a)(state,"chat.isCreatingAsyncMessage",!1),app:state.app,currentTopic:state.chat.currentTopic,isHaveTopicMsgInDetails:state.chat.isHaveTopicMsgInDetails,isChiDaiTyping:state.chat.chiDai.isDisplayTyping,filterType:state.chat.filterType,chatSystemType:state.chat.chatSystemType,chatErrorMsg:state.chat.chatErrorMsg,savedChattingSenLiveState:state.chat.savedChattingSenLiveState,savedChattingChatState:state.chat.savedChattingChatState}}),(function(dispatch){return{xmppActions:Object(bindActionCreators.a)(actions_xmpp,dispatch),chatActions:Object(bindActionCreators.a)(chat_namespaceObject,dispatch),appActions:Object(bindActionCreators.a)(app_namespaceObject,dispatch),messageDisplayBoxActions:Object(bindActionCreators.a)(messageDisplayBox_namespaceObject,dispatch)}})))(Detail_ChatDetail),CreateVoucherModal_CreateVoucherModal=__webpack_require__("i/vB"),CreateVoucherModal_default=__webpack_require__.n(CreateVoucherModal_CreateVoucherModal);var VOUCHER_CONFIG={MAX_LENGTH_INPUT_VALUE:15};function CreateVoucherModal_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function CreateVoucherModal_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?CreateVoucherModal_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):CreateVoucherModal_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var defaultState={voucherValueError:"",voucherValue:"10000",voucherValueDisplay:"10,000",durationValue:"1"},CreateVoucherModal_ref=react_default.a.createElement("option",{value:"1"},"1"),CreateVoucherModal_ref2=react_default.a.createElement("option",{value:"2"},"2"),CreateVoucherModal_ref3=react_default.a.createElement("option",{value:"3"},"3"),CreateVoucherModal_ref4=react_default.a.createElement("option",{value:"4"},"4"),CreateVoucherModal_ref5=react_default.a.createElement("option",{value:"5"},"5"),CreateVoucherModal_ref6=react_default.a.createElement("option",{value:"6"},"6"),CreateVoucherModal_ref7=react_default.a.createElement("option",{value:"7"},"7"),Chat_CreateVoucherModal_CreateVoucherModal=function(_Component){function CreateVoucherModal(props){var _this;return _this=_Component.call(this,props)||this,defineProperty_default()(assertThisInitialized_default()(_this),"onChangeDurationValue",(function(e){_this.setState({durationValue:e.target.value})})),defineProperty_default()(assertThisInitialized_default()(_this),"handleToggleModal",(function(){_this.props.handleToggleModal()})),defineProperty_default()(assertThisInitialized_default()(_this),"handleInputChange",(function(event){var ROLE_TEXT=_this.props.reduxState.ROLE_TEXT;if(!(event.target.value.length>VOUCHER_CONFIG.MAX_LENGTH_INPUT_VALUE)&&"voucherValue"===event.target.id){var _this$setState,_this$setState2,amount=event.target.value.replace(/,/g,""),displayAmount=function(amount){return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}(amount);_this.setState(((_this$setState={})[""+event.target.id]=amount,_this$setState)),_this.setState(((_this$setState2={})[event.target.id+"Display"]=displayAmount,_this$setState2)),_this.setState({voucherValueError:""});var product=Object(get.a)(_this.props,"creatingVoucherTopic.items.0",null),voucherValue=parseFloat(amount);parseFloat(product.final_price)<res_const.G.MIN_PRODUCT_AMOUNT?_this.setState({voucherValueError:ROLE_TEXT.VOUCHER_MODAL.ERROR.PRODUCT_PRICE_MUST_GREATER_THEN_20K}):voucherValue>parseFloat(product.final_price)/2?_this.setState({voucherValueError:ROLE_TEXT.VOUCHER_MODAL.ERROR.AMOUNT_GREATER_THAN_HALF_PRICE}):voucherValue<res_const.G.MIN_VOUCHER_AMOUNT?_this.setState({voucherValueError:ROLE_TEXT.VOUCHER_MODAL.ERROR.AMOUNT_LOWER_THAN_MIN}):voucherValue%res_const.G.MIN_VOUCHER_AMOUNT!==0&&_this.setState({voucherValueError:ROLE_TEXT.VOUCHER_MODAL.ERROR.AMOUNT_MUST_MUTIPLE_OF_10k})}})),defineProperty_default()(assertThisInitialized_default()(_this),"validateNumberOnly",(function(e){Object(includes.a)([46,8,9,27,13,110],e.keyCode)||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})),defineProperty_default()(assertThisInitialized_default()(_this),"createVoucher",(function(e){if(e.preventDefault(),!_this.props.isCreatingAsyncMessage&&!_this.state.voucherValueError){var voucherSubmitData=_this.getSubmitData(),product=Object(get.a)(_this.props,"creatingVoucherTopic.items.0",null),voucherInfo={submitData:voucherSubmitData,product:product},conversation=Object(get.a)(_this.props.reduxState,"conversation",{}),receiver=Object(xmpp.i)(conversation),messageType=res_const.s.MESSAGE,userInfo=Object(get.a)(_this.props,"userInfo",{}),body=userInfo.full_name+" g\u1eedi gi\u1ea3m gi\xe1 \u0111\u1ebfn "+receiver.partner_fullname+" cho "+product.name,parentContextData=Object(get.a)(_this.props,"parentContextData",null),currentTopic=Object(get.a)(_this.props,"currentTopic",null),newTopic=Object(get.a)(parentContextData,"topic",null);parentContextData&&(messageType=Object(msgDetail.k)(currentTopic,parentContextData,_this.props.isHaveTopicMsgInDetails),receiver=Object(msgDetail.l)(receiver,parentContextData));var messageData={receiver:receiver,sender:userInfo,chat_id:conversation.chat_id,topic:newTopic||currentTopic,message_type:messageType,message_object_type:res_const.q.VOUCHER,body:body,voucherInfo:voucherInfo};googleAnalytics.f(messageData),_this.props.chatActions.sendVoucher(messageData),_this.props.closeModal()}})),defineProperty_default()(assertThisInitialized_default()(_this),"getSubmitData",(function(){var product=Object(get.a)(_this.props,"creatingVoucherTopic.items.0",null);return{discount_price:_this.state.voucherValue,use_day:_this.state.durationValue,min_order_amount:product.final_price.toString()}})),defineProperty_default()(assertThisInitialized_default()(_this),"renderPriceLabel",(function(){var product=Object(get.a)(_this.props,"creatingVoucherTopic.items.0",null);return product.final_price_label?react_default.a.createElement("div",{className:CreateVoucherModal_default.a.price},react_default.a.createElement("span",{className:CreateVoucherModal_default.a.finalPrice},product.final_price_label)):react_default.a.createElement("div",{className:CreateVoucherModal_default.a.price},react_default.a.createElement("span",{className:CreateVoucherModal_default.a.finalPrice},Object(format_messageContent.e)(product.final_price)))})),_this.state=defaultState,_this}inheritsLoose_default()(CreateVoucherModal,_Component);var _proto=CreateVoucherModal.prototype;return _proto.componentDidUpdate=function(prevProps){var ROLE_TEXT=this.props.reduxState.ROLE_TEXT;if(Object(get.a)(prevProps,"isOpen",!1)!==Object(get.a)(this.props,"isOpen",!1)){var productPrice=Object(get.a)(this.props,"creatingVoucherTopic.items.0.final_price",null),voucherValueError="";parseFloat(productPrice)<res_const.G.MIN_PRODUCT_AMOUNT&&(voucherValueError=ROLE_TEXT.VOUCHER_MODAL.ERROR.PRODUCT_PRICE_MUST_GREATER_THEN_20K);var initState=CreateVoucherModal_objectSpread({},defaultState,{voucherValueError:voucherValueError});this.setState(CreateVoucherModal_objectSpread({},initState))}},_proto.render=function(){var product=Object(get.a)(this.props,"creatingVoucherTopic.items.0",null),ROLE_TEXT=this.props.reduxState.ROLE_TEXT;if(!product)return null;var productImageUrl=Object(format_messageContent.d)(product.image_url,"80x80")||"",partnerFullName=Object(get.a)(this.props.reduxState,"conversation.partner_fullname",""),isInvalidToSubmit=Boolean(!!this.state.voucherValueError);return react_default.a.createElement(Chat_Modal,{isOpen:this.props.isOpen,closeModal:this.props.closeModal,headerText:ROLE_TEXT.VOUCHER_MODAL.HEADER_LABEL,textSubmit:ROLE_TEXT.VOUCHER_MODAL.FORM.SUBMIT_BTN,submitModalForm:this.createVoucher,isInvalidToSubmit:isInvalidToSubmit},react_default.a.createElement("div",{className:CreateVoucherModal_default.a.modalBody},react_default.a.createElement("div",{className:CreateVoucherModal_default.a.voucherInfo},react_default.a.createElement("div",{className:CreateVoucherModal_default.a.productInfo},react_default.a.createElement("img",{className:CreateVoucherModal_default.a.productImage,src:productImageUrl,alt:product.name}),react_default.a.createElement("div",{className:CreateVoucherModal_default.a.productContent},react_default.a.createElement("h3",null,product.name),!!product.selected_options_label&&react_default.a.createElement("span",{className:CreateVoucherModal_default.a.optionsLabel},product.selected_options_label),this.renderPriceLabel())),react_default.a.createElement("div",{className:CreateVoucherModal_default.a.frmGroup},react_default.a.createElement("label",{htmlFor:"voucherValue"},ROLE_TEXT.VOUCHER_MODAL.FORM.VOUCHER_VALUE_LABEL),react_default.a.createElement(reactstrap_cjs.Input,{className:CreateVoucherModal_default.a.voucherInput,id:"voucherValue",type:"text",placeholder:ROLE_TEXT.VOUCHER_MODAL.FORM.VOUCHER_VALUE_PLACEHOLDER,value:this.state.voucherValueDisplay,onChange:this.handleInputChange,onKeyDown:this.validateNumberOnly})),react_default.a.createElement("div",{className:CreateVoucherModal_default.a.frmGroup},react_default.a.createElement("label",{htmlFor:"durationValue"},ROLE_TEXT.VOUCHER_MODAL.FORM.DURATION_LABEL),react_default.a.createElement(reactstrap_cjs.Input,{id:"durationValue",name:"durationValue",type:"select",className:CreateVoucherModal_default.a.durationSelect,value:this.state.durationValue,onChange:this.onChangeDurationValue},CreateVoucherModal_ref,CreateVoucherModal_ref2,CreateVoucherModal_ref3,CreateVoucherModal_ref4,CreateVoucherModal_ref5,CreateVoucherModal_ref6,CreateVoucherModal_ref7),react_default.a.createElement("span",null,ROLE_TEXT.VOUCHER_MODAL.FORM.DURATION_UNIT)),react_default.a.createElement("div",{className:CreateVoucherModal_default.a.frmGroup},react_default.a.createElement("span",null,ROLE_TEXT.VOUCHER_MODAL.FORM.BUYER_NAME),react_default.a.createElement("span",{className:CreateVoucherModal_default.a.partnerFullName},partnerFullName))),!!this.state.voucherValueError&&react_default.a.createElement("p",{className:CreateVoucherModal_default.a.invalidAmount},this.state.voucherValueError)))},CreateVoucherModal}(react.Component);Chat_CreateVoucherModal_CreateVoucherModal.displayName="CreateVoucherModal";var Chat_CreateVoucherModal=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{conversation:state.chat.conversation,ROLE_TEXT:state.app.ROLE_TEXT}}}),null))(Chat_CreateVoucherModal_CreateVoucherModal),ChatContainer_style=__webpack_require__("1SQU"),ChatContainer_style_default=__webpack_require__.n(ChatContainer_style),AppHeader=__webpack_require__("FbHn"),ConfirmModal_ConfirmModal=__webpack_require__("yJSj"),ConfirmModal_default=__webpack_require__.n(ConfirmModal_ConfirmModal),Chat_ConfirmModal_ConfirmModal=function(props){var _cx,closeModal=function(){props.closeConfirmModal()};return react_default.a.createElement(reactstrap_cjs.Modal,{className:classnames_default()(ConfirmModal_default.a.modalDialog),contentClassName:classnames_default()(ConfirmModal_default.a.modalContent),isOpen:props.reduxState.isOpen,toggle:closeModal,size:"sm"},react_default.a.createElement(reactstrap_cjs.ModalHeader,{className:classnames_default()(ConfirmModal_default.a.modalHeader,(_cx={},_cx[ConfirmModal_default.a.onWAP]=props.reduxState.isOnWAP,_cx)),close:react_default.a.createElement(ConfirmModal_CloseBtn,{closeModal:closeModal})},"Th\xf4ng b\xe1o"),react_default.a.createElement(reactstrap_cjs.ModalBody,{className:classnames_default()(ConfirmModal_default.a.modalBody)},react_default.a.createElement("p",{className:ConfirmModal_default.a.infoMsg},props.reduxState.infoMsg)),react_default.a.createElement(reactstrap_cjs.ModalFooter,{className:classnames_default()(ConfirmModal_default.a.modalFooter)},react_default.a.createElement(reactstrap_cjs.Button,{type:"button",onClick:closeModal,className:ConfirmModal_default.a.cancelBtn},props.reduxState.cancelLabel),react_default.a.createElement(reactstrap_cjs.Button,{type:"button",onClick:function(){props.acceptConfirmModal()},className:ConfirmModal_default.a.submitBtn},props.reduxState.acceptLabel)))};Chat_ConfirmModal_ConfirmModal.displayName="ConfirmModal";var Chat_ConfirmModal=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{reduxState:{isOpen:state.confirmModal.isOpen,infoMsg:state.confirmModal.infoMsg,acceptLabel:state.confirmModal.acceptLabel,cancelLabel:state.confirmModal.cancelLabel}}}),(function(dispatch){return{closeConfirmModal:Object(bindActionCreators.a)(closeConfirmModal,dispatch),acceptConfirmModal:Object(bindActionCreators.a)(confirmModal_acceptConfirmModal,dispatch)}})))(Chat_ConfirmModal_ConfirmModal),ConfirmModal_ref=react_default.a.createElement(Close.a,null),ConfirmModal_CloseBtn=function(props){return react_default.a.createElement("button",{className:ConfirmModal_default.a.closeBtn,onClick:props.closeModal},ConfirmModal_ref)};function ChatContainer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ChatContainer_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ChatContainer_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ChatContainer_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}ConfirmModal_CloseBtn.displayName="CloseBtn";var ChatContainer_ref=react_default.a.createElement(AppHeader.a,null),ChatContainer_ref2=react_default.a.createElement(List,null),ChatContainer_ref3=react_default.a.createElement(Loading.a,null),ChatContainer_ref4=react_default.a.createElement(Chat_ConfirmModal,null),ChatContainer_ChatContainer=function(_Component){function ChatContainer(props,context){var _this;return _this=_Component.call(this,props,context)||this,defineProperty_default()(assertThisInitialized_default()(_this),"handleCloseCreateVoucherModal",(function(){_this.setState({isDisplayCreateVoucherModal:!1})})),defineProperty_default()(assertThisInitialized_default()(_this),"openVoucherModal",(function(e){e.preventDefault();var currentTopic=_this.props.currentTopic;currentTopic&&currentTopic.type===res_const.E.PRODUCT&&_this.setState({isDisplayCreateVoucherModal:!0,creatingVoucherTopic:ChatContainer_objectSpread({},_this.props.currentTopic)})})),defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(className){return Object(helpers_styles.a)(ChatContainer_style_default.a,className,_this.props.isOnWAP)})),_this.mobileHeaderRef=react_default.a.createRef(),_this.state={creatingVoucherTopic:null,isDisplayCreateVoucherModal:!1},_this}return inheritsLoose_default()(ChatContainer,_Component),ChatContainer.prototype.render=function(){var _cx,_cx2,chatList=Object(get.a)(this.props,"chatList",[]),shouldDisplayChatList=Boolean(this.props.isDisplayChatList&&(chatList.length||userHelper.a.isSeller()||this.props.filterType!==res_const.l.ALL)&&!this.props.isDisplayLoadingData),shouldDisplayChatDetail=Boolean(this.props.isDisplayChatDetail&&(chatList.length||userHelper.a.isSeller()||this.props.filterType!==res_const.l.ALL)&&!this.props.isDisplayLoadingData),shouldDisplayEmptyChat=!shouldDisplayChatDetail&&!shouldDisplayChatList&&!this.props.isDisplayLoadingData&&!this.props.isLoadingHistory;return react_default.a.createElement("div",{className:classnames_default()(ChatContainer_style_default.a.page)},ChatContainer_ref,react_default.a.createElement("div",{className:classnames_default()(ChatContainer_style_default.a.body)},react_default.a.createElement("div",{className:classnames_default()((_cx={},_cx[ChatContainer_style_default.a.hide]=!shouldDisplayChatList,_cx),this.getResponsiveStyles(ChatContainer_style_default.a.left))},ChatContainer_ref2),react_default.a.createElement("div",{className:classnames_default()((_cx2={},_cx2[ChatContainer_style_default.a.hide]=!shouldDisplayChatDetail,_cx2),this.getResponsiveStyles(ChatContainer_style_default.a.right))},react_default.a.createElement(Detail,{openVoucherModal:this.openVoucherModal})),!!shouldDisplayEmptyChat&&react_default.a.createElement(ChatContainer_BlankChatMsg,{userInfo:this.props.userInfo,errorMsg:this.props.chatErrorMsg}),this.props.isDisplayLoadingData&&react_default.a.createElement("div",{className:classnames_default()(ChatContainer_style_default.a.loadingContainer)},ChatContainer_ref3)),react_default.a.createElement(Chat_CreateVoucherModal,{isOpen:this.state.isDisplayCreateVoucherModal,closeModal:this.handleCloseCreateVoucherModal,userInfo:this.props.userInfo,creatingVoucherTopic:this.state.creatingVoucherTopic,currentTopic:this.props.currentTopic,chatActions:this.props.chatActions,isCreatingAsyncMessage:this.props.isCreatingAsyncMessage,parentContextData:this.props.parentContextData,isHaveTopicMsgInDetails:this.props.isHaveTopicMsgInDetails}),ChatContainer_ref4)},ChatContainer}(react.Component);ChatContainer_ChatContainer.displayName="ChatContainer";var Chat_ChatContainer=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{isDisplayChatList:state.app.isDisplayChatList,isDisplayLoadingData:state.app.isDisplayLoadingData,isLoadingHistory:state.chat.isLoadingHistory,isDisplayChatDetail:state.app.isDisplayChatDetail,isOnWAP:state.app.isOnWAP,userInfo:state.auth.userInfo,chatList:state.chat.chatList,currentTopic:Object(get.a)(state.chat,"currentTopic",null),isCreatingAsyncMessage:Object(get.a)(state,"chat.isCreatingAsyncMessage",!1),parentContextData:state.messageDisplayBox.parentContextData,isHaveTopicMsgInDetails:state.chat.isHaveTopicMsgInDetails,chatErrorMsg:state.chat.chatErrorMsg,filterType:state.chat.filterType}}),(function(dispatch){return{chatActions:Object(bindActionCreators.a)(chat_namespaceObject,dispatch)}})))(ChatContainer_ChatContainer),AppHelper=__webpack_require__("QHRa"),Chat_ref=react_default.a.createElement(Chat_ChatContainer,null),Chat_ChatLayout=function(_Component){function ChatLayout(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_Component.call.apply(_Component,[this].concat(args))||this,defineProperty_default()(assertThisInitialized_default()(_this),"initAuthenDataByIframeUrl",(function(){var _this$props$appAction,updateWAPLayout,displayLastScreen,setAuthenticationData,urlParams,parentDomain,isValidDomain,uiType,base64Data,authenData;return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_this$props$appAction=_this.props.appActions,updateWAPLayout=_this$props$appAction.updateWAPLayout,displayLastScreen=_this$props$appAction.displayLastScreen,setAuthenticationData=_this.props.authActions.setAuthenticationData,urlParams=query_string_default.a.parse(window.location.search),parentDomain=Object(get.a)(urlParams,"parent",""),isValidDomain=Boolean(parentDomain.endsWith(setting.b)),setting.c.forEach((function(allow_local_domain){parentDomain.endsWith(allow_local_domain)&&(isValidDomain=!0)})),uiType=parseInt(Object(get.a)(urlParams,"ui",0),10),isNaN(uiType)||uiType!==res_const.e.BUYER_WAP||(updateWAPLayout(),displayLastScreen()),isValidDomain){_context.next=10;break}return _context.abrupt("return");case 10:if(parentDomain&&AppHelper.a.setParentOriginDomain(parentDomain),base64Data=Object(get.a)(urlParams,"code",""),authenData={access_token:"",userInfo:null},base64Data&&(authenData=JSON.parse(window.atob(base64Data))),authenData.access_token){_context.next=18;break}return _context.next=17,regenerator_default.a.awrap(_this.props.fetchChatToken());case 17:authenData.access_token=_context.sent;case 18:setAuthenticationData(authenData);case 19:case"end":return _context.stop()}}))})),defineProperty_default()(assertThisInitialized_default()(_this),"loadUserInfoByRole",(function(userRole){var _this$props$appAction2=_this.props.appActions,finishLoadingAppData=_this$props$appAction2.finishLoadingAppData,displayLoadingAppData=_this$props$appAction2.displayLoadingAppData;if(Object(get.a)(_this.props,"access_token","")&&userRole===res_const.F.SELLER&&displayLoadingAppData(),userRole===res_const.F.SELLER){var setUserInfo=_this.props.authActions.setUserInfo,_this$props$chatActio=_this.props.chatActions,fetchSellerInfo=_this$props$chatActio.fetchSellerInfo,fetchConvertShopIdForSeller=_this$props$chatActio.fetchConvertShopIdForSeller,_this$props$userInfo=_this.props.userInfo,shop_id=_this$props$userInfo.shop_id,fpt_id=_this$props$userInfo.fpt_id;fetchSellerInfo(shop_id,fpt_id).then((function(sellerInfo){var userInfo=userHelper.a.parseSellerInfoToUserInfo(sellerInfo);userInfo&&setUserInfo(userInfo),fetchConvertShopIdForSeller(shop_id),finishLoadingAppData()}))}})),defineProperty_default()(assertThisInitialized_default()(_this),"listenIframePostMessage",(function(){window.addEventListener("message",(function(event){_this.handleMessageFromParent(event)}))})),defineProperty_default()(assertThisInitialized_default()(_this),"handleMessageFromParent",(function(event){var auditUserInfo,isValidUserInfo,isNeedWaitGetUserInfo;return regenerator_default.a.async((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(auditUserInfo=Object(get.a)(_this.props,"auditUserInfo",null),isValidUserInfo=userHelper.a.isValidUserInfo(auditUserInfo),isNeedWaitGetUserInfo=userHelper.a.isNeedWaitGetUserInfo(auditUserInfo),!isValidUserInfo){_context2.next=8;break}return _context2.next=6,regenerator_default.a.awrap(_this.props.chatActions.updateContextFromParent(event.data));case 6:_context2.next=9;break;case 8:isNeedWaitGetUserInfo&&setTimeout((function(){_this.handleMessageFromParent(event)}),1e3);case 9:case"end":return _context2.stop()}}))})),_this}inheritsLoose_default()(ChatLayout,_Component);var _proto=ChatLayout.prototype;return _proto.componentDidMount=function(){window.__FIRST_LOAD__&&delete window.__FIRST_LOAD__,this.initAuthenDataByIframeUrl(),this.listenIframePostMessage(),Object(notifyNewMessageToParent.a)(res_const.t.DISPLAY_MINIMIZE_BTN)},_proto.componentDidUpdate=function(prevProps){!prevProps.access_token&&this.props.access_token&&(this.props.appActions.setTextAndSettingByRole(this.props.userRole),this.loadUserInfoByRole(this.props.userRole))},_proto.render=function(){return Chat_ref},ChatLayout}(react.Component);Chat_ChatLayout.displayName="ChatLayout";__webpack_exports__.default=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{access_token:state.auth.access_token,userRole:state.auth.role,userInfo:state.auth.userInfo,auditUserInfo:state.auth.auditUserInfo,chatWindowStatus:state.app.chatWindowStatus,isOnWAP:state.app.isOnWAP,mobileStep:state.app.mobileStep,isStartConnectXMPP:state.chat.isStartConnectXMPP}}),(function(dispatch){return{chatActions:Object(bindActionCreators.a)(chat_namespaceObject,dispatch),appActions:Object(bindActionCreators.a)(app_namespaceObject,dispatch),authActions:Object(bindActionCreators.a)(auth_namespaceObject,dispatch),fetchChatToken:Object(bindActionCreators.a)(fetcher.d,dispatch)}})))(Chat_ChatLayout)},"2AqJ":function(module,exports,__webpack_require__){module.exports={hidden:"hidden_3VX7",hide:"hide_1pwJ",productContent:"productContent_2OZk",thumbnail:"thumbnail_1_oj",image:"image_1IM6",heading:"heading_3OAI",truncateMedium:"truncateMedium_jwzX",pricing:"pricing_2H-j",finalPrice:"finalPrice_1dvf",originalPrice:"originalPrice_20pI",shopInfo:"shopInfo_Oz5h",shopName:"shopName_3eQL"}},"36Gs":function(module,exports,__webpack_require__){module.exports={container:"container_3TGy",tooltip:"tooltip_9u7f",onDesktop:"onDesktop_A-Ei"}},"3i+/":function(module,exports,__webpack_require__){module.exports={topicOrderContent:"topicOrderContent_2gun",onDesktop:"onDesktop_3tIM",topicOrderContentBody:"topicOrderContentBody_ai-S",orderPricing:"orderPricing_1YIf",finalPrice:"finalPrice_tK_3",originalPrice:"originalPrice_2C8C"}},"4HpP":function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAYhJREFUWAntls9Kw0AQh2diRPDoTdCTF/HmK3gsqYr6HCq9Cb6CaONDeBMEKQiCDyH6ALYqvXhvNbvd2SiU2OwmbSZ6mD0Ekp3J78uXfwsgQwyIATEgBsRAHQaal2/rRXKCIkVcNc2L7n6SJI+N+OXUl4G+Aq75KO4dKKWvAHSYZgStzvHKeV7ed1HeNM/xLCQi9EOcu3Ol1W50MuT81s3h8vO/AZ0Wki6gNqOzQNYGOitkLaBVQLKDVgVJoIU++Ltxf42Ky4wqISnXCxq1eydDPXiK2t1GUdCqISnX+dYbyJbS6swCIgwCwL3bo9WOC5gDkvKcRgPEB3MtHxZMw4ICfe0yywVJ+U6jVLAdv25+KXVv/slLtG86JprlhExjbbp744PlhiwMSoV5sIC4OL4KShcY/n+3W83vWe+tH2/JwprmoQY0z3m6VOOCJIZSoNSQhaVjNDgh7fltSslNFpYbcmpQavyBRdSfIVb/TJZ05y4n2J34fcNdJbNiQAyIATEgBsTAHxoYARX5AOXshVQ3AAAAAElFTkSuQmCC"},"4lKA":function(module,exports,__webpack_require__){module.exports={quoteMessage:"quoteMessage_1KQ3",onDesktop:"onDesktop_3tHM",sentTime:"sentTime_3RXL",isOwner:"isOwner_3GQG",errorMsg:"errorMsg_2Rkh"}},"5dNY":function(module,exports,__webpack_require__){module.exports={hidden:"hidden_71jm",hide:"hide_13Jx",productsMessage:"productsMessage_2NDz",isOwner:"isOwner_3W5l",onDesktop:"onDesktop_7XiK",productCard:"productCard_3LH7",hideSwiperButton:"hideSwiperButton_16OH",buttonNext:"buttonNext_3fqh",disabledSwiper:"disabledSwiper_144N",buttonPrev:"buttonPrev_1um7"}},"5hnp":function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNHYxNEgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0QTkwRTIiIGQ9Ik01LjMyNSA4LjczN0wzLjEzMSA2LjU0M2wtLjczMS43MzJMNS4zMjUgMTAuMmw2LjI2OS02LjI2OS0uNzMxLS43MzF6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo="},"6AuL":function(module,exports,__webpack_require__){module.exports={quoteContent:"quoteContent_7sXu",onDesktop:"onDesktop_3tpc",isOwner:"isOwner_OAYE",quoteTxt:"quoteTxt_3TPH",quoteInfo:"quoteInfo_2QsH"}},"8IYJ":function(module,exports,__webpack_require__){module.exports={typingIndicator:"typingIndicator_3JBc",dot:"dot_2S5j",firstDot:"firstDot_buVq",firstDotFrames:"firstDotFrames_5mP3",secondDot:"secondDot_1RtH",secondDotFrames:"secondDotFrames_3Nrg",thirdDot:"thirdDot_1n9T",thirdDotFrames:"thirdDotFrames_1azi"}},ArOH:function(module,exports,__webpack_require__){module.exports={container:"container_1aV8",marginTop:"marginTop_JGcT",dividerContainer:"dividerContainer_18TF",dividerLeft:"dividerLeft_2BuT",dividerRight:"dividerRight_2LXl",lastOnlineText:"lastOnlineText_1G_5",statusText:"statusText_1Kv1"}},B9LU:function(module,exports,__webpack_require__){module.exports={previewContent:"previewContent_nL9u",onDesktop:"onDesktop_3wt-",topicContainer:"topicContainer_8DQu"}},BQCb:function(module,exports,__webpack_require__){module.exports={hidden:"hidden_3bUP",hide:"hide_2jSW",orderRatingMessage:"orderRatingMessage_3-N_",headerLabel:"headerLabel_1Yf3",content:"content_2Dwz",image:"image_2STT",info:"info_1rge",label:"label_3dvD",orderNumber:"orderNumber_24ad",stars:"stars_1pLK",icon:"icon_3INO"}},CykY:function(module,exports,__webpack_require__){module.exports={hidden:"hidden_1q93",hide:"hide_8QU7",container:"container_24lJ",onDesktop:"onDesktop_26ta",hideBoth:"hideBoth_3Yqh",header:"header_19xZ",headerRight:"headerRight_29Pq",fullname:"fullname_3M7w",info:"info_3uPL",status:"status_2_3n",available:"available_tPJG",backToListMenuMobile:"backToListMenuMobile_KKLj",dropzone:"dropzone_3COE",errorStatus:"errorStatus_121T",overlay:"overlay_dr2n",dropzoneActive:"dropzoneActive_YlSk",list:"list_5iAM",chatContainer:"chatContainer_2aIJ",livestream:"livestream_3sWK",item:"item_aU7v",previewContentPlaceHolder:"previewContentPlaceHolder_1Mze",loadMore:"loadMore_3jwD",loadingMore:"loadingMore_oB2_",isOwner:"isOwner_3jS_",wrapperTopic:"wrapperTopic_rYfl",errorMessage:"errorMessage_2l--",messageStatus:"messageStatus_2CKN",msgContent:"msgContent_Vg9X",isowner:"isowner_k28i",onWAP:"onWAP_2dZ4",msgImage:"msgImage_2XMN",iconStatus:"iconStatus_3dwt",isread:"isread_11YV",timeDidiver:"timeDidiver_1GpU",text:"text_1M8V",emptyDetail:"emptyDetail_3vP9",btnLoadMore:"btnLoadMore_1nbH",loadingLoadMore:"loadingLoadMore_2B4Y",labelLoadMore:"labelLoadMore_2bx7",blockLoadMore:"blockLoadMore_15pY",blockAlert:"blockAlert_GwvH",fadeOut:"fadeOut_256T",textAlert:"textAlert_2g0_",blockTooltip:"blockTooltip_2zJQ",in:"in_A9Br",fadeIn:"fadeIn_3rAX",loader:"loader_1aAj",load3:"load3_3UDP"}},D2xC:function(module,exports,__webpack_require__){module.exports={modalDialog:"modalDialog_EynU",onWAP:"onWAP_3Ptt",modalContent:"modalContent_3Nr8",modalBody:"modalBody_tMNN",emptyLabel:"emptyLabel_1j7t",label:"label_24wR",loading:"loading_37NQ",orderItem:"orderItem_2NKG",orderContent:"orderContent_2jCm",orderHover:"orderHover_24Q7",sendButton:"sendButton_6KyV"}},"H/jF":function(module,exports,__webpack_require__){module.exports={hidden:"hidden_1P7b",hide:"hide_1cbT",clickable:"clickable_L20G",errorImageContainer:"errorImageContainer_2N8Y",errorImageInfo:"errorImageInfo_20ZG",defaultImageContainer:"defaultImageContainer_1WQO",warningIcon:"warningIcon_1UEY",messageStatus:"messageStatus_1um2",tempImageInfo:"tempImageInfo_2QyO",textLink:"textLink_nVBF",isOwner:"isOwner_2wUl",voucherMessage:"voucherMessage_l--u",productName:"productName_9tv3",productContent:"productContent_1V8n",imageContainer:"imageContainer_U87l",infoContent:"infoContent_eafu",onDesktop:"onDesktop_1Ua4",optionsLabel:"optionsLabel_9_Kj",pricingContent:"pricingContent_3a20",pricing:"pricing_3E6_",finalPrice:"finalPrice_33UT",originalPrice:"originalPrice_3QPL",expireHeader:"expireHeader_rP4W",expireText:"expireText_xQfl",voucherBtn:"voucherBtn_L6-t",voucherText:"voucherText_3CzS"}},MPIb:function(module,exports,__webpack_require__){module.exports={attachmentMessage:"attachmentMessage_1-Kj",onDesktop:"onDesktop_2UB8",buttonPayload:"buttonPayload_2hDM",buttonPayloadRed:"buttonPayloadRed_5NC7",imageVoucherLeft:"imageVoucherLeft_27-P",boldText:"boldText_rWfS"}},Naf7:function(module,exports,__webpack_require__){module.exports={AIquickReplies:"AIquickReplies_2BPc",onWAP:"onWAP_3X-w",wrapper:"wrapper_1CD1",textQuickReplyBtn:"textQuickReplyBtn_owJ2"}},RGw8:function(module,exports,__webpack_require__){module.exports={imagesMessage:"imagesMessage_sz0a",imageContainer:"imageContainer_29JB",msgImage:"msgImage_2DKC",oneImages:"oneImages_4CcJ",twoImages:"twoImages_1QQG",threeImages:"threeImages_3Nu5",fourImages:"fourImages_2dCy",fiveImages:"fiveImages_g_wq",sixImages:"sixImages_3sAs"}},RQUf:function(module,exports,__webpack_require__){module.exports={botMessage:"botMessage_1_uS"}},Rsme:function(module,exports,__webpack_require__){module.exports={AIGetStarted:"AIGetStarted_1uIe",onDesktop:"onDesktop_c3In",logo:"logo_1kOp",content:"content_7f3Z",avatarContainer:"avatarContainer_1x3e",introduce:"introduce_14Bt"}},SNgB:function(module,exports,__webpack_require__){module.exports={characterImage:"characterImage_1jo0"}},Td4U:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICAgIDxnIGZpbGw9IiM0QTkwRTIiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgPHBhdGggZD0iTTEwLjA1NyA0LjIzNkw5LjMyMSAzLjUgNi4wMSA2LjgxbC43MzYuNzM1IDMuMzEtMy4zMDl6TTEyLjI3IDMuNUw2Ljc0NyA5LjAyMyA0LjU2NiA2Ljg0NmwtLjczNi43MzZMNi43NDcgMTAuNWw2LjI2NC02LjI2NC0uNzQtLjczNnpNLjg3NSA3LjU4MkwzLjc5MyAxMC41bC43MzYtLjczNi0yLjkxMy0yLjkxOC0uNzQxLjczNnoiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},XSn6:function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAq5JREFUWAntls9rE0EUx9/LtrXEH5AUijatB+nJm3gQtBbxIJjEBA8VBFus9CYG/w29JabWg7+ogj+KiESreCjR4s2Tf4KbNFqhijRlY3YzzkucYZtuFmtnPegMSd7Ozts3n/3OzHsB0E0roBXQCmgFtAL/rQKpaXM4OWPG/ARIZJcOjk0v72j3CbXfCKpPkE4diqwGxU6wp7JLIwBOsVq3XqVufdnpZvkroBISWIwBG278gIVLObbNDUKQDXBeMsZIzSPOqvXUPR44qBuyOTEi458r1zJYEyBtkAAIVgiNq2KcLLo7qq87QE69yOy9LebygjSwK13IDLwWPmQDA1UJGRioashAQIOAVA4aFKRS0CAhCXRDekrnKvu9KgM5i9asHo+ZIfpkHRuyPEe2qk4rBf3R6XbHdF+vA03lygfqDXtxzbbmO8Ems2acgf2uWinNjrlgewycAMQP/Et5UikkAcv0lLj+eR/Ua+8Zg0hzAGEx3NUbn7vYvyreLJEtH2bgLACDZlVBwAfhgcHxuTPokM/pfKnPttmxwuWhJ+KZ382Twr+TlaC8dGEyV7rJ7QXhjBw2Guk5eW9id5Xunb/Depe/m8846Anp0wYr7pNVBUmx5NIjX6/nmcEpbmXV4OoeXVmpz4/PftpOzncn0erfNZTm6yCrBt+XZ9cq5fvubUC+KiEpnlSUOtQ8lQV8G412x32VxdDD8J7YOdoGqiGJawPoVmD5s49CBt5gDSj8+hdEM1hetZvm2UzzBKUAXsryE/2mL9Kd8FOWTj1/uBVXESTxdATdEmwrshIlKRQ1eZha3fW/XgeMe4x+/eYcF55eB0zVcos5yPoqKhzlNgCYbE/mwkemLv4iKvakiLtpS7Dx/MdRvwcJNp43D/n56DGtgFZAK6AV0Ar8Gwr8BPK4CbN+INz4AAAAAElFTkSuQmCC"},ZNhd:function(module,exports,__webpack_require__){module.exports={filterChatSystemType:"filterChatSystemType_3t1x",groupBtn:"groupBtn_1g2c",btn:"btn_8lPn",active:"active_3-4X"}},"ZV+Z":function(module,exports,__webpack_require__){module.exports={avatar:"avatar_2Lqj",onDesktop:"onDesktop_1sHH",logo:"logo_3MM-",AIConversation:"AIConversation_14Ua",image:"image_1ZoE",onlineStatus:"onlineStatus_3VuI",offlineSince:"offlineSince_Jyfc",available:"available_2kXo"}},akrE:function(module,exports,__webpack_require__){module.exports={dropdown:"dropdown_hDRe",dropbtn:"dropbtn_2WhN",dropdownContent:"dropdownContent_1Y-z",name:"name_DtV_",active:"active_ZINd",divider:"divider_dC5L"}},biKn:function(module,exports,__webpack_require__){module.exports={quoteByInfo:"quoteByInfo_17i1",onDesktop:"onDesktop_2HSP",isOwner:"isOwner_1c1l",sendIcon:"sendIcon_2dDu"}},bzU8:function(module,exports,__webpack_require__){module.exports={loading:"loading_1pmL"}},eAY3:function(module,exports,__webpack_require__){module.exports={AIGetStartedButton:"AIGetStartedButton_3GhU"}},ebDm:function(module,exports,__webpack_require__){module.exports={toast:"toast_3hSZ",content:"content_1C-M",text:"text_1Omj",open:"open_H7Im"}},fH77:function(module,exports,__webpack_require__){module.exports={hidden:"hidden_2AYb",hide:"hide_1Mus",chatForm:"chatForm_2ATY",form:"form_1pY0",onDesktop:"onDesktop_1ZGJ",addons:"addons_1mUC",button:"button_21Rt",emojiBtn:"emojiBtn_317Y",messagebox:"messagebox_12J6",displayEmojiPanel:"displayEmojiPanel_2DT8",inputBox:"inputBox_2EtD",sendBtn:"sendBtn_3ayt"}},hPyD:function(module,exports,__webpack_require__){module.exports={hide:"hide_1SVD",quickReplyContainer:"quickReplyContainer_2Ur-",onDesktop:"onDesktop_i61G",inner:"inner_199S",quickReplyTextBtn:"quickReplyTextBtn_3Wfs",emptySpace:"emptySpace_3AeW"}},"i/vB":function(module,exports,__webpack_require__){module.exports={modalBody:"modalBody_bLzd",voucherInfo:"voucherInfo_2YEZ",note:"note_23zZ",productInfo:"productInfo_1Drv",productImage:"productImage_V5Sc",productContent:"productContent_3uAC",optionsLabel:"optionsLabel_3KIa",price:"price_2avk",finalPrice:"finalPrice_dXVW",originalPrice:"originalPrice_KP_0",frmGroup:"frmGroup_15nw",voucherInput:"voucherInput_1H6m",durationSelect:"durationSelect_3bxV",partnerFullName:"partnerFullName_1cWL",invalidAmount:"invalidAmount_lSns"}},"k/aL":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/ai_get_started.933ca0cf.png"},kSIQ:function(module,exports,__webpack_require__){module.exports={hidden:"hidden_2Tm8",hide:"hide_2XL3",orderMessage:"orderMessage_30mK",onDesktop:"onDesktop_1Kbl",isOwner:"isOwner_2VUQ"}},lLvQ:function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAUtJREFUSA3tlDlLRDEUhZ8L6CiMS+k09oOCnXZj7fJjHawtXRhmXEpbS0VQUBRBvyN5cDE3yRunnQuH3CU5J7kvL1U1tUIHZgp1W94i2AmJEeOdLab8+UShTX7B1Nbw98BXyMn/AM8h1qD4xcS/rneCXSrbfyeG+CSMx4n6LfkLW5u1QfC7Tq5OSTglrjnRWq9FczWbM246OZuK1nonsAsm9icVGLKDs9wuvBbl5tvaNcEALIM3sAQi++8JbmC6AiI9DCNDbCUB3Wvdb2u6ipdA5EdgBSQtJ6Bj98EpqEX09+qet4B2niWnXuUEtMMOeAQSUc/PQU2+il+00kfuwfAN7oGEFsEB0NPRyEoCIukBiTwAtWUdNLYmAnqv9sEraDdmDhNz38BySWRschF4Ap+WeUw/Whs9ThC+gw3g1XJ6Itcte8pNmtaiDvwAPbIrlc42EsgAAAAASUVORK5CYII="},moN1:function(module,exports,__webpack_require__){module.exports={tooltip:"tooltip_OuHw"}},nSyn:function(module,exports,__webpack_require__){module.exports={reportButton:"reportButton_2EFW",reportIcon:"reportIcon_2hUQ"}},pDBd:function(module,exports,__webpack_require__){module.exports={orderContent:"orderContent_11gb",title:"title_3lrj",image:"image_1dsX",label:"label__z45",statusBox:"statusBox_KJZn",statusSteps:"statusSteps_1tDQ",step:"step_1E4d",active:"active_1_Rw",numberBox:"numberBox_2FcQ",statuxText:"statuxText_1nDF",nextArrow:"nextArrow_10rY",current:"current_7u0Y",currentArrow:"currentArrow_2T2w"}},pIOu:function(module,exports,__webpack_require__){module.exports={emojiBtnContainer:"emojiBtnContainer_bfqp",emojiPanel:"emojiPanel_JVMG",displayEmojiPanel:"displayEmojiPanel_1yXb",panelBody:"panelBody_2hFe",iconRow:"iconRow_3fQ7",iconBtn:"iconBtn_AdA6",window:"window_24gm"}},pJxH:function(module,exports,__webpack_require__){module.exports={modalDialog:"modalDialog_3Fxs",modalContent:"modalContent_1GG3",modalHeader:"modalHeader_2yEy",closeBtn:"closeBtn_1Pjh",modalBody:"modalBody_3IN6",messageContent:"messageContent_2TTG"}},qCUe:function(module,exports,__webpack_require__){module.exports={blockChatSenLiveAction:"blockChatSenLiveAction_25H7",iconImg:"iconImg_2Yur",dotIcon:"dotIcon_1MmX",onClickMenuButton:"onClickMenuButton_1dCV",dropdownContent:"dropdownContent_EqA2",divider:"divider_1f_p"}},qsEg:function(module,exports,__webpack_require__){module.exports={hidden:"hidden_1HjU",hide:"hide_1DR0",clickable:"clickable_1vJg",optionsLabel:"optionsLabel_15J8",topic:"topic_2B9B",onDesktop:"onDesktop_oHm7",topicImage:"topicImage_1TFl",topicContent:"topicContent_2gBj",topicContentBody:"topicContentBody_2gcf",topicPricing:"topicPricing_3Iw7",finalPrice:"finalPrice_2T7Q",originalPrice:"originalPrice_3oUi"}},qwms:function(module,exports,__webpack_require__){module.exports={modalDialog:"modalDialog_2hMl",onWAP:"onWAP_I3qC",modalContent:"modalContent_3F34",modalBody:"modalBody_n75K",loading:"loading_11b0",emptyLabel:"emptyLabel_28EV",label:"label_2A5v",header:"header_1kWD",searchInput:"searchInput_2gKd",productContainer:"productContainer_Y0jB",productRow:"productRow_12mK",productItem:"productItem_1DaO",checked:"checked_22sm",productHover:"productHover_16Tt",checkedIcon:"checkedIcon_3-uE",selectionMenu:"selectionMenu_2muW",selectionButton:"selectionButton_3YVu"}},s9jV:function(module,exports,__webpack_require__){module.exports={textMessage:"textMessage_4Sl2",disabledClick:"disabledClick_2VSW",fullname:"fullname_3tbB",sentTime:"sentTime_PSq3"}},u97S:function(module,exports,__webpack_require__){module.exports={groupBtn:"groupBtn_2yF_",searchBoxContainer:"searchBoxContainer_2ZKQ",hide:"hide_2k19",unreadCheckBox:"unreadCheckBox_17o-",openSearchBoxBtn:"openSearchBoxBtn_2QHb",closeSearchBoxBtn:"closeSearchBoxBtn_3DfR",searchBox:"searchBox_2RSj",searchBoxInput:"searchBoxInput_20KD"}},vw4L:function(module,exports,__webpack_require__){module.exports={tooltip:"tooltip_3jkD",productIcon:"productIcon_eoUS"}},w87k:function(module,exports,__webpack_require__){module.exports={shopIcon:"shopIcon_14qq",shopReputationBadge:"shopReputationBadge_1XAY",shopMallLabel:"shopMallLabel_ES3l"}},wMZH:function(module,exports,__webpack_require__){module.exports={textMessage:"textMessage_3dHd",onDesktop:"onDesktop_2tXM",sentTime:"sentTime_1ggR",isOwner:"isOwner_nEvO",errorMsg:"errorMsg_1bwJ"}},xA2L:function(module,exports,__webpack_require__){module.exports={hidden:"hidden_2cvN",hide:"hide_KaPC",container:"container_2dFD",filter:"filter_2QP5",onDesktop:"onDesktop_1Hsv",groupBtnWAP:"groupBtnWAP_6RM8",btn:"btn_3S22",active:"active_2801",left:"left_2dro",right:"right_2DTs",list:"list_1Ub3",filterChatSystemType:"filterChatSystemType_2I6w",loadMore:"loadMore_2H0R",loadingMoreList:"loadingMoreList_2veX",chat:"chat_2LVq",settings:"settings_3cla",activeConversation:"activeConversation_2LFE",avatarContainer:"avatarContainer_1Kzd",participant:"participant_2kCk",fullname:"fullname_3SGv",nameLeft:"nameLeft_1McY",isHaveMallIcon:"isHaveMallIcon_1NOa",IsHaveTrustedIcon:"IsHaveTrustedIcon_E2N7",mallType:"mallType_2CxO",trustedType:"trustedType_yits",nameRight:"nameRight_3h_z",content:"content_2wV_",topicImage:"topicImage_3MXK",isHaveTopicImage:"isHaveTopicImage_2TU1",ownerMsgStatus:"ownerMsgStatus_u8H6",isNotRead:"isNotRead_3qic",livestream:"livestream_2cEe",emptyList:"emptyList_j950"}},yJSj:function(module,exports,__webpack_require__){module.exports={modalDialog:"modalDialog_2FOe",modalContent:"modalContent_1_1b",modalHeader:"modalHeader_39Wy",onWAP:"onWAP_3w0H",closeBtn:"closeBtn_3LaY",modalBody:"modalBody_2WzN",infoMsg:"infoMsg_2BRt",modalFooter:"modalFooter_3MQB",cancelBtn:"cancelBtn_29nk",submitBtn:"submitBtn_1cdL",hide:"hide_25G7"}},zdJG:function(module,exports,__webpack_require__){module.exports={emptyChatList:"emptyChatList_20BZ",bigIcon:"bigIcon_3N45",wellDoneText:"wellDoneText_ebAW",secondText:"secondText__4W7",firstText:"firstText_31Pu",highlight:"highlight_SgJG",sellerIcon:"sellerIcon_3JnY",boldRed:"boldRed__TyL"}}}]);