(window["webpackJsonp_sendo-web-chat_web_"]=window["webpackJsonp_sendo-web-chat_web_"]||[]).push([[3],{"/wUs":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DebugHelper}));var sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1wi/"),sendo_web_sdk_debug_getSentry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ruw5"),DebugHelper=function(){function DebugHelper(){}return DebugHelper.log=function(msg,data){sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_0__.u?window.console.log(msg,data):console.log(msg,data)},DebugHelper.logGtagData=function(data){console.log("track "+data.role+" -- start ---"),console.log("action = ",data.action),console.log("category = ",data.category),console.log("label = ",data.label),console.log("track "+data.role+" -- end ---")},DebugHelper.captureWithSentry=function(error){Object(sendo_web_sdk_debug_getSentry__WEBPACK_IMPORTED_MODULE_1__.a)().then((function(sentry){sentry.withScope((function(scope){scope.setLevel("error"),sentry.captureException(error)}))}))},DebugHelper}()},"1UAq":function(module,__webpack_exports__,__webpack_require__){"use strict";function timeSince(time,isMsgDetail,isDisplayShort){void 0===isMsgDetail&&(isMsgDetail=!1),void 0===isDisplayShort&&(isDisplayShort=!1);var monthsOfYear=["1","2","3","4","5","6","7","8","9","10","11","12"],seconds=Math.floor(((new Date).getTime()-time)/1e3),interval=Math.floor(seconds/31536e3),issueAt=new Date(parseInt(time,10));if(interval>=1)return interval+" n\u0103m";if((interval=Math.floor(seconds/2592e3))>=1)return isMsgDetail?"ng\xe0y "+issueAt.getDate()+" th\xe1ng "+monthsOfYear[issueAt.getMonth()]:issueAt.getDate()+" th"+monthsOfYear[issueAt.getMonth()];if((interval=Math.floor(seconds/86400))>=1)return interval>7?isMsgDetail?"ng\xe0y "+issueAt.getDate()+" th\xe1ng "+monthsOfYear[issueAt.getMonth()]:issueAt.getDate()+" th"+monthsOfYear[issueAt.getMonth()]:["T.2","T.3","T.4","T.5","T.6","T.7","CN"][issueAt.getDay()-1];if((interval=Math.floor(seconds/3600))>=1){var displayMinute=issueAt.getMinutes();return issueAt.getMinutes()<10&&(displayMinute="0"+issueAt.getMinutes()),isMsgDetail?issueAt.getHours()+" gi\u1edd "+displayMinute+" ph\xfat":issueAt.getHours()+"h"+displayMinute}return(interval=Math.floor(seconds/60))>=1?isDisplayShort?interval+"'":interval+" ph\xfat":seconds<=1?isDisplayShort?"1s":"v\xe0i gi\xe2y":isDisplayShort?Math.floor(seconds)+"s":Math.floor(seconds)+" gi\xe2y"}function timeSinceSDS(time){var seconds=Math.floor(((new Date).getTime()-time)/1e3),interval=Math.floor(seconds/31536e3),issueAt=new Date(parseInt(time,10));if((interval=Math.floor(seconds/172800))>=1)return issueAt.getDate()+"/"+["1","2","3","4","5","6","7","8","9","10","11","12"][issueAt.getMonth()]+"/"+issueAt.getFullYear();var firstToday=(new Date).setHours(0,0,0,0);if(time>=(new Date).setHours(-24,0,0,0)&&time<firstToday)return"H\xf4m qua";if((interval=Math.floor(seconds/3600))>=1){var displayMinute=issueAt.getMinutes();return issueAt.getMinutes()<10&&(displayMinute="0"+issueAt.getMinutes()),issueAt.getHours()+":"+displayMinute}return(interval=Math.floor(seconds/60))>=1?interval+" ph\xfat tr\u01b0\u1edbc":seconds<=1?"v\xe0i gi\xe2y tr\u01b0\u1edbc":Math.floor(seconds)+" gi\xe2y tr\u01b0\u1edbc"}function getShortDisplayTimeInHours(timestamp){if(0===Math.round((Date.now()-timestamp)/864e5)){var secondSince=Math.floor(((new Date).getTime()-timestamp)/1e3);if(!Boolean(Math.floor(secondSince/3600)>=1))return timeSince(timestamp,!0)+" tr\u01b0\u1edbc"}var issueAt=new Date(parseInt(timestamp,10)),displayMinute=issueAt.getMinutes();return issueAt.getMinutes()<10&&(displayMinute="0"+issueAt.getMinutes()),issueAt.getHours()+"h"+displayMinute}function convertTimespanHours(timespan){return Math.floor(timespan/36e5)}__webpack_require__.d(__webpack_exports__,"c",(function(){return timeSince})),__webpack_require__.d(__webpack_exports__,"d",(function(){return timeSinceSDS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getShortDisplayTimeInHours})),__webpack_require__.d(__webpack_exports__,"a",(function(){return convertTimespanHours}))},"1wGr":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"F",(function(){return USER_ROLE})),__webpack_require__.d(__webpack_exports__,"y",(function(){return RECEIVED_MSG_LOGIC})),__webpack_require__.d(__webpack_exports__,"t",(function(){return NOTIFY_FROM_CHAT_MESSAGE_TYPE})),__webpack_require__.d(__webpack_exports__,"v",(function(){return NOTIFY_TO_CHAT_MESSAGE_TYPE})),__webpack_require__.d(__webpack_exports__,"u",(function(){return NOTIFY_NEW_CHAT_TYPE})),__webpack_require__.d(__webpack_exports__,"w",(function(){return OPEN_CHAT_FROM_PAGE})),__webpack_require__.d(__webpack_exports__,"s",(function(){return MSG_TYPE})),__webpack_require__.d(__webpack_exports__,"q",(function(){return MESSAGE_OBJECT_TYPE})),__webpack_require__.d(__webpack_exports__,"D",(function(){return TIME_OUT})),__webpack_require__.d(__webpack_exports__,"z",(function(){return REDIRECT_URL})),__webpack_require__.d(__webpack_exports__,"E",(function(){return TOPIC_TYPE})),__webpack_require__.d(__webpack_exports__,"n",(function(){return GOOGLE_ANALYTICS})),__webpack_require__.d(__webpack_exports__,"k",(function(){return ENUMS})),__webpack_require__.d(__webpack_exports__,"G",(function(){return VOUCHER_FORM})),__webpack_require__.d(__webpack_exports__,"e",(function(){return CHAT_LAYOUT})),__webpack_require__.d(__webpack_exports__,"o",(function(){return IQ_MSG})),__webpack_require__.d(__webpack_exports__,"g",(function(){return CHI_DAI})),__webpack_require__.d(__webpack_exports__,"B",(function(){return SHOP_TYPE})),__webpack_require__.d(__webpack_exports__,"A",(function(){return SHOP_ICON_TYPE})),__webpack_require__.d(__webpack_exports__,"j",(function(){return EMOJI_TYPE})),__webpack_require__.d(__webpack_exports__,"i",(function(){return CONFIG_MENU_OPTION})),__webpack_require__.d(__webpack_exports__,"p",(function(){return MESSAGE_OBJECT})),__webpack_require__.d(__webpack_exports__,"r",(function(){return MESSAGE_STATUS_TYPE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return BOT_MESSAGE_TYPE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return AI_QUICK_REPLY_TYPE})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AI_PAYLOAD_TYPE})),__webpack_require__.d(__webpack_exports__,"l",(function(){return FILTER_CHAT_LIST_TYPE})),__webpack_require__.d(__webpack_exports__,"m",(function(){return FILTER_SENLIVE_LIST_TYPE})),__webpack_require__.d(__webpack_exports__,"f",(function(){return CHAT_SYSTEM_TYPE})),__webpack_require__.d(__webpack_exports__,"d",(function(){return CHAT_DETAIL_FETCH_TYPE})),__webpack_require__.d(__webpack_exports__,"C",(function(){return STREAMING_STATUS})),__webpack_require__.d(__webpack_exports__,"h",(function(){return CONFIG_CHAT_SYSTEM_TYPE})),__webpack_require__.d(__webpack_exports__,"x",(function(){return RATING_STAR_TYPE}));var USER_ROLE={BUYER:"buyer",SELLER:"seller"},RECEIVED_MSG_LOGIC={NONE:0,FROM_OTHER_BUYER_TO_ME_BUYER:1,FROM_ANOTHER_ME_BUYER_TO_ME_BUYER:2,FROM_OTHER_SELLER_TO_ME_BUYER:3,FROM_ANOTHER_ME_SELLER_TO_ME_BUYER:4,FROM_OTHER_BUYER_TO_ME_SELLER:5,FROM_ANOTHER_ME_BUYER_TO_ME_SELLER:6,FROM_OTHER_SELLER_TO_ME_SELLER:7,FROM_ANOTHER_ME_SELLER_TO_ME_SELLER:8,FROM_ANOTHER_ME_SELLER_TO_OTHER_BUYER:9,FROM_ANOTHER_ME_BUYER_TO_OTHER_SELLER:10},NOTIFY_FROM_CHAT_MESSAGE_TYPE={TOTAL_UNREAD:"TOTAL_UNREAD",CLICK_ON_TOPIC:"CLICK_ON_TOPIC",TOPIC_TYPE:{PRODUCT:"PRODUCT",ORDER:"ORDER"},HIDE_MINIMIZE_BTN:"HIDE_MINIMIZE_BTN",DISPLAY_MINIMIZE_BTN:"DISPLAY_MINIMIZE_BTN"},NOTIFY_TO_CHAT_MESSAGE_TYPE={INIT_FROM_PARENT:"INIT_FROM_PARENT",TOGGLE_CHAT:"TOGGLE_CHAT",OPEN_CHAT_WITH_PRODUCT:"OPEN_CHAT_WITH_PRODUCT",OPEN_CHAT_WITH_QUERY:"OPEN_CHAT_WITH_QUERY",OPEN_CHAT_WITH_SHOP:"OPEN_CHAT_WITH_SHOP",OPEN_CHAT:"OPEN_CHAT",GET_TOTAL_UNREAD:"GET_TOTAL_UNREAD"},NOTIFY_NEW_CHAT_TYPE={WITH_PRODUCT_TOPIC:1,WITHOUT_TOPIC:2,WITH_ORDER_TOPIC:3,WITH_SHOP_TOPIC:4},OPEN_CHAT_FROM_PAGE={NONE:0,BUYER_PRODUCT_DETAIL:1,SELLER_ORDER_DETAIL:2,SELLER_PRIVATE_OFFER:3,PUSH_NOTIFICATION:4},MSG_TYPE={TOPIC:"topic",MESSAGE:"message",AUTO_REPLY:"auto_reply",TIME_DIVIDER:"time_divider",LIVESTREAM:"livestream"},MESSAGE_OBJECT_TYPE={TEXT:"plain_text",IMAGE:"image",VOUCHER:"voucher",SHOP_ORDER:"shop_order",PRODUCTS:"products",BOT:"bot",POST_BACK:"postback",QUOTE:"quote_txt",ORDER_RATING:"order_rating"},TIME_OUT={CHECK_USER_STOP_TYPING_TIME_SECOND:1.5},REDIRECT_URL={BUYER_DOMAIN:"https://www.sendo.vn",BUYER_ORDER_DETAIL:"https://www.sendo.vn/sales/order/view/order_nr/",SELLER_DOMAIN:"https://ban.sendo.vn",SELLER_PRODUCT_DETAIL:"/shop#product/detail/",SELLER_ORDER_DETAIL:"/don-hang/"},TOPIC_TYPE={SHOP:"shop",PRODUCT:"product",ORDER:"order",SENLIVE:"livestream"},GOOGLE_ANALYTICS={EVENT:{CATEGORY:{BUYER:{CHAT_MESSAGE:{TEXT:"Buyer Chat Message Text",IMAGE:"Buyer Chat Message Image",VOUCHER:"Buyer Chat Message Voucher",PRODUCTS:"Buyer Chat Message Products",ORDER:"Buyer Chat Message Order"},CHAT_TOPIC:{SHOP:"Buyer Chat Topic Shop",PRODUCT:"Buyer Chat Topic Product",ORDER:"Buyer Chat Topic Order"},CHAT_FROM:{PRODUCT_DETAIL_PAGE:"Buyer Chat From Product Detail Page",HISTORY_CHAT_LIST:"Buyer Chat From History",PUSH_NOTIFICATION:"Buyer Chat From Notification"},EMOJI:{UNICODE_EMOJI:"Buyer Click Unicode Emoji"},QUICK_REPLY:{DEFAULT:"Buyer Click Quick-Reply - No Topic",SHOP:"Buyer Click Quick-Reply - Shop Topic",PRODUCT:"Buyer Click Quick-Reply - Product Topic",ORDER:"Buyer Click Quick-Reply - Order Topic"}},SELLER:{CHAT_MESSAGE:{TEXT:"Chat Message Text",SENLIVE:"Chat Message Text in SenLive",IMAGE:"Chat Message Image",VOUCHER:"Chat Message Voucher",PRODUCTS:"Chat Message Products",ORDER:"Chat Message Order"},CHAT_TOPIC:{SHOP:"Chat Topic Shop",PRODUCT:"Chat Topic Product",ORDER:"Chat Topic Order"},CHAT_FROM:{HISTORY_CHAT_LIST:"Chat From History",PRIVATE_OFFER_PAGE:"Chat From Private Offer Page",ORDER_DETAIL_PAGE:"Chat From Order Detail Page"},EMOJI:{UNICODE_EMOJI:"Click Unicode Emoji"},QUICK_REPLY:{DEFAULT:"Click Quick-Reply - No Topic",SHOP:"Click Quick-Reply - Shop Topic",PRODUCT:"Click Quick-Reply - Product Topic",ORDER:"Click Quick-Reply - Order Topic"}}},ACTION:{SEND_MSG:"Send",RECEIVED_MSG:"Receive",OPEN_CHAT:"Open Chat",CLICK_TAP_CHAT:"Click/Tap in Chat"},LABEL:{DEFAULT_LABEL_WHEN_CHAT_MSG:"user",USER_LABEL:"user",BOT_LABEL:"bot"}}},ENUMS={APP:{NETWORK_STATUS:{OFFLINE:0,ONLINE:1},XMPP_STATUS:{NOT_INIT:-1,ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},MOBILE:{STEP:{CHAT_LIST:1,CHAT_DETAIL:2}},CHAT_WINDOW_STATUS:{CLOSED:0,OPENED:1}},MSG_DETAIL:{ERROR_TYPE:{IMAGE:1,VOUCHER:2}}},VOUCHER_FORM={MIN_VOUCHER_AMOUNT:1e4,MIN_PRODUCT_AMOUNT:2e4},CHAT_LAYOUT={BUYER_WAP:1},IQ_MSG={HISTORY_XMLNS:"jabber:sendo:history",HISTORY_LIST_ID:"history_list_fetch",HISTORY_LIST_NAME:"history",HISTORY_DETAIL_ID:"history_detail_fetch",HISTORY_DETAIL_NAME:"history_detail",SEARCH_HISTORY_LIST_ID:"history_list_search",SEARCH_HISTORY_LIST_NAME:"history",DELETE_HISTORY_ID:"history_delete",DELETE_HISTORY_NAME:"history_delete",AUTO_REPLY_XMLNS:"jabber:sendo:auto_reply",FETCH_AUTO_REPLY_ID:"fetch_auto_reply",FETCH_AUTO_REPLY_TAG_NAME:"auto_reply",SAVE_AUTO_REPLY_ID:"save_auto_reply",GET_SHARDING_ROOM_INFO_ID:"get_sharding_room_info_id",MUC_ROOM_SPECIFIC_TAG:"muc_room_specific",GET_ROOM_SUFFIX_ACTION:"get_room_suffix",MUC_ROOM_SPECIFIC_XMLNS:"jabber:sendo:muc_room_specific"},CHI_DAI={MSG_TYPE:{ATTACHMENT_TYPE:{TEMPLATE:"template"}},ATTACHMENT:{BUTTON_TYPE:{WEB_URL:"web_url",POST_BACK:"postback"}}},SHOP_TYPE={DEFAULT:-1,MALL:0,NORMAL:1,TRUSTED:2,ACTIVE:3},SHOP_ICON_TYPE={NORMAL_SHOP:"normal",MALL_SHOP:"mall",TRUSTED_SHOP:"trusted"},EMOJI_TYPE={UNICODE:1},CONFIG_MENU_OPTION={AUTO_REPLY:1,BLOCK_CHAT_SENLIVE_ACCOUNT:2},MESSAGE_OBJECT={SUB_TYPE:{NONE:"",VIDEO_LINK:"video_link",LINK:"link",EMOJI:"emoji"}},MESSAGE_STATUS_TYPE={NONE:-1,OWNER_UNREAD:0,OWNER_READ:1,PARTNER_UNSEEN:2,PARTNER_SEEN:3,SELLER_UNREAD_BUYER_UNSEEN_AUTO_REPLY:4,SELLER_UNREAD_BUYER_SEEN_AUTO_REPLY:5,SENDING:20,SENT:21,FAILED:22,LIVESTREAM:23},BOT_MESSAGE_TYPE={NONE:0,NORMAL_TEXT:1,ATTACHMENT:2},AI_QUICK_REPLY_TYPE={TEXT:"text"},AI_PAYLOAD_TYPE={REPORT_MODAL:2},FILTER_CHAT_LIST_TYPE={ALL:"0",UNREPLIED:"1",UNREAD:"2"},FILTER_SENLIVE_LIST_TYPE={ALL:"0"},CHAT_SYSTEM_TYPE={CHAT:1,SENLIVE:2},CHAT_DETAIL_FETCH_TYPE={DEFAULT:1,LIVESTREAM:2},STREAMING_STATUS={LIVE:"live",VOD:"vod"},CONFIG_CHAT_SYSTEM_TYPE={SENDO:"chat_sendo",SENLIVE:"chat_senlive"},RATING_STAR_TYPE={FULL:"star_full",EMPTY:"star_empty"}},"1wi/":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"M",(function(){return WEB_CHAT_VERSION})),__webpack_require__.d(__webpack_exports__,"u",(function(){return IS_ENABLE_DEBUG_PROD})),__webpack_require__.d(__webpack_exports__,"i",(function(){return DEFAULT_DOMAIN_CHAT_API})),__webpack_require__.d(__webpack_exports__,"k",(function(){return DEFAULT_DOMAIN_M_API})),__webpack_require__.d(__webpack_exports__,"j",(function(){return DEFAULT_DOMAIN_CHAT_LT_API})),__webpack_require__.d(__webpack_exports__,"q",(function(){return DOMAIN_CHAT_WS})),__webpack_require__.d(__webpack_exports__,"r",(function(){return DOMAIN_SENLIVE_WS})),__webpack_require__.d(__webpack_exports__,"N",(function(){return WS_PROTOCOL})),__webpack_require__.d(__webpack_exports__,"p",(function(){return DOMAIN_CHAT_SUFFIX})),__webpack_require__.d(__webpack_exports__,"s",(function(){return HOST_SENLIVE_SUFFIX_JID})),__webpack_require__.d(__webpack_exports__,"t",(function(){return HOST_SENLIVE_SUFFIX_MUC})),__webpack_require__.d(__webpack_exports__,"L",(function(){return TIMESPAN_RESEND_DUPLICATE_TOPIC_IN_HOURS})),__webpack_require__.d(__webpack_exports__,"x",(function(){return LIMIT_LOAD_MSG_DETAIL_MOBILE})),__webpack_require__.d(__webpack_exports__,"w",(function(){return LIMIT_LOAD_MSG_DETAIL})),__webpack_require__.d(__webpack_exports__,"v",(function(){return LIMIT_LOAD_HISTORY})),__webpack_require__.d(__webpack_exports__,"y",(function(){return LIMIT_LOAD_PRODUCT})),__webpack_require__.d(__webpack_exports__,"E",(function(){return REFRESH_MSG_DETAILS_TIME_SECOND})),__webpack_require__.d(__webpack_exports__,"D",(function(){return RECONNECT_XMPP_TIME_SECOND})),__webpack_require__.d(__webpack_exports__,"m",(function(){return DISPLAY_LOADING_APP_MILISECOND})),__webpack_require__.d(__webpack_exports__,"n",(function(){return DISPLAY_LOADING_TIME_SECOND})),__webpack_require__.d(__webpack_exports__,"l",(function(){return DISPLAY_ERROR_TIME_SECOND})),__webpack_require__.d(__webpack_exports__,"o",(function(){return DISPLAY_TOAST_TIME_SECOND})),__webpack_require__.d(__webpack_exports__,"C",(function(){return RATE_LIMIT_SENDING_MSG_TIME_SECOND})),__webpack_require__.d(__webpack_exports__,"K",(function(){return TIMEOUT_LOAD_HISTORY_SECOND})),__webpack_require__.d(__webpack_exports__,"I",(function(){return TIMEOUT_CONNECT_SENLIVE_SECOND})),__webpack_require__.d(__webpack_exports__,"J",(function(){return TIMEOUT_JOIN_ROOM_SECOND})),__webpack_require__.d(__webpack_exports__,"z",(function(){return LIMIT_UPLOAD_MB})),__webpack_require__.d(__webpack_exports__,"A",(function(){return LOAD_IMAGE_OPTIONS})),__webpack_require__.d(__webpack_exports__,"G",(function(){return RETRY_FETCH_IQ_WHEN_WS_DISCONNECTED_SECOND})),__webpack_require__.d(__webpack_exports__,"e",(function(){return BUYER_SETTING})),__webpack_require__.d(__webpack_exports__,"H",(function(){return SELLER_SETTING})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ALLOW_DISPLAY_URLS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ALLOW_PARENT_DOMAIN})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ALLOW_PARENT_DOMAIN_LOCAL})),__webpack_require__.d(__webpack_exports__,"B",(function(){return QUICK_REPLY_TEXTS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return API_CONFIG})),__webpack_require__.d(__webpack_exports__,"h",(function(){return CHI_DAI_DEFAULT_INFO})),__webpack_require__.d(__webpack_exports__,"g",(function(){return CHI_DAI})),__webpack_require__.d(__webpack_exports__,"F",(function(){return REGEX_PATTERN})),__webpack_require__.d(__webpack_exports__,"f",(function(){return CHARACTER_AVATAR}));var _package_json__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("kiQV"),WEB_CHAT_VERSION=_package_json__WEBPACK_IMPORTED_MODULE_0__.a,IS_ENABLE_DEBUG_PROD=!1,DEFAULT_DOMAIN_CHAT_API="https://chatapi.sendo.vn",DEFAULT_DOMAIN_M_API="https://mapi.sendo.vn",DEFAULT_DOMAIN_CHAT_LT_API="https://chatltapi.sendo.vn",DOMAIN_CHAT_WS="chatws.sendo.vn/ws",DOMAIN_SENLIVE_WS="chatltws.sendo.vn/ws",WS_PROTOCOL="wss",DOMAIN_CHAT_SUFFIX="@chat.sendo.vn",HOST_SENLIVE_SUFFIX_JID="@chatlt.sendo.vn",HOST_SENLIVE_SUFFIX_MUC="conference-chatlt.sendo.vn",TIMESPAN_RESEND_DUPLICATE_TOPIC_IN_HOURS=24,LIMIT_LOAD_MSG_DETAIL_MOBILE=20,LIMIT_LOAD_MSG_DETAIL=15,LIMIT_LOAD_HISTORY=20,LIMIT_LOAD_PRODUCT=12,REFRESH_MSG_DETAILS_TIME_SECOND=60,RECONNECT_XMPP_TIME_SECOND=60,DISPLAY_LOADING_APP_MILISECOND=100,DISPLAY_LOADING_TIME_SECOND=1,DISPLAY_ERROR_TIME_SECOND=5,DISPLAY_TOAST_TIME_SECOND=2,RATE_LIMIT_SENDING_MSG_TIME_SECOND=1,TIMEOUT_LOAD_HISTORY_SECOND=20,TIMEOUT_CONNECT_SENLIVE_SECOND=10,TIMEOUT_JOIN_ROOM_SECOND=10,LIMIT_UPLOAD_MB=5,LOAD_IMAGE_OPTIONS={RESIZE_IMG_WIDTH:1024},RETRY_FETCH_IQ_WHEN_WS_DISCONNECTED_SECOND=0,BUYER_SETTING={CHECK_USER_STATUS_TIME_SECOND:86400,DELAY_LOAD_HISTORY_TIME_SECOND:55},SELLER_SETTING={CHECK_USER_STATUS_TIME_SECOND:86400,DELAY_LOAD_HISTORY_TIME_SECOND:15},ALLOW_DISPLAY_URLS=["://sendo.vn","://www.sendo.vn"],ALLOW_PARENT_DOMAIN="sendo.vn",ALLOW_PARENT_DOMAIN_LOCAL=["local.sendo.vn:8080","local.sendo.vn:3000","localhost:3000"],QUICK_REPLY_TEXTS={BUYER:{PRODUCT_TOPIC:["Xin ch\xe0o","Shop \u01a1i","Shop c\xf3 Freeship kh\xf4ng?","Shop c\xf3 g\xf3i qu\xe0 kh\xf4ng?","M\u1eabu n\xe0y c\xf3 m\xe0u kh\xe1c kh\xf4ng?","T\xf4i l\u1ea5y m\u1eabu n\xe0y","C\u1ea3m \u01a1n shop","Ok","Ok Shop","\ud83d\ude0d","\ud83d\ude00","\ud83d\ude32","\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude13","\ud83d\ude1f"],PRODUCT_TOPIC_LINUX:["Xin ch\xe0o","Shop \u01a1i","Shop c\xf3 Freeship kh\xf4ng?","Shop c\xf3 g\xf3i qu\xe0 kh\xf4ng?","M\u1eabu n\xe0y c\xf3 m\xe0u kh\xe1c kh\xf4ng?","T\xf4i l\u1ea5y m\u1eabu n\xe0y","C\u1ea3m \u01a1n shop","Ok","Ok Shop"],ORDER_TOPIC:["Xin ch\xe0o","Shop \u01a1i","Shop \u0111\xe3 ship h\xe0ng ch\u01b0a?","Shop \u0111\xe3 g\u1eedi h\xe0ng ch\u01b0a?","Shop \u0111\xe3 g\u1eedi cho \u0111\u01a1n v\u1ecb v\u1eadn chuy\u1ec3n ch\u01b0a?","Khi n\xe0o shop g\u1eedi h\xe0ng cho m\xecnh?","OK shop","C\u1ea3m \u01a1n shop","\ud83d\ude0d","\ud83d\ude00","\ud83d\ude32","\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude13","\ud83d\ude1f"],ORDER_TOPIC_LINUX:["Xin ch\xe0o","Shop \u01a1i","Shop \u0111\xe3 ship h\xe0ng ch\u01b0a?","Shop \u0111\xe3 g\u1eedi h\xe0ng ch\u01b0a?","Shop \u0111\xe3 g\u1eedi cho \u0111\u01a1n v\u1ecb v\u1eadn chuy\u1ec3n ch\u01b0a?","Khi n\xe0o shop g\u1eedi h\xe0ng cho m\xecnh?","OK shop","C\u1ea3m \u01a1n shop"],DEFAULT:["Ch\xe0o shop!","\ud83d\ude0d","\ud83d\ude00","\ud83d\ude32","\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude13","\ud83d\ude1f","C\xe1m \u01a1n shop!"],DEFAULT_LINUX:["Ch\xe0o shop!","C\xe1m \u01a1n shop!"]},SELLER:["[shop_name] xin ch\xe0o!","[shop_name] c\xf3 th\u1ec3 gi\xfap g\xec cho b\u1ea1n?","\ud83d\ude0d","\ud83d\ude00","\ud83d\ude32","\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude13","\ud83d\ude1f","C\xe1m \u01a1n b\u1ea1n!"],SELLER_LINUX:["[shop_name] xin ch\xe0o!","[shop_name] c\xf3 th\u1ec3 gi\xfap g\xec cho b\u1ea1n?","C\xe1m \u01a1n b\u1ea1n!"]},API_CONFIG={VERSION:7,VERSION_HISTORY_LIST:8,VERSION_LOAD_MORE:99},CHI_DAI_DEFAULT_INFO={partner_id:"0@chat.sendo.vn",partner_fullname:"Tr\u1ee3 l\xfd \u1ea3o Sen \u0110\u1ecf",partner_avatar:"https://media3.scdn.vn/img3/2019/3_13/NFY7Sr.png",content:"B\u1ea1n c\u1ea7n h\u1ed7 tr\u1ee3 g\xec kh\xf4ng ?",timestamp:0,chat_id:"",is_read:1,is_owner:0},CHI_DAI={FIRST_MESSAGE:"B\u1eaft \u0111\u1ea7u",TIME_CHECK_SHOULD_DISPLAY_TYPING_SECOND:.5,TIME_WAIT_FOR_CHI_DAI_SECOND:8},REGEX_PATTERN={YOUTUBE_LINK:"http(?:s?):\\/\\/(?:www\\.)?youtu(?:be\\.com\\/watch\\?v=|\\.be\\/)([\\w-_]*)(&(amp;)?\u200c\u200b[\\w\\?\u200c\u200b=]*)?",FACEBOOK_VIDEO_LINK:"http(?:s?):\\/\\/www\\.facebook\\.com\\/([^\\/?].+\\/)?video(s|\\.php)[\\/?]",EMOJI:"(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])"},CHARACTER_AVATAR={DEFAULT_CHARS:"SU",VALID_BG_COLORS:["#202040","#4baea0","#c70d3a","#ed5107","#202060","#230338","#230338","#47e4bb","#91b029","#537d91","#382039","#042f4b","#032535","#3e64ff","#8bbabb","#007065","#216583","#f67e7d","#f67e7d","#444444","#204969","#b689b0"]}},"5LLV":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getDomainChatAPI})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getDomainMAPI})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getDomainSearchListAPI})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getDomainChatLTAPI}));__webpack_require__("1wi/");var getDomainChatAPI=function(){return"https://chatapi.sendo.vn"},getDomainMAPI=function(){return"https://mapi.sendo.vn"},getDomainSearchListAPI=function(){return"https://searchlist-api.sendo.vn"},getDomainChatLTAPI=function(){return"https://chatltapi.sendo.vn"}},"721D":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return fetchOrdersAsync})),__webpack_require__.d(__webpack_exports__,"h",(function(){return fetchSearchShopProductsAsync})),__webpack_require__.d(__webpack_exports__,"i",(function(){return fetchShopProductsAsync})),__webpack_require__.d(__webpack_exports__,"c",(function(){return fetchChatListLiveStreamAsync})),__webpack_require__.d(__webpack_exports__,"b",(function(){return fetchChatDetailLiveStreamAsync})),__webpack_require__.d(__webpack_exports__,"d",(function(){return fetchChatToken})),__webpack_require__.d(__webpack_exports__,"a",(function(){return fetchBlockSenLiveUser})),__webpack_require__.d(__webpack_exports__,"f",(function(){return fetchGetListBlockedUser})),__webpack_require__.d(__webpack_exports__,"e",(function(){return fetchDeleteBlockedUser}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("o0o1"),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1wi/"),query_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("cr+I"),query_string__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_3__),lodash_es_get__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7EGn"),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("/wUs"),sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("N6vC"),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("xbIa"),sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("vURH"),sendo_web_chat_res_text__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("i8SR"),sendo_web_chat_helpers_data_liveStream__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("T19g"),sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("5LLV");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var fetchOrdersAsync=function(shopId){return function(dispatch,getState){var results,access_token,userFptId,partner_id,partnerFptID,headers,queryParams,slugOrderAPI,queryOrderApiUrl,responseAsync,response;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return results=[],access_token=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"auth.access_token",""),userFptId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"auth.userInfo.fpt_id",""),partner_id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"chat.conversation.partner_id",""),partnerFptID=Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__.l)(partner_id),(headers=new Headers).append("Authorization",access_token),headers.append("cache-control","no-cache"),queryParams={shop_id:shopId},slugOrderAPI="chat/public/v10/buyer/list/order",sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_7__.a.isSeller()&&(slugOrderAPI="chat/public/v10/seller/list/order",queryParams.buyer_id=partnerFptID),queryOrderApiUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.a)()+"/"+slugOrderAPI+"/"+userFptId+"?"+query_string__WEBPACK_IMPORTED_MODULE_3___default.a.stringify(queryParams),_context.prev=12,_context.next=15,_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.awrap(fetch(queryOrderApiUrl,{headers:headers,credentials:"omit"}));case 15:if((responseAsync=_context.sent).ok){_context.next=18;break}throw Error(responseAsync.statusText);case 18:return _context.next=20,_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.awrap(responseAsync.json());case 20:return response=_context.sent,_context.abrupt("return",Promise.resolve(response.result));case 24:_context.prev=24,_context.t0=_context.catch(12),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_5__.a.captureWithSentry("[API][order_list]"+_context.t0);case 27:return _context.abrupt("return",Promise.resolve(results));case 28:case"end":return _context.stop()}}),null,null,[[12,24]])}},fetchSearchShopProductsAsync=function(page,searchInputData){return void 0===page&&(page=1),void 0===searchInputData&&(searchInputData=""),function(dispatch,getState){var results,access_token,useFptId,conversation,shop_id,params,apiUrl,responseAsync,response;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.async((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(results=[],access_token=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"auth.access_token",""),useFptId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"auth.userInfo.fpt_id",""),access_token&&useFptId){_context2.next=5;break}return _context2.abrupt("return",results);case 5:return conversation=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"chat.conversation",null),shop_id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(conversation,"shop_id",""),params={platform:"wap",s:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.y,p:page,admin_id:shop_id,ignore_tracking:1},searchInputData&&(params.q=searchInputData),apiUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.d)()+"/web/products?"+query_string__WEBPACK_IMPORTED_MODULE_3___default.a.stringify(params),_context2.prev=10,_context2.next=13,_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.awrap(fetch(apiUrl));case 13:if((responseAsync=_context2.sent).ok){_context2.next=16;break}throw Error(responseAsync.statusText);case 16:return _context2.next=18,_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.awrap(responseAsync.json());case 18:return response=_context2.sent,_context2.abrupt("return",response);case 22:_context2.prev=22,_context2.t0=_context2.catch(10),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_5__.a.captureWithSentry("[API][product_list]"+_context2.t0);case 25:return _context2.abrupt("return",results);case 26:case"end":return _context2.stop()}}),null,null,[[10,22]])}},fetchShopProductsAsync=function(page){return void 0===page&&(page=1),function(dispatch,getState){var results,access_token,useFptId,shop_id,params,apiUrl,responseAsync,response;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.async((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(results=[],access_token=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"auth.access_token",""),useFptId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),"auth.userInfo.fpt_id",""),access_token&&useFptId){_context3.next=5;break}return _context3.abrupt("return",results);case 5:return shop_id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(getState(),["chat","conversation","shop_id"],""),params={platform:"wap",s:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.y,p:page,sortType:"vasup_desc",admin_id:shop_id},apiUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.d)()+"/web/products?"+query_string__WEBPACK_IMPORTED_MODULE_3___default.a.stringify(params),_context3.prev=8,_context3.next=11,_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.awrap(fetch(apiUrl));case 11:if((responseAsync=_context3.sent).ok){_context3.next=14;break}throw Error(responseAsync.statusText);case 14:return _context3.next=16,_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.awrap(responseAsync.json());case 16:return response=_context3.sent,_context3.abrupt("return",response);case 20:_context3.prev=20,_context3.t0=_context3.catch(8),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_5__.a.captureWithSentry("[API][product_list]"+_context3.t0);case 23:return _context3.abrupt("return",results);case 24:case"end":return _context3.stop()}}),null,null,[[8,20]])}};function fetchChatListLiveStreamAsync(params,isAppLoad,isLoadMore){return void 0===params&&(params={}),function(dispatch,getState){return new Promise((function(resolvePromise){var reduxState,currentPaging,fetchChatListUrl,headers;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.async((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(reduxState=getState(),!getState().chat.isLoadingHistory){_context4.next=3;break}return _context4.abrupt("return");case 3:isLoadMore||dispatch({type:"CHAT_CLEAR_HISTORY"}),dispatch({type:"CHAT_LOADING_HISTORY"}),isAppLoad?dispatch({type:"APP_LOADING_HISTORY"}):(setTimeout((function(){dispatch({type:"chat/TIMEOUT_LOAD_HISTORY"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.K),isLoadMore||setTimeout((function(){dispatch({type:"chat/DISPLAY_LOADING_HISTORY"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.n)),currentPaging={offset:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(params,"paging.offset",0),limit:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.v},fetchChatListUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.b)()+"/chatlt/v9/history/room/user/"+reduxState.auth.userInfo.fpt_id+"?offset="+currentPaging.offset+"&limit="+currentPaging.limit,(headers=new Headers).append("Authorization","Bearer "+reduxState.auth.access_token),headers.append("cache-control","no-cache"),fetch(fetchChatListUrl,{headers:headers,credentials:"omit"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){if(getState().chat.isLoadingHistory){getState().app.isLoadingAppData&&dispatch({type:"APP_LOAD_HISTORY_SUCCESS"});var newHistoryList=Object(sendo_web_chat_helpers_data_liveStream__WEBPACK_IMPORTED_MODULE_10__.b)(jsonData),nextPaging={offset:currentPaging.offset+currentPaging.limit,limit:currentPaging.limit};dispatch({type:"chat/SET/isLoadedLastHistory",payload:{isLoadedLastHistory:Boolean(newHistoryList.length<sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.v)}});var filterType=params.type,chatListByFilterType=Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_8__.c)(getState().chat,filterType),newChatList=[].concat(newHistoryList);isLoadMore&&(newChatList=[].concat(chatListByFilterType,newHistoryList)),newChatList=Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_8__.h)(newChatList),dispatch({type:"chat/SET_FILTER_SENLIVE_LIST_RESULTS",payload:{newChatList:newChatList,filterType:filterType,paging:nextPaging}}),dispatch({type:"chat/SET_CHAT_LIST",payload:{newChatList:newChatList,paging:nextPaging}}),dispatch({type:"CHAT_LOAD_HISTORY_SUCCESS"}),resolvePromise(newChatList)}else resolvePromise([])})).catch((function(error){console.error(error),getState().app.isLoadingAppData&&(dispatch({type:"APP_LOAD_HISTORY_FAILED"}),dispatch({type:"CHAT_DISPLAY_ERROR_MSG",payload:{errorMsg:sendo_web_chat_res_text__WEBPACK_IMPORTED_MODULE_9__.b.CHAT_ERROR.FAILED_LOAD_HISTORY}})),dispatch({type:"CHAT_LOAD_HISTORY_FAILED"}),dispatch({type:"CHAT_CLEAR_HISTORY"}),resolvePromise([])}));case 12:case"end":return _context4.stop()}}))}))}}function fetchChatDetailLiveStreamAsync(chat_id,params,isLoadMore){return function(dispatch,getState){return new Promise((function(resolvePromise){var paging=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(params,"paging",{});paging.offset||(dispatch({type:"CHAT_LOADING_DETAIL"}),isLoadMore||setTimeout((function(){dispatch({type:"CHAT_DISPLAY_LOADING_DETAIL"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.n));var reduxState=getState(),access_token=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(reduxState,"auth.access_token",""),correctedParams={offset:paging.offset?paging.offset:0,limit:paging.offset?2*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.w:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.w},fetchDetailsUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.b)()+"/chatlt/v9/history/room/"+chat_id+"?offset="+correctedParams.offset+"&limit="+correctedParams.limit,headers=new Headers;return headers.append("Authorization","Bearer "+access_token),headers.append("cache-control","no-cache"),fetch(fetchDetailsUrl,{headers:headers,credentials:"omit"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){var newChatDetail=Object(sendo_web_chat_helpers_data_liveStream__WEBPACK_IMPORTED_MODULE_10__.a)(jsonData,correctedParams);dispatch({type:"CHAT_STOP_LOADING_DETAIL"});var isFirstFetchDetail=!correctedParams.offset;return isFirstFetchDetail&&dispatch({type:"MDB_NOT_SCROLL_LATEST_IMG"}),resolvePromise(jsonData),dispatch({type:"chat/SET_CHAT_DETAIL_LIVESTREAM",payload:_objectSpread({},newChatDetail,{isFirstFetchDetail:isFirstFetchDetail})})})).catch((function(error){dispatch({type:"CHAT_STOP_LOADING_DETAIL"}),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_5__.a.captureWithSentry("[API][history_detail]"+error)}))}))}}function fetchChatToken(){return function(dispatch,getState){return new Promise((function(resolvePromise){var apiUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.a)()+"/chat/public/v10/token";fetch(apiUrl,{credentials:"include"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){var chatToken=decodeURIComponent(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_4__.a)(jsonData,"result.token",""));if(!chatToken)throw Error("empty response");resolvePromise(chatToken)})).catch((function(error){resolvePromise("")}))}))}}function fetchBlockSenLiveUser(partnerFptId,partnerFullName){return function(dispatch,getState){return new Promise((function(resolvePromise){var userFptId=getState().auth.userInfo.fpt_id,userAccessToken=getState().auth.access_token,apiUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.b)()+"/chatlt/v9/user/block/"+userFptId,headers=new Headers;headers.append("Authorization","Bearer "+userAccessToken),headers.append("cache-control","no-cache");var postData=[{user_id:partnerFptId,user_fullname:partnerFullName}];fetch(apiUrl,{headers:headers,credentials:"omit",method:"PUT",body:JSON.stringify(postData)}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){resolvePromise(jsonData)})).catch((function(error){resolvePromise(null)}))}))}}function fetchGetListBlockedUser(fpt_id,access_token){return function(dispatch,getState){return new Promise((function(resolvePromise){var apiUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.b)()+"/chatlt/v9/user/block/"+fpt_id,headers=new Headers;headers.append("Authorization","Bearer "+access_token),headers.append("cache-control","no-cache"),fetch(apiUrl,{headers:headers,credentials:"omit",method:"GET"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){resolvePromise(jsonData)})).catch((function(error){resolvePromise(null)}))}))}}function fetchDeleteBlockedUser(userFptId,userAccessToken,unblockUserFptId){return function(dispatch,getState){return new Promise((function(resolvePromise){var apiUrl=Object(sendo_web_chat_helpers_data_fetch__WEBPACK_IMPORTED_MODULE_11__.b)()+"/chatlt/v9/user/block/"+userFptId+"/"+unblockUserFptId,headers=new Headers;headers.append("Authorization","Bearer "+userAccessToken),headers.append("cache-control","no-cache"),fetch(apiUrl,{headers:headers,credentials:"omit",method:"DELETE"}).then((function(response){if(!response.ok)throw Error(response.statusText);return response.json()})).then((function(jsonData){resolvePromise(jsonData)})).catch((function(error){resolvePromise(null)}))}))}}},Agl7:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(milisecondTimeStamp){var lastOnlineTimeInSeconds=Math.floor(((new Date).getTime()-milisecondTimeStamp)/1e3);if(!lastOnlineTimeInSeconds)return"v\xe0i gi\xe2y";var lastOnlineTimeInYears=Math.floor(lastOnlineTimeInSeconds/31536e3);if(lastOnlineTimeInYears>=1)return lastOnlineTimeInYears+" n\u0103m";var lastOnlineTimeInMonths=Math.floor(lastOnlineTimeInSeconds/2592e3);if(lastOnlineTimeInMonths>=1)return lastOnlineTimeInMonths+" th\xe1ng";var lastOnlineTimeInWeeks=Math.floor(lastOnlineTimeInSeconds/604800);if(lastOnlineTimeInWeeks>=1)return lastOnlineTimeInWeeks+" tu\u1ea7n";var lastOnlineTimeInDays=Math.floor(lastOnlineTimeInSeconds/86400);if(lastOnlineTimeInDays>=1)return lastOnlineTimeInDays+" ng\xe0y";var lastOnlineTimeInHours=Math.floor(lastOnlineTimeInSeconds/3600);if(lastOnlineTimeInHours>=1)return lastOnlineTimeInHours+" gi\u1edd";var lastOnlineTimeInMinutes=Math.floor(lastOnlineTimeInSeconds/60);return lastOnlineTimeInMinutes>=1?lastOnlineTimeInMinutes+" ph\xfat":"v\xe0i gi\xe2y"}},CJoK:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SenLiveContext}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),SenLiveContext=function(){function SenLiveContext(){}return SenLiveContext.setShardingRoomSuffix=function(shardingRoomSuffix){this.shardingRoomSuffix=shardingRoomSuffix},SenLiveContext.getXmppConnectionSenLive=function(){return this.xmppConnection},SenLiveContext.setXmppConnectionSenLive=function(xmppConnection){this.xmppConnection=xmppConnection},SenLiveContext.leftRoom=function(){this.isJoinedRoom=!1},SenLiveContext.joinedRoom=function(){this.isJoinedRoom=!0},SenLiveContext.disconnectedXmpp=function(){this.isConnected=!1},SenLiveContext.connectedXmpp=function(){this.isConnected=!0},SenLiveContext.saveResolveJoinRoomPromise=function(resolvePromise){this.resolveJoinRoomPromise=resolvePromise},SenLiveContext.resolveJoinRoomPromise=function(data){this.resolveJoinRoomPromise(data)},SenLiveContext.saveResolveConnectXmppPromise=function(resolvePromise){this.resolveConnectXmppPromise=resolvePromise},SenLiveContext.resolveConnectXmppPromise=function(data){this.resolveConnectXmppPromise(data)},SenLiveContext.setFullJID=function(fullJID){this.fullJID=fullJID},SenLiveContext.setNickName=function(nickName){this.nickName=nickName},SenLiveContext}();_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"xmppConnection",null),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"isJoinedRoom",!1),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"isConnected",!1),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"fullJID",""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"nickName",""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"resolveConnectXmppPromise",null),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"resolveJoinRoomPromise",null),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SenLiveContext,"shardingRoomSuffix","")},ERIh:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var regenerator=__webpack_require__("o0o1"),regenerator_default=__webpack_require__.n(regenerator),isArray=(__webpack_require__("oMTi"),__webpack_require__("/1FC")),get=__webpack_require__("7EGn"),Client=__webpack_require__("JFET"),getSentry=__webpack_require__("ruw5"),inheritsLoose=__webpack_require__("VbXa"),inheritsLoose_default=__webpack_require__.n(inheritsLoose),react=__webpack_require__("q1tI"),react_default=__webpack_require__.n(react),ConnectHistory=__webpack_require__("hXde"),assertThisInitialized=__webpack_require__("PJYZ"),assertThisInitialized_default=__webpack_require__.n(assertThisInitialized),defineProperty=__webpack_require__("lSNA"),defineProperty_default=__webpack_require__.n(defineProperty),Recompose_cjs=__webpack_require__("XcqQ"),lib=__webpack_require__("Vg22"),classnames=__webpack_require__("TSYQ"),classnames_default=__webpack_require__.n(classnames),RootLayout_RootLayout=__webpack_require__("otHA"),RootLayout_default=__webpack_require__.n(RootLayout_RootLayout),styles=__webpack_require__("wTzx"),Root_RootLayout_RootLayout=function(_Component){function RootLayout(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_Component.call.apply(_Component,[this].concat(args))||this,defineProperty_default()(assertThisInitialized_default()(_this),"getResponsiveStyles",(function(className){var isOnWAP=Object(get.a)(_this.props,"app.isOnWAP",!1);return Object(styles.a)(RootLayout_default.a,className,isOnWAP)})),_this}return inheritsLoose_default()(RootLayout,_Component),RootLayout.prototype.render=function(){return react_default.a.createElement("div",{className:classnames_default()(this.getResponsiveStyles(RootLayout_default.a.Root))},this.props.children)},RootLayout}(react.Component);Root_RootLayout_RootLayout.displayName="RootLayout";var RootLayoutWithRedux=Object(Recompose_cjs.compose)(Object(lib.connect)((function(state){return{isOnWAP:state.app.isOnWAP}}),null))(Root_RootLayout_RootLayout),Root_RootLayout=function(page){return react_default.a.createElement("div",{className:RootLayout_default.a.Root},react_default.a.createElement(RootLayoutWithRedux,null,page))},Root_Root=function(_Component){function Root(){return _Component.apply(this,arguments)||this}inheritsLoose_default()(Root,_Component);var _proto=Root.prototype;return _proto.componentDidCatch=function(error,errorInfo){Object(getSentry.a)().then((function(sentry){sentry.withScope((function(scope){scope.setLevel("fatal"),Object.keys(errorInfo).forEach((function(key){scope.setExtra(key,errorInfo[key])})),sentry.captureException(error)}))}))},_proto.render=function(){var _this$props=this.props,routes=_this$props.routes,history=_this$props.history,location=_this$props.location;return react_default.a.createElement(ConnectHistory.a,{beforeLocationChange:this.beforeLocationChange,history:history,location:location,routes:routes},Root_RootLayout)},Root}(react.Component);Root_Root.displayName="Root";var components_Root=Root_Root,seamless_immutable_development=__webpack_require__("/5E1"),seamless_immutable_development_default=__webpack_require__.n(seamless_immutable_development),userHelper=__webpack_require__("xbIa"),res_const=__webpack_require__("1wGr");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var defaultState=seamless_immutable_development_default()({access_token:"",userInfo:{fpt_id:"",shop_id:"",shop_external_id:"",full_name:"",avatar:"",shop_url:"",shop_logo:"",shopPartnerFptId:""},auditUserInfo:{isCalledApi:!1,isValid:!1},role:"",shop_likes:{}}),reverse=__webpack_require__("Yk7g"),filter=__webpack_require__("Z0Cl"),forEach=__webpack_require__("OZf9"),findLastIndex=__webpack_require__("3ftV"),find=__webpack_require__("CpTu"),head=__webpack_require__("F294"),tail=__webpack_require__("F0Ax"),drop=__webpack_require__("4Ok1"),xmpp=__webpack_require__("N6vC"),helpers_msgDetail=__webpack_require__("o//j"),googleAnalytics=__webpack_require__("J9m0"),setting=__webpack_require__("1wi/"),findIndex=__webpack_require__("HI9p"),ChiDaiHelper=__webpack_require__("V69r"),xmppHelper=__webpack_require__("vURH");function chatHelper_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function chatHelper_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?chatHelper_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):chatHelper_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function addMsgDetailToChatDetails(state,msgDetail){var result=[].concat(state.chatDetails);if(result.push(msgDetail),msgDetail.message_type===res_const.s.TOPIC&&msgDetail.topic){var textMsgOfTopic=chatHelper_objectSpread({},msgDetail,{message_type:res_const.s.MESSAGE});result.push(textMsgOfTopic)}return result}function updateCurrentConversation(state,newConversation){var currentConversation=Object(get.a)(state,"conversation",null);if(!currentConversation||currentConversation.chat_id!==newConversation.chat_id)return state;var updatedConversation=chatHelper_objectSpread({},currentConversation,{},newConversation);return updatedConversation.chat_id===ChiDaiHelper.b.getDefaultChiDaiInfo().chat_id&&(updatedConversation=Object(ChiDaiHelper.j)(updatedConversation)),state.set("conversation",updatedConversation)}function updateChatListByFilterType(chatState){var newChatList=Object(xmppHelper.c)(chatState,chatState.filterType);return chatState.set("chatList",newChatList)}function addToAllChatList(state,newConversation){var allChatList=[].concat(state.filterChatList.all);(allChatList=Object(filter.a)(allChatList,(function(chatItem){return chatItem.chat_id!==newConversation.chat_id}))).unshift(newConversation);var newAllChatList=Object(ChiDaiHelper.h)(allChatList);return state.setIn(["filterChatList","all"],newAllChatList)}function addToUnrepliedChatList(state,newConversation){var unrepliedChatList=[].concat(state.filterChatList.unreplied);(unrepliedChatList=Object(filter.a)(unrepliedChatList,(function(chatItem){return chatItem.chat_id!==newConversation.chat_id}))).unshift(newConversation);var newUnrepliedChatList=Object(ChiDaiHelper.h)(unrepliedChatList);return state.setIn(["filterChatList","unreplied"],newUnrepliedChatList)}function removeFromUnrepliedChatList(state,chat_id){var unrepliedChatList=[].concat(state.filterChatList.unreplied);return Object(ChiDaiHelper.e)(chat_id)||(unrepliedChatList=Object(filter.a)(unrepliedChatList,(function(chatItem){return chatItem.chat_id!==chat_id}))),state.setIn(["filterChatList","unreplied"],unrepliedChatList)}function addToUnreadChatList(state,newConversation){var unreadChatList=[].concat(state.filterChatList.unread);(unreadChatList=Object(filter.a)(unreadChatList,(function(chatItem){return chatItem.chat_id!==newConversation.chat_id}))).unshift(newConversation);var newUnreadChatList=Object(ChiDaiHelper.h)(unreadChatList);return state.setIn(["filterChatList","unread"],newUnreadChatList)}function removeFromUnreadChatList(state,chat_id){var unreadChatList=[].concat(state.filterChatList.unread);return Object(ChiDaiHelper.e)(chat_id)&&!userHelper.a.isBuyer()||(unreadChatList=Object(filter.a)(unreadChatList,(function(chatItem){return chatItem.chat_id!==chat_id}))),state.setIn(["filterChatList","unread"],unreadChatList)}function updateChatList(state,newConversation){var newChatList=[].concat(state.chatList);return(newChatList=Object(filter.a)(newChatList,(function(chat){return chat.chat_id!==newConversation.chat_id}))).unshift(newConversation),newChatList=Object(ChiDaiHelper.h)(newChatList),state.set("chatList",newChatList)}function updateSearchChatListResults(state,newConversation){var isListChatContainNewConversation=!1,chatList=[].concat(state.searchChatList.results);return chatList=Object(filter.a)(chatList,(function(chat){return chat.chat_id===newConversation.chat_id&&(isListChatContainNewConversation=!0),chat.chat_id!==newConversation.chat_id})),isListChatContainNewConversation?(chatList.unshift(newConversation),state.set("searchChatList",chatHelper_objectSpread({},state.searchChatList,{results:chatList}))):state}function updateCurrentTopic(state,newConversation){var firstItemId=Object(get.a)(newConversation,"topic.items.0.id","");if(!newConversation.topic||!firstItemId)return state;var currentConversation=Object(get.a)(state,"conversation",null);return currentConversation&&currentConversation.chat_id===newConversation.chat_id?state.set("currentTopic",newConversation.topic):state}function setSeenForAllChatListFromClient(state,seenData){var currentChatListIndex=Object(findIndex.a)(state.filterChatList.all,{chat_id:seenData.chat_id});if(-1===currentChatListIndex)return state;var updatedSeenChatList=Object(helpers_msgDetail.e)(state.filterChatList.all,currentChatListIndex,seenData);return state.setIn(["filterChatList","all"],[].concat(updatedSeenChatList))}function setSeenForUnrepliedChatListFromClient(state,seenData){var currentChatListIndex=Object(findIndex.a)(state.filterChatList.unreplied,{chat_id:seenData.chat_id});if(-1===currentChatListIndex)return state;var updatedSeenChatList=Object(helpers_msgDetail.e)(state.filterChatList.unreplied,currentChatListIndex,seenData);return state.setIn(["filterChatList","unreplied"],[].concat(updatedSeenChatList))}function setSeenForUnreadChatListFromClient(state,seenData){var currentChatListIndex=Object(findIndex.a)(state.filterChatList.unread,{chat_id:seenData.chat_id});if(-1===currentChatListIndex)return state;var updatedSeenChatList=Object(helpers_msgDetail.e)(state.filterChatList.unread,currentChatListIndex,seenData);return state.setIn(["filterChatList","unread"],[].concat(updatedSeenChatList))}function setSeenChatListFromClient(state,seenData){var currentChatListIndex=Object(findIndex.a)(state.chatList,{chat_id:seenData.chat_id});if(-1===currentChatListIndex)return state;var updatedSeenChatList=Object(helpers_msgDetail.e)(state.chatList,currentChatListIndex,seenData);return state.set("chatList",updatedSeenChatList)}var chatHelper=__webpack_require__("G77k"),DropdownFilter_setting=__webpack_require__("k6RH"),liveStream=__webpack_require__("T19g");function chat_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function chat_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?chat_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):chat_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var chat_defaultState=seamless_immutable_development_default()({chatList:[],listPaging:{},newChatListFromXMPP:[],filterType:res_const.l.ALL,selectedChatFilterOption:DropdownFilter_setting.a[0],selectedSenLiveFilterOption:DropdownFilter_setting.b[0],filterChatList:{all:[],allPaging:{},isFetchedAll:!1,unread:[],unreadPaging:{},isFetchedUnread:!1,unreplied:[],unrepliedPaging:{},isFetchedUnreplied:!1},filterSenLiveList:{all:[],allPaging:{},isFetchedAll:!1},searchChatList:{results:[],isSearching:!1,searchingValue:""},chatSystemType:res_const.f.CHAT,listStatus:{},chatDetails:[],detailPaging:{},conversation:{},context:{},shopInfos:{},isLoadingHistory:!1,isDisplayLoadingHistory:!1,isLoadingDetail:!1,shouldDisplayLoadingDetail:!1,isLoadedLastHistory:!1,isLoadedLastDetail:!1,isCreatingAsyncMessage:!1,isDisplaySearchLoading:!1,currentTopic:null,isStartConnectXMPP:!1,isDidInitGetAllUserStatus:!1,isHaveTopicMsgInDetails:!1,chatErrorMsg:"",chiDai:{isRecievedAnswerForLastMsg:!1,isDisplayTyping:!1},savedChattingSenLiveState:{conversation:{},chatDetails:[],scrollTop:0,type:res_const.m.ALL},savedChattingChatState:{conversation:{},chatDetails:[],scrollTop:0,type:res_const.l.ALL},chatDetailScrollTop:0});function messageDisplayBox_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function messageDisplayBox_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?messageDisplayBox_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):messageDisplayBox_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var messageDisplayBox_defaultState=seamless_immutable_development_default()({scrollStatus:{shouldAutoScroll:!0},alreadyScrollLatestImage:!1,parentContextData:{isNew:!1,chatId:-1,shopId:-1,contactPhone:"",productId:"",productImage:"",topic:null}}),sellerText=__webpack_require__("egp3"),buyerText=__webpack_require__("qWR6");function app_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function app_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?app_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):app_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var app_defaultState=seamless_immutable_development_default()({networkStatus:res_const.k.APP.NETWORK_STATUS.ONLINE,xmppStatus:res_const.k.APP.XMPP_STATUS.NOT_INIT,isDisplayChatList:!0,isDisplayChatDetail:!0,mobileStep:res_const.k.APP.MOBILE.STEP.CHAT_LIST,isOnWAP:!1,error:{isDisplay:!1,message:""},chatWindowStatus:res_const.k.APP.CHAT_WINDOW_STATUS.CLOSED,isLoadingAppData:!1,isDisplayLoadingData:!1,isLoadedHistory:!1,isOpeningNewChat:!1,isInitFromParentSite:!1,ROLE_TEXT:app_objectSpread({},buyerText.a),ROLE_SETTING:app_objectSpread({},setting.e)});function xmpp_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function xmpp_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?xmpp_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):xmpp_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function defaultResolvePromise(){return{error:"default resolve"}}function defaultRejectPromise(){return{error:"default reject"}}var xmpp_defaultState=seamless_immutable_development_default()({fetchHistoryListPayload:null,fetchHistoryDetailPromise:{resolve:defaultResolvePromise,reject:defaultRejectPromise},searchHistoryListPromise:{resolve:defaultResolvePromise,reject:defaultRejectPromise},isFirstFetchDetail:!1,deleteHistoryPromise:{resolve:defaultResolvePromise,reject:defaultRejectPromise},deletingChatId:"",fetchAutoReplyConfigPromise:{resolve:defaultResolvePromise,reject:defaultRejectPromise},saveAutoReplyConfigPromise:{resolve:defaultResolvePromise,reject:defaultRejectPromise,submitData:{}},isLimitSendingMsg:!1});function config_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function config_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?config_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):config_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var config_defaultState=seamless_immutable_development_default()({configChatSystemType:res_const.h.SENDO,selectedConfigMenuOption:res_const.i.AUTO_REPLY,autoReplyData:{enabled:!1,default_text:"",product_topic_enabled:!1,product_topic_text:"",order_topic_enabled:!1,order_topic_text:"",created_by:""},getAutoReplyConfig:{isError:!1,isFetching:!1,isDisplayLoading:!1}}),sendProductData_defaultState=seamless_immutable_development_default()({products:[],metaData:null,isLoading:!1,isDisplayLoading:!1}),sendOrderData_defaultState=seamless_immutable_development_default()({isLoading:!1,isDisplayLoading:!1}),sender_defaultState=seamless_immutable_development_default()({nextMsgData:{isSendNextTime:!1,type:res_const.q.TEXT,quote:{msg_id:"",msg_txt:"",msg_created_by:"",msg_created_by_fpt_id:"",msg_created_at:0,created_by:"",created_by_fpt_id:""}}}),redux=__webpack_require__("pn57"),newChat=Object(redux.combineReducers)({sender:function(state,action){switch(void 0===state&&(state=sender_defaultState),action.type){case"sender/SET_QUOTE_NEXT_MSG":var quoteData=action.payload.quoteData;return state.set("nextMsgData",{isSendNextTime:!0,type:res_const.q.QUOTE,quote:{msg_id:quoteData.msg_id,msg_txt:quoteData.msg_txt,msg_created_by:quoteData.msg_created_by,msg_created_by_fpt_id:""+quoteData.msg_created_by_fpt_id,msg_created_at:quoteData.msg_created_at,created_by:quoteData.created_by,created_by_fpt_id:""+quoteData.created_by_fpt_id}});case"CHAT_DELETE_CONVERSATION":case"chat/DELETE_CONVERSATION_LIVESTREAM":case"chat/CHAT_CLEAR_CONVERSATION":case"sender/CLEAR_NEXT_MSG_DATA":return state.set("nextMsgData",sender_defaultState.nextMsgData);default:return state}}}),confirmModal_defaultState=seamless_immutable_development_default()({isOpen:!1,infoMsg:"",acceptLabel:"",cancelLabel:"",resolvePromise:function(){}}),redux_reducers={auth:function(state,action){switch(void 0===state&&(state=defaultState),action.type){case"SET_USER_AUTHENTICATION":var access_token=Object(get.a)(action.payload,"authenData.access_token",""),role=Object(get.a)(action.payload,"authenData.role",res_const.F.BUYER);userHelper.a.role=role;var userInfo=Object(get.a)(action.payload,"authenData.userInfo",null),userInfoFromParentSite=userHelper.a.parseNewUserInfo(userInfo),newUserInfo=_objectSpread({},state.userInfo,{},userInfoFromParentSite);newUserInfo.fpt_id=""+newUserInfo.fpt_id,newUserInfo.full_name||(newUserInfo.full_name=""+newUserInfo.fpt_id);var newState=state.set("access_token",access_token).set("userInfo",newUserInfo).set("role",role);return role===res_const.F.BUYER&&access_token&&newUserInfo.fpt_id&&(newState=newState.set("auditUserInfo",{isCalledApi:!0,isValid:!0})),newState;case"SET_USER_INFO":var _newUserInfo=_objectSpread({},action.payload.updatedUserInfo);return _newUserInfo.full_name||(_newUserInfo.full_name=""+_newUserInfo.fpt_id),_newUserInfo.fpt_id=""+_newUserInfo.fpt_id,state.set("userInfo",_newUserInfo);case"CHAT_FETCH_CONVERT_SHOP_ID_SUCCESS":return state.set("userInfo",_objectSpread({},state.userInfo,{shop_id:""+action.payload.shop_id,shop_code:""+action.payload.shop_code}));case"USER_UPDATE_LIKE_SHOP":var _objectSpread2,shop_likes=_objectSpread({},state.shop_likes,((_objectSpread2={})[action.payload.shopId]=action.payload.liked,_objectSpread2));return state.set("shop_likes",shop_likes);case"USER_GET_LIKE_SHOP":var _objectSpread3,_shop_likes=_objectSpread({},state.shop_likes,((_objectSpread3={})[action.payload.shopId]=action.payload.liked,_objectSpread3));return state.set("shop_likes",_shop_likes);case"CHAT_FETCH_SELLER_INFO_FAILED":return state.set("auditUserInfo",_objectSpread({},state.auditUserInfo,{isCalledApi:!0}));case"CHAT_FETCH_SELLER_INFO_SUCCESS":return state.set("auditUserInfo",_objectSpread({},state.auditUserInfo,{isCalledApi:!0,isValid:!0}));case"XMPP_AUTH_FAILED":return state.set("auditUserInfo",_objectSpread({},state.auditUserInfo,{isValid:!1}));default:return state}},chat:function(state,action){switch(void 0===state&&(state=chat_defaultState),action.type){case"CHAT_START_CONNECT_XMPP":return state.set("isStartConnectXMPP",!0);case"chat/SET/isLoadedLastHistory":return state.set("isLoadedLastHistory",action.payload.isLoadedLastHistory);case"chat/SET_FILTER_CHAT_LIST_RESULTS":switch(action.payload.filterType){case res_const.l.UNREPLIED:return state.setIn(["filterChatList","unreplied"],action.payload.newChatList).setIn(["filterChatList","unrepliedPaging"],action.payload.paging).setIn(["filterChatList","isFetchedUnreplied"],!0);case res_const.l.UNREAD:return state.setIn(["filterChatList","unread"],action.payload.newChatList).setIn(["filterChatList","unreadPaging"],action.payload.paging).setIn(["filterChatList","isFetchedUnread"],!0);case res_const.l.ALL:default:return state.setIn(["filterChatList","all"],action.payload.newChatList).setIn(["filterChatList","allPaging"],action.payload.paging).setIn(["filterChatList","isFetchedAll"],!0)}case"chat/SET_FILTER_SENLIVE_LIST_RESULTS":switch(action.payload.filterType){case res_const.m.ALL:default:return state.setIn(["filterSenLiveList","all"],action.payload.newChatList).setIn(["filterSenLiveList","allPaging"],action.payload.paging).setIn(["filterSenLiveList","isFetchedAll"],!0)}case"chat/SET_CHAT_LIST":return state.set("chatList",action.payload.newChatList).set("listPaging",Object(get.a)(action.payload,"paging",{}));case"chat/UPDATE_CHAT_LIST_BY_FILTER_TYPE":return updateChatListByFilterType(state);case"CHAT_LOAD_HISTORY_SUCCESS":return state.set("isLoadingHistory",!1).set("isDisplayLoadingHistory",!1);case"CHAT_LOADING_HISTORY":return state.set("isLoadingHistory",!0);case"chat/DISPLAY_LOADING_HISTORY":return state.isLoadingHistory?state.set("isDisplayLoadingHistory",!0):state;case"chat/TIMEOUT_LOAD_HISTORY":case"CHAT_LOAD_HISTORY_FAILED":return state.set("isLoadingHistory",!1).set("isDisplayLoadingHistory",!1);case"CHAT_DISPLAY_ERROR_MSG":return state.set("chatErrorMsg",action.payload.errorMsg);case"CHAT_CLEAR_HISTORY":return state.set("chatList",[]);case"chat/CHAT_LOAD_NEW_CONVERSATION":var newConversation=Object(get.a)(action.payload,"conversation",null);return newConversation&&(state=updateSearchChatListResults(state=updateChatListByFilterType(state=addToUnrepliedChatList(state=addToUnreadChatList(state=addToAllChatList(state,newConversation),newConversation),newConversation)),newConversation)),state;case"CHAT_INIT_GET_ALL_USER_STATUS":return state.set("isDidInitGetAllUserStatus",!0);case"CHAT_GET_USER_STATUS":var listStatus=chat_objectSpread({},state.listStatus);return Object(forEach.a)(action.payload,(function(data){var last_access_time=Object(get.a)(data,"last_access_time",0);last_access_time||(last_access_time=Object(get.a)(listStatus[data.user_id],"last_access_time",0)),listStatus[data.user_id]={status:data.status,last_access_time:last_access_time,response_time:Object(get.a)(data,"response_time",""),response_rate:Object(get.a)(data,"response_rate",""),shop_type:Object(get.a)(data,"shop_type",-1)}})),state.set("listStatus",listStatus);case"CHAT_SET_CHI_DAI_STATUS":var _listStatus=chat_objectSpread({},state.listStatus);return _listStatus[ChiDaiHelper.b.getDefaultChiDaiInfo().partner_id]={status:"available",last_access_time:0,response_time:"",response_rate:"",shop_type:-1},state.set("listStatus",_listStatus);case"CHAT_LOADING_DETAIL":return state.set("isLoadingDetail",!0);case"CHAT_STOP_LOADING_DETAIL":return state.set("isLoadingDetail",!1).set("shouldDisplayLoadingDetail",!1);case"CHAT_DISPLAY_LOADING_DETAIL":return state=state.isLoadingDetail?state.set("shouldDisplayLoadingDetail",!0):state.set("shouldDisplayLoadingDetail",!1);case"CHAT_LOAD_DETAIL":var historyChatDetails=Object(get.a)(action.payload,"history",[]);state=historyChatDetails.length<setting.w?state.set("isLoadedLastDetail",!0):state.set("isLoadedLastDetail",!1);var paging=Object(get.a)(action.payload,"paging",{});if(!historyChatDetails.length)return state;var filteredDuplicateHistoryChatDetails=Object(filter.a)(historyChatDetails,(function(chatDetail){if(chatDetail.message_object||chatDetail.topic)return chatDetail})),isFirstLoad=Object(get.a)(action.payload,"isFirstFetchDetail",!1),addedCustomAttrHistoryChatDetails=Object(reverse.a)(filteredDuplicateHistoryChatDetails).map((function(msgDetail){var customMsgDetail=helpers_msgDetail.c(msgDetail,{isFirstLoad:isFirstLoad});return customMsgDetail=Object(chatHelper.b)(customMsgDetail)})),oldChatDetails=[].concat(state.chatDetails),firstLastMsg=null;isFirstLoad||(firstLastMsg=Object(head.a)(oldChatDetails)).message_type===res_const.s.TIME_DIVIDER&&(oldChatDetails=Object(tail.a)(oldChatDetails),firstLastMsg=Object(head.a)(oldChatDetails));var addedTimeDividerChatDetails=helpers_msgDetail.a(addedCustomAttrHistoryChatDetails,firstLastMsg),newChatDetails=[];return isFirstLoad?(newChatDetails=[].concat(addedTimeDividerChatDetails),newChatDetails=helpers_msgDetail.h(newChatDetails)):newChatDetails=[].concat(addedTimeDividerChatDetails,oldChatDetails),state.set("chatDetails",newChatDetails).set("isHaveTopicMsgInDetails",Object(chatHelper.t)(newChatDetails)).set("detailPaging",paging);case"chat/SET_CHAT_DETAIL_LIVESTREAM":var _historyChatDetails=Object(get.a)(action.payload,"history",[]);state=_historyChatDetails.length<setting.w?state.set("isLoadedLastDetail",!0):state.set("isLoadedLastDetail",!1);var _paging=Object(get.a)(action.payload,"paging",{});if(!_historyChatDetails.length)return state;var _isFirstLoad=Object(get.a)(action.payload,"isFirstFetchDetail",!1),_oldChatDetails=[].concat(state.chatDetails),_firstLastMsg=null;_isFirstLoad||(_firstLastMsg=Object(head.a)(_oldChatDetails)).message_type===res_const.s.TIME_DIVIDER&&(_oldChatDetails=Object(tail.a)(_oldChatDetails),_firstLastMsg=Object(head.a)(_oldChatDetails));var _addedTimeDividerChatDetails=helpers_msgDetail.a(_historyChatDetails,_firstLastMsg),_newChatDetails=[];return _isFirstLoad?(_newChatDetails=[].concat(_addedTimeDividerChatDetails),_newChatDetails=helpers_msgDetail.h(_newChatDetails)):_newChatDetails=[].concat(_addedTimeDividerChatDetails,_oldChatDetails),state.set("chatDetails",_newChatDetails).set("isHaveTopicMsgInDetails",Object(chatHelper.t)(_newChatDetails)).set("detailPaging",_paging);case"chat/ADD_SENLIVE_MSG_TO_HISOTRY":var historyDetailMsg=action.payload.historyDetailMsg,newSenLiveAllList=Object(liveStream.f)(state.filterSenLiveList.all,historyDetailMsg.chat_id);if((state=state.setIn(["filterSenLiveList","all"],newSenLiveAllList)).conversation.chat_id===historyDetailMsg.chat_id){var newChatList=Object(liveStream.f)(state.chatList,historyDetailMsg.chat_id),_newChatDetails2=[].concat(state.chatDetails,[action.payload.historyDetailMsg]);return _newChatDetails2.length>500&&(_newChatDetails2=Object(drop.a)(_newChatDetails2,_newChatDetails2.length-500)),state.set("chatDetails",_newChatDetails2).set("chatList",newChatList)}return state.savedChattingSenLiveState.conversation.chat_id===historyDetailMsg.chat_id?state.setIn(["savedChattingSenLiveState","chatDetails"],[].concat(state.savedChattingSenLiveState.chatDetails,[action.payload.historyDetailMsg])):state;case"CHAT_DELETE_CONVERSATION":var chatList=Object(filter.a)(state.chatList,(function(item){return item.chat_id!==action.payload.chat_id})),searchChatListResults=Object(filter.a)(state.searchChatList.results,(function(item){return item.chat_id!==action.payload.chat_id})),allFilterChatList=Object(filter.a)(state.filterChatList.all,(function(item){return item.chat_id!==action.payload.chat_id})),unreadFilterChatList=Object(filter.a)(state.filterChatList.unread,(function(item){return item.chat_id!==action.payload.chat_id})),unrepliedFilterChatList=Object(filter.a)(state.filterChatList.unreplied,(function(item){return item.chat_id!==action.payload.chat_id}));return state.set("conversation",{}).set("chatDetails",[]).set("chatList",chatList).setIn(["filterChatList","all"],allFilterChatList).setIn(["filterChatList","unread"],unreadFilterChatList).setIn(["filterChatList","unreplied"],unrepliedFilterChatList).set("searchChatList",chat_objectSpread({},state.searchChatList,{results:searchChatListResults}));case"chat/DELETE_CONVERSATION_LIVESTREAM":var _chatList=Object(filter.a)(state.chatList,(function(item){return item.chat_id!==action.payload.chat_id})),allSenLiveList=Object(filter.a)(state.filterSenLiveList.all,(function(item){return item.chat_id!==action.payload.chat_id}));return state.set("conversation",{}).set("chatDetails",[]).set("chatList",_chatList).setIn(["filterSenLiveList","all"],allSenLiveList);case"XMPP_ON_MESSAGE":var parsedMsg=Object(xmpp.u)(action.payload.xmppData);if(!parsedMsg)return state;var seenData=Object(get.a)(parsedMsg,"seenData",null);if(seenData)return userHelper.a.isSeller()&&seenData.you_re_shop?state=(state=removeFromUnreadChatList(state=setSeenForUnreadChatListFromClient(state=setSeenForUnrepliedChatListFromClient(state=setSeenForAllChatListFromClient(state,seenData),seenData),seenData),seenData.chat_id)).conversation.chat_id!==seenData.chat_id||state.filterType===res_const.l.ALL?updateChatListByFilterType(state):setSeenChatListFromClient(state,seenData):seenData.fromUsername!==seenData.toUsername?state=(state=setSeenForUnreadChatListFromClient(state=setSeenForUnrepliedChatListFromClient(state=setSeenForAllChatListFromClient(state=function(state,seenData){var seenMsgIndex=Object(findLastIndex.a)(state.chatDetails,(function(chatDetail){return chatDetail.chat_id.toLowerCase()===seenData.chat_id.toLowerCase()}));if(-1===seenMsgIndex)return state;var updatedSeenStatusChatDetails=Object(helpers_msgDetail.f)(state.chatDetails,seenMsgIndex,seenData);return state.set("chatDetails",[].concat(updatedSeenStatusChatDetails))}(state,seenData),seenData),seenData),seenData)).conversation.chat_id!==seenData.chat_id||state.filterType===res_const.l.ALL?updateChatListByFilterType(state):setSeenChatListFromClient(state,seenData):seenData.fromUsername===seenData.toUsername&&(state=(state=removeFromUnreadChatList(state=setSeenForUnreadChatListFromClient(state=setSeenForUnrepliedChatListFromClient(state=setSeenForAllChatListFromClient(state,seenData),seenData),seenData),seenData.chat_id)).conversation.chat_id!==seenData.chat_id||state.filterType===res_const.l.ALL?updateChatListByFilterType(state):setSeenChatListFromClient(state,seenData)),state;var msgDetail=Object(get.a)(parsedMsg,"detailData",null);if(!msgDetail)return state;if(ChiDaiHelper.b.isDisabledChiDai&&(parsedMsg.from===setting.h.partner_id||msgDetail.partner_id===setting.h.partner_id))return state;var partner_id_from_history=function(chatState,chat_id){var chatHaveMsg=Object(find.a)(chatState.chatList,(function(chat){return chat.chat_id===chat_id}));return chatHaveMsg?chatHaveMsg.partner_id:""}(state,msgDetail.chat_id);switch(msgDetail=Object(xmpp.w)(parsedMsg,action.payload.xmppUsername,partner_id_from_history),helpers_msgDetail.b(msgDetail,action.payload.xmppUsername)){case res_const.y.FROM_ANOTHER_ME_SELLER_TO_OTHER_BUYER:case res_const.y.FROM_ANOTHER_ME_BUYER_TO_OTHER_SELLER:case res_const.y.FROM_OTHER_BUYER_TO_ME_BUYER:case res_const.y.FROM_OTHER_SELLER_TO_ME_SELLER:return state;case res_const.y.FROM_ANOTHER_ME_BUYER_TO_ME_SELLER:case res_const.y.FROM_ANOTHER_ME_SELLER_TO_ME_BUYER:msgDetail.is_owner=0}if(state=function(state,msgDetail){if(msgDetail.is_owner||msgDetail.message_type===res_const.s.AUTO_REPLY)return state;var newListOnlineStatus=chatHelper_objectSpread({},state.listStatus);return newListOnlineStatus&&newListOnlineStatus[msgDetail.partner_id]&&newListOnlineStatus[msgDetail.partner_id].status&&(newListOnlineStatus[msgDetail.partner_id]=chatHelper_objectSpread({},newListOnlineStatus[msgDetail.partner_id],{status:"available"})),state.set("listStatus",newListOnlineStatus)}(state,msgDetail=function(msgDetail){var result=chatHelper_objectSpread({},msgDetail),firstTopicItemId=Object(get.a)(result,"topic.items.0.id","");return result.message_type!==res_const.s.TOPIC||firstTopicItemId||(result.message_type=res_const.s.MESSAGE),result}(msgDetail=Object(chatHelper.z)(msgDetail))),msgDetail=Object(chatHelper.a)(msgDetail),state.conversation.chat_id===msgDetail.chat_id){var _newChatDetails3=addMsgDetailToChatDetails(state,msgDetail);_newChatDetails3=helpers_msgDetail.d(_newChatDetails3),_newChatDetails3=helpers_msgDetail.h(_newChatDetails3),state=state.set("chatDetails",[].concat(_newChatDetails3))}msgDetail.is_owner||googleAnalytics.e(msgDetail);var _newConversation=Object(xmpp.h)(msgDetail);return state.conversation.chat_id===msgDetail.chat_id&&(state=updateCurrentConversation(state,_newConversation)),state=addToUnrepliedChatList(state=addToAllChatList(state=Object(ChiDaiHelper.i)(state),_newConversation),_newConversation),Object(chatHelper.x)(_newConversation)||(state=removeFromUnrepliedChatList(state,_newConversation.chat_id)),state=updateCurrentTopic(state=updateSearchChatListResults(state=(state=addToUnreadChatList(state,_newConversation)).conversation.chat_id!==msgDetail.chat_id||state.filterType===res_const.l.ALL?updateChatListByFilterType(state):updateChatList(state,_newConversation),_newConversation),_newConversation);case"XMPP_ON_OWNER_MESSAGE":var _msgDetail=action.payload.parsedMsg.detailData,isUpdateExistedMsg=Object(get.a)(_msgDetail,"clientInfo.isUpdateExistedMsg",!1);if(_msgDetail=helpers_msgDetail.i(_msgDetail),state.conversation.chat_id===_msgDetail.chat_id)if(isUpdateExistedMsg)state=function(state,msgDetail){msgDetail.message_type===res_const.s.TOPIC&&msgDetail.topic&&(msgDetail.message_type=res_const.s.MESSAGE);var updatedMsgDetails=Object(helpers_msgDetail.j)(state.chatDetails,msgDetail);return state.set("chatDetails",[].concat(updatedMsgDetails))}(state,_msgDetail);else{var _newChatDetails4=addMsgDetailToChatDetails(state,_msgDetail);_newChatDetails4=helpers_msgDetail.d(_newChatDetails4),_newChatDetails4=helpers_msgDetail.h(_newChatDetails4),state=state.set("chatDetails",[].concat(_newChatDetails4))}_msgDetail=Object(chatHelper.c)(_msgDetail);var _newConversation2=Object(xmpp.h)(_msgDetail);return state.conversation.chat_id===_msgDetail.chat_id&&(state=updateCurrentConversation(state,_newConversation2)),state=(state=addToAllChatList(state=removeFromUnrepliedChatList(state=removeFromUnreadChatList(state,_newConversation2.chat_id),_newConversation2.chat_id),_newConversation2)).conversation.chat_id!==_msgDetail.chat_id||state.filterType===res_const.l.ALL?updateChatListByFilterType(state):updateChatList(state,_newConversation2),Object(ChiDaiHelper.f)(_newConversation2)&&userHelper.a.isSeller()&&(state=function(state,newConversation){var unrepliedChatList=[].concat(state.filterChatList.unreplied);return(unrepliedChatList=Object(filter.a)(unrepliedChatList,(function(chat){return chat.chat_id!==newConversation.chat_id}))).unshift(newConversation),state.setIn(["filterChatList","unreplied"],unrepliedChatList)}(state=function(state,newConversation){var unreadChatList=[].concat(state.filterChatList.unread);return(unreadChatList=Object(filter.a)(unreadChatList,(function(chat){return chat.chat_id!==newConversation.chat_id}))).unshift(newConversation),state.setIn(["filterChatList","unread"],unreadChatList)}(state,_newConversation2),_newConversation2)),state=updateCurrentTopic(state=updateSearchChatListResults(state,_newConversation2),_newConversation2);case"CREATE_ASYNC_MSG_SENDING":return state=state.set("isCreatingAsyncMessage",!0);case"CREATE_ASYNC_MSG_DONE":return state=state.set("isCreatingAsyncMessage",!1);case"CHAT_ACTIVE_CONVERSATION":return state.set("conversation",action.payload);case"chat/CHAT_REFRESH_MSG_DETAILS":return state.set("chatDetails",[].concat(state.chatDetails));case"chat/CHAT_CLEAR_CONVERSATION":return state.set("conversation",{}).set("chatDetails",[]).set("detailPaging",{});case"chat/CHAT_SEEN_MSG":var msgDetailCurrentChatIndex=Object(findLastIndex.a)(state.chatDetails,{message_id:action.payload.message.message_id});if(msgDetailCurrentChatIndex>-1){var updatedSeenChatDetails=helpers_msgDetail.f(state.chatDetails,msgDetailCurrentChatIndex,action.payload.message);state=state.set("chatDetails",[].concat(updatedSeenChatDetails))}var _newConversation3=chat_objectSpread({},(state=function(state,seenData){var currentChatListIndex=Object(findIndex.a)(state.searchChatList.results,{chat_id:seenData.chat_id});if(-1===currentChatListIndex)return state;var updatedSeenChatList=Object(helpers_msgDetail.e)(state.searchChatList.results,currentChatListIndex,seenData);return state.set("searchChatList",chatHelper_objectSpread({},state.searchChatList,{results:[].concat(updatedSeenChatList)}))}(state=(state=removeFromUnreadChatList(state=setSeenForUnreadChatListFromClient(state=setSeenForUnrepliedChatListFromClient(state=setSeenForAllChatListFromClient(state,action.payload.message),action.payload.message),action.payload.message),action.payload.message.chat_id)).conversation.chat_id!==action.payload.message.chat_id||state.filterType===res_const.l.ALL?updateChatListByFilterType(state):setSeenChatListFromClient(state,action.payload.message),action.payload.message)).conversation,{is_read:1});return _newConversation3.message_status=Object(chatHelper.l)(_newConversation3),state=state.set("conversation",_newConversation3);case"chat/CHAT_SET_SHOP_INFO":var newShopInfos=chat_objectSpread({},state.shopInfos);return newShopInfos[action.payload.shopId]=action.payload.shopInfo,state.set("shopInfos",newShopInfos);case"CHAT_SET_CURRENT_TOPIC":return state.set("currentTopic",action.payload.currentTopic);case"SEARCH_HISTORY_START":return state.set("isDisplaySearchLoading",!0).set("searchChatList",chat_objectSpread({},state.searchChatList,{isSearching:!0,searchingValue:action.payload.searchValue}));case"SEARCH_HISTORY_SUCCESS":return state.set("isDisplaySearchLoading",!1).set("searchChatList",chat_objectSpread({},state.searchChatList,{isSearching:!1,results:Object(get.a)(action.payload,"history",[])}));case"SEARCH_HISTORY_FAILED":return state.set("isDisplaySearchLoading",!1).set("searchChatList",chat_objectSpread({},state.searchChatList,{isSearching:!1}));case"DISPLAY_SEARCH_LOADING":return state.set("isDisplaySearchLoading",!0).set("searchChatList",chat_objectSpread({},state.searchChatList,{searchingValue:action.payload.searchValue}));case"HIDE_SEARCH_LOADING_WITHOUT_DATA":return state.set("isDisplaySearchLoading",!1).set("searchChatList",chat_objectSpread({},state.searchChatList,{searchingValue:""}));case"XMPP_ON_IQ_HISTORY_DETAIL":return state;case"chat/SEND_MSG_CHI_DAI":return state.set("chiDai",chat_objectSpread({},state.chiDai,{isRecievedAnswerForLastMsg:!1}));case"chat/STOP_DISPLAY_TYPING":return state.set("chiDai",chat_objectSpread({},state.chiDai,{isRecievedAnswerForLastMsg:!1,isDisplayTyping:!1}));case"chat/SHOULD_DISPLAY_TYPING":return state.chiDai.isRecievedAnswerForLastMsg?state.set("chiDai",chat_objectSpread({},state.chiDai,{isRecievedAnswerForLastMsg:!1,isDisplayTyping:!1})):state.set("chiDai",chat_objectSpread({},state.chiDai,{isDisplayTyping:!0}));case"chat/SET_CHAT_LIST_FILTER_TYPE":var selectedChatFilterOption=Object(find.a)(DropdownFilter_setting.a,(function(filterOption){return filterOption.type===action.payload.filterType}));return state.set("filterType",action.payload.filterType).set("selectedChatFilterOption",selectedChatFilterOption);case"chat/SAVE_CHATTING_SENLIVE_STATE":return state.set("savedChattingSenLiveState",action.payload.currentChatState);case"chat/CLEAR_CHATTING_SENLIVE_STATE":return state.set("savedChattingSenLiveState",chat_defaultState.savedChattingSenLiveState);case"chat/RESTORE_CHATTING_SENLIVE_STATE":var savedChattingSenLiveState=action.payload.savedChattingSenLiveState;return state.set("conversation",savedChattingSenLiveState.conversation).set("chatDetails",savedChattingSenLiveState.chatDetails).set("detailPaging",savedChattingSenLiveState.detailPaging);case"chat/SAVE_CHATTING_CHAT_STATE":return state.set("savedChattingChatState",action.payload.currentChatState);case"chat/CLEAR_CHATTING_CHAT_STATE":return state.set("savedChattingChatState",chat_defaultState.savedChattingChatState);case"chat/RESTORE_CHATTING_CHAT_STATE":var savedChattingChatState=action.payload.savedChattingChatState;return state.set("conversation",savedChattingChatState.conversation).set("chatDetails",savedChattingChatState.chatDetails).set("detailPaging",savedChattingChatState.detailPaging);case"chat/SET_CHAT_SYSTEM_TYPE":return state.set("chatSystemType",action.payload.chatSystemType);case"chat/SAVE_CURRENT_SCROLL_STATE":return state.set("chatDetailScrollTop",action.payload.scrollTop);default:return state}},messageDisplayBox:function(messageDisplayBoxState,action){switch(void 0===messageDisplayBoxState&&(messageDisplayBoxState=messageDisplayBox_defaultState),action.type){case"messageDisplayBox/MSG_DISPLAY_BOX_ENABLE_AUTO_SCROLL":var newScrollStatus=messageDisplayBox_objectSpread({},messageDisplayBoxState.scrollStatus,{shouldAutoScroll:!0});return messageDisplayBoxState.set("scrollStatus",newScrollStatus);case"messageDisplayBox/MSG_DISPLAY_BOX_DISABLE_AUTO_SCROLL":var _newScrollStatus=messageDisplayBox_objectSpread({},messageDisplayBoxState.scrollStatus,{shouldAutoScroll:!1});return messageDisplayBoxState.set("scrollStatus",_newScrollStatus);case"messageDisplayBox/MSG_DISPLAY_BOX_CLEAR_PARENT_CONTEXT_DATA":return messageDisplayBoxState.set("parentContextData",messageDisplayBox_defaultState.parentContextData);case"messageDisplayBox/MSG_DISPLAY_BOX_SET_PARENT_CONTEXT_DATA":return messageDisplayBoxState.set("parentContextData",action.payload.parentContextData);case"MDB_ALREADY_SCROLL_LATEST_IMG":return messageDisplayBoxState.set("alreadyScrollLatestImage",!0);case"MDB_NOT_SCROLL_LATEST_IMG":return messageDisplayBoxState.set("alreadyScrollLatestImage",!1);case"XMPP_ON_MESSAGE":var parsedMsg=Object(xmpp.u)(action.payload.xmppData);if(!parsedMsg)return messageDisplayBoxState;var msgDetail=Object(get.a)(parsedMsg,"detailData",null);return msgDetail&&(msgDetail.message_object&&msgDetail.message_object.type===res_const.q.IMAGE&&messageDisplayBoxState.scrollStatus.shouldAutoScroll)?messageDisplayBoxState.set("alreadyScrollLatestImage",!1):messageDisplayBoxState;case"CHAT_DELETE_CONVERSATION":return messageDisplayBoxState.set("parentContextData",messageDisplayBox_defaultState.parentContextData);default:return messageDisplayBoxState}},app:function(appState,action){switch(void 0===appState&&(appState=app_defaultState),action.type){case"APP_LOAD_DATA_LOADING":return appState.set("isLoadingAppData",!0);case"APP_LOAD_DATA_DONE":return appState.set("isLoadingAppData",!1).set("isDisplayLoadingData",!1);case"APP_LOAD_DATA_DISPLAY_LOADING":return appState=appState.isLoadingAppData?appState.set("isDisplayLoadingData",!0):appState.set("isDisplayLoadingData",!1);case"APP_LOAD_HISTORY_SUCCESS":return appState.set("isLoadedHistory",!0).set("isLoadingAppData",!1).set("isDisplayLoadingData",!1);case"APP_LOADING_HISTORY":return appState.set("isLoadedHistory",!0).set("isLoadingAppData",!0);case"APP_LOAD_HISTORY_FAILED":return appState.set("isLoadedHistory",!1).set("isLoadingAppData",!1).set("isDisplayLoadingData",!1);case"USER_LOGIN_SUCCESS":return appState;case"USER_LOGIN_FAILED":return appState.set("isLoadingAppData",!1).set("isDisplayLoadingData",!1);case"app/APP_SET_NETWORK_ONLINE":return appState.set("networkStatus",res_const.k.APP.NETWORK_STATUS.ONLINE);case"app/APP_SET_NETWORK_OFFLINE":return appState.set("networkStatus",res_const.k.APP.NETWORK_STATUS.OFFLINE);case"app/APP_SET_XMPP_STATUS":return appState.set("xmppStatus",action.payload.xmppStatus);case"app/DISPLAY_CHAT_LIST":return appState.set("isDisplayChatList",!0);case"app/HIDE_CHAT_LIST":return appState.set("isDisplayChatList",!1);case"app/DISPLAY_CHAT_DETAIL":return appState.set("isDisplayChatDetail",!0);case"app/HIDE_CHAT_DETAIL":return appState.set("isDisplayChatDetail",!1);case"app/CHANGE_MOBILE_STEPS":return appState.set("mobileStep",action.payload.mobileStep);case"app/ON_WAP":return appState.set("isOnWAP",!0);case"app/ON_DESKTOP":return appState.set("isOnWAP",!1);case"app/APP_DISPLAY_ERROR":return appState.set("error",{isDisplay:!0,message:action.payload.message});case"app/APP_HIDE_ERROR":return appState.set("error",{isDisplay:!1,message:""});case"app/APP_SET_CHAT_WINDOW_STATUS":return appState.set("chatWindowStatus",action.payload.chatWindowStatus);case"OPEN_NEW_CHAT_OPENING":return appState.set("isOpeningNewChat",!0);case"OPEN_NEW_CHAT_DONE":return appState.set("isOpeningNewChat",!1);case"CHAT_FETCH_SELLER_INFO_FAILED":return appState.set("isLoadingAppData",!1).set("isDisplayLoadingData",!1);case"APP_INIT_FROM_PARENT_SITE":return appState.set("isInitFromParentSite",!0);case"app/SET_SELLER_CONTEXT":return appState.set("ROLE_TEXT",app_objectSpread({},sellerText.a)).set("ROLE_SETTING",app_objectSpread({},setting.H));case"app/SET_BUYER_CONTEXT":return appState.set("ROLE_TEXT",app_objectSpread({},buyerText.a)).set("ROLE_SETTING",app_objectSpread({},setting.e));default:return appState}},xmpp:function(xmppState,action){switch(void 0===xmppState&&(xmppState=xmpp_defaultState),action.type){case"xmpp/SAVE_FETCH_HISTORY_LIST_PAYLOAD":return xmppState.set("fetchHistoryListPayload",action.payload.fetchHistoryListPayload);case"XMPP_SET_RESOLVE_SEARCH_HISTORY_LIST_PROMISE":return xmppState.set("searchHistoryListPromise",xmpp_objectSpread({},xmppState.searchHistoryListPromise,{resolve:action.payload.resolvePromise}));case"XMPP_SET_RESOLVE_HISTORY_DETAIL_PROMISE":return xmppState.set("fetchHistoryDetailPromise",xmpp_objectSpread({},xmppState.fetchHistoryDetailPromise,{resolve:action.payload.resolvePromise})).set("isFirstFetchDetail",action.payload.isFirstFetchDetail);case"XMPP_SET_RESOLVE_DELETE_HISTORY_PROMISE":return xmppState.set("deleteHistoryPromise",xmpp_objectSpread({},xmppState.deleteHistoryPromise,{resolve:action.payload.resolvePromise})).set("deletingChatId",action.payload.chat_id);case"XMPP_IQ_SET_PROMISE_GET_AUTO_REPLY_CONFIG":return xmppState.set("fetchAutoReplyConfigPromise",xmpp_objectSpread({},xmppState.fetchAutoReplyConfigPromise,{resolve:action.payload.resolvePromise,reject:action.payload.rejectedPromise}));case"XMPP_IQ_SET_PROMISE_SAVE_AUTO_REPLY_CONFIG":return xmppState.set("saveAutoReplyConfigPromise",xmpp_objectSpread({},xmppState.saveAutoReplyConfigPromise,{resolve:action.payload.resolvePromise,reject:action.payload.rejectedPromise,submitData:action.payload.submitData}));case"CHAT_DELETE_CONVERSATION":case"CHAT_DELETE_CONVERSATION_FAILED":return xmppState.set("deletingChatId","");case"xmpp/SET_LIMIT_SENDING_MSG":return xmppState.set("isLimitSendingMsg",action.payload.isLimitSendingMsg);default:return xmppState}},sendProductData:function(state,action){switch(void 0===state&&(state=sendProductData_defaultState),action.type){case"sendProductData/START_LOADING":return state.set("isLoading",!0);case"sendProductData/STOP_LOADING":return state.set("isLoading",!1).set("isDisplayLoading",!1);case"sendProductData/DISPLAY_LOADING":return state.isLoading?state.set("isDisplayLoading",!0):state.set("isDisplayLoading",!1);case"sendProductData/CLEAR_PRODUCTS":return state.set("products",[]);case"sendProductData/FIRST_LOAD_PRODUCTS":return state.set("products",[].concat(action.payload.products)).set("metaData",action.payload.metaData);case"sendProductData/UPDATE_PRODUCTS":return state.set("products",[].concat(state.products,action.payload.products)).set("metaData",action.payload.metaData);default:return state}},sendOrderData:function(state,action){switch(void 0===state&&(state=sendOrderData_defaultState),action.type){case"sendOrderData/START_LOADING":return state.set("isLoading",!0);case"sendOrderData/STOP_LOADING":return state.set("isLoading",!1).set("isDisplayLoading",!1);case"sendOrderData/DISPLAY_LOADING":return state.isLoading?state.set("isDisplayLoading",!0):state.set("isDisplayLoading",!1);default:return state}},config:function(state,action){switch(void 0===state&&(state=config_defaultState),action.type){case"config/SET_AUTO_REPLY_DATA":return state.set("autoReplyData",config_objectSpread({},state.autoReplyData,{},action.payload.autoReplyData));case"config/GET_AUTO_REPLY_SENDING":return state.set("getAutoReplyConfig",config_objectSpread({},state.getAutoReplyConfig,{isFetching:!0}));case"config/SET_SELECTED_MENU_OPTION":return state.set("selectedConfigMenuOption",action.payload.selectedConfigMenuOption);case"config/SET_CONFIG_CHAT_SYSTEM_TYPE":return state.set("configChatSystemType",action.payload.configChatSystemType);case"config/GET_AUTO_REPLY_SUCCESS":return state.set("getAutoReplyConfig",config_objectSpread({},state.getAutoReplyConfig,{isFetching:!1,isError:!1,isDisplayLoading:!1}));case"config/GET_AUTO_REPLY_FAILED":return state.set("getAutoReplyConfig",config_objectSpread({},state.getAutoReplyConfig,{isFetching:!1,isError:!0,isDisplayLoading:!1}));case"config/GET_AUTO_REPLY_DISPLAY_LOADING":return state.set("getAutoReplyConfig",config_objectSpread({},state.getAutoReplyConfig,{isError:!1,isDisplayLoading:!0}));default:return state}},newChat:newChat,confirmModal:function(state,action){switch(void 0===state&&(state=confirmModal_defaultState),action.type){case"confirmModal/OPEN_MODAL":return state.set("isOpen",!0);case"confirmModal/CLOSE_MODAL":return state.set("isOpen",!1);case"confirmModal/SET_INFO_MSG":return state.set("infoMsg",action.payload.infoMsg).set("acceptLabel",action.payload.acceptLabel).set("cancelLabel",action.payload.cancelLabel);case"confirmModal/SET_RESOLVE_PROMISE":return state.set("resolvePromise",action.payload.resolvePromise);default:return state}}},createLazyLoadComponent=__webpack_require__("NorQ"),homeRoute={path:"/",component:Object(createLazyLoadComponent.b)({id:"HomePage",ssrMethod:createLazyLoadComponent.a.FULL,useWaypoint:!1,Component:function(){return __webpack_require__.e(6).then(__webpack_require__.bind(null,"STA+"))},Placeholder:__webpack_require__("y3l/").default}).Component,routeName:"@@Route/HomeRoute",chunkName:"home-page",exact:!0},chatRoute={path:"/chat",component:Object(createLazyLoadComponent.b)({id:"ChatPage",ssrMethod:createLazyLoadComponent.a.FULL,useWaypoint:!1,Component:function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(10),__webpack_require__.e(4)]).then(__webpack_require__.bind(null,"2AO3"))},Placeholder:__webpack_require__("y3l/").default}).Component,routeName:"@@Route/ChatRoute",chunkName:"chat-page",exact:!0},configRoute=__webpack_require__("d5gp"),notFoundRoute={path:"*",component:Object(createLazyLoadComponent.b)({id:"NotFound",ssrMethod:createLazyLoadComponent.a.FULL,useWaypoint:!1,Component:function(){return __webpack_require__.e(1).then(__webpack_require__.bind(null,"z4hX"))},Placeholder:__webpack_require__("y3l/").default}).Component,routeName:"@@Route/NotFoundRoute",chunkName:"404",exact:!0},src_routes=[homeRoute,chatRoute,configRoute.b,notFoundRoute],prop_types=__webpack_require__("17x9"),prop_types_default=__webpack_require__.n(prop_types),Helmet=__webpack_require__("TJpk"),normalizeUrl=__webpack_require__("F2jV"),getBaseUrl=__webpack_require__("JF96"),selectors_history=__webpack_require__("iNZt"),withDataProvider=__webpack_require__("DCvr"),pageMetaData=__webpack_require__("p8Be"),PageMetaData_ref=react_default.a.createElement("meta",{"http-equiv":"content-language",content:"vi"}),_ref2=react_default.a.createElement("meta",{"http-equiv":"X-UA-Compatible",content:"IE=Edge"}),_ref3=react_default.a.createElement("meta",{name:"theme-color",content:"#e5101d"}),_ref4=react_default.a.createElement("meta",{name:"msapplication-navbutton-color",content:"#e5101d"}),_ref5=react_default.a.createElement("meta",{name:"apple-mobile-web-app-status-bar-style",content:"#e5101d"}),PageMetaData_Metadata=function(_Component){function Metadata(){return _Component.apply(this,arguments)||this}inheritsLoose_default()(Metadata,_Component);var _proto=Metadata.prototype;return _proto.getTitle=function(metadata,isOg){return isOg&&metadata.OgTitle?metadata.OgTitle:metadata.title},_proto.getKeywords=function(metadata){return metadata.keywords},_proto.getCanonicalUrl=function(metadata){if(metadata.urlCanonical)return Object(normalizeUrl.a)(metadata.urlCanonical,!0);var currentUrl=Object(get.a)(this.props,"location.pathname");return Object(normalizeUrl.a)(currentUrl,!0)},_proto.render=function(){var _this$props=this.props,data=_this$props[pageMetaData.a.data],location=_this$props.location;return data&&location.routeName?react_default.a.createElement(Helmet.Helmet,null,react_default.a.createElement("link",{rel:"dns-prefetch",href:Object(getBaseUrl.a)()}),PageMetaData_ref,_ref2,react_default.a.createElement("title",null,this.getTitle(data)),_ref3,_ref4,_ref5,this.props.children):null},Metadata}(react.Component);PageMetaData_Metadata.displayName="Metadata",defineProperty_default()(PageMetaData_Metadata,"contextTypes",{router:prop_types_default.a.object});var withPageMetaDataProvider=Object(withDataProvider.a)(pageMetaData.a,(function(state){return{location:Object(selectors_history.a)(state)}})),PageMetaData=Object(Recompose_cjs.compose)(withPageMetaDataProvider)(PageMetaData_Metadata),strophe=__webpack_require__("vi4O"),actions_xmpp=__webpack_require__("epg5");function middlewares_xmpp_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function middlewares_xmpp_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?middlewares_xmpp_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):middlewares_xmpp_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var connection=null,middlewares_xmpp=function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){switch(action.type){case"XMPP_CONNECT":var reduxState=getState(),userId=Object(get.a)(reduxState,"auth.userInfo.fpt_id",""),access_token=Object(get.a)(reduxState,"auth.access_token",""),userFullName=Object(get.a)(reduxState,"auth.userInfo.full_name","");if(!userId||!access_token||!userFullName)return;var jid=Object(xmpp.b)(userId);if(!jid)return;var password=access_token,shop_id=Object(get.a)(reduxState,"auth.userInfo.shop_id","");if(shop_id&&userHelper.a.isShopPartner&&(password+="||"+shop_id),!connection){var chatWSDomain=setting.q;chatWSDomain="chatws.sendo.vn/ws",connection=new strophe.Strophe.Connection(setting.N+"://"+chatWSDomain,{protocol:""+setting.N})}connection.connect(jid,password,(function(xmppStatus){if(dispatch({type:"app/APP_SET_XMPP_STATUS",payload:{xmppStatus:xmppStatus}}),xmppStatus===strophe.Strophe.Status.CONNECTED)connection.send(Object(strophe.$pres)()),connection.addHandler((function(xmppData){return dispatch({type:"XMPP_ON_MESSAGE",payload:{xmppData:xmppData,xmppUsername:jid}}),!0}),null,"message",null,null,null),connection.addHandler((function(xmppData){return dispatch(Object(actions_xmpp.finishFetchHistoryListFromXMPP)(xmppData)),!0}),null,"iq",null,res_const.o.HISTORY_LIST_ID,null),connection.addHandler((function(xmppData){return dispatch(Object(actions_xmpp.finishSearchHistoryListFromXMPP)(xmppData)),!0}),null,"iq",null,res_const.o.SEARCH_HISTORY_LIST_ID,null),connection.addHandler((function(xmppData){return dispatch(Object(actions_xmpp.finishFetchHistoryDetailFromXMPP)(xmppData)),!0}),null,"iq",null,res_const.o.HISTORY_DETAIL_ID,null),connection.addHandler((function(xmppData){return dispatch(Object(actions_xmpp.finishDeleteConversationFromXMPP)(xmppData)),!0}),null,"iq",null,res_const.o.DELETE_HISTORY_ID,null),connection.addHandler((function(xmppData){return dispatch(Object(actions_xmpp.finishIQFetchAutoConfig)(xmppData)),!0}),null,"iq",null,res_const.o.FETCH_AUTO_REPLY_ID,null),connection.addHandler((function(xmppData){return dispatch(Object(actions_xmpp.finishIQSaveAutoConfig)(xmppData)),!0}),null,"iq",null,res_const.o.SAVE_AUTO_REPLY_ID,null);else{if(xmppStatus===strophe.Strophe.Status.DISCONNECTED&&dispatch({type:"XMPP_RECONNECT"}),xmppStatus===strophe.Strophe.Status.AUTHFAIL)return dispatch({type:"XMPP_AUTH_FAILED"}),void(getState().app.isLoadingAppData&&dispatch({type:"APP_LOAD_HISTORY_FAILED"}));if(getState().app.isLoadingAppData){dispatch({type:"APP_LOAD_HISTORY_FAILED"});var ROLE_TEXT=userHelper.a.getRoleText();dispatch({type:"CHAT_DISPLAY_ERROR_MSG",payload:{errorMsg:ROLE_TEXT.CHAT_ERROR.FAILED_LOAD_HISTORY}})}}}));break;case"XMPP_SEND_TEMP_MSG":if(!connection||!connection.authzid||"function"!==typeof connection.send)return;var createdByUserId=Object(get.a)(getState(),"auth.userInfo.fpt_id",""),shopPartnerFptId=Object(xmppHelper.f)(getState());shopPartnerFptId&&(createdByUserId=shopPartnerFptId);var messageData=Object(xmppHelper.a)(action.payload,connection.authzid,createdByUserId),partner_id_from_history=Object(get.a)(getState(),"chat.chatDetails.0.partner_id","");messageData.receiver.partner_id||(messageData.receiver.partner_id=partner_id_from_history);var msgXml=Object(xmpp.g)(messageData),parsedMsg=Object(xmpp.u)(msgXml.tree());if(!parsedMsg)return;parsedMsg.detailData=Object(xmpp.w)(parsedMsg,Object(get.a)(action,"payload.xmppUsername",""),messageData.receiver.partner_id,{is_owner:1,is_read:0}),messageData.imageUrl&&(parsedMsg.detailData.isNewImage=!0);var clientInfo=Object(xmppHelper.d)(messageData),msgDetail=Object(helpers_msgDetail.c)(parsedMsg.detailData,clientInfo);if(msgDetail.clientInfo.error)return msgDetail.message_status=res_const.r.FAILED,parsedMsg.detailData=msgDetail,dispatch({type:"XMPP_ON_OWNER_MESSAGE",payload:{parsedMsg:parsedMsg}});if(msgDetail.clientInfo.isTempMessage)return msgDetail.message_status=res_const.r.SENDING,parsedMsg.detailData=msgDetail,dispatch({type:"XMPP_ON_OWNER_MESSAGE",payload:{parsedMsg:parsedMsg}});break;case"XMPP_SEND_MSG":if(!connection||!connection.authzid||"function"!==typeof connection.send)return;if(getState().xmpp.isLimitSendingMsg)return;dispatch(Object(actions_xmpp.limitSendingMsg)()),setTimeout((function(){dispatch(Object(actions_xmpp.removeLimitSendingMsg)())}),1e3*setting.C);var _createdByUserId=Object(get.a)(getState(),"auth.userInfo.fpt_id",""),_shopPartnerFptId=Object(xmppHelper.f)(getState());_shopPartnerFptId&&(_createdByUserId=_shopPartnerFptId);var _messageData=Object(xmppHelper.a)(action.payload,connection.authzid,_createdByUserId),_partner_id_from_history=Object(get.a)(getState(),"chat.chatDetails.0.partner_id",""),chatDetails=Object(get.a)(getState(),"chat.chatDetails",[]);_messageData.replyFor=!1;for(var i=chatDetails.length-1;i>=0&&i>chatDetails.length-10&&!chatDetails[i].is_owner;i--)if("system"!==chatDetails[i].message_type){chatDetails[i].message_object.reply_in_quote&&(_messageData.replyFor=!0,_messageData.messageObjectReplyFor=chatDetails[i].message_object);break}_messageData.receiver.partner_id||(_messageData.receiver.partner_id=_partner_id_from_history);var _msgXml=Object(xmpp.g)(_messageData),_parsedMsg=Object(xmpp.u)(_msgXml.tree());if(!_parsedMsg)return;if(_messageData.replyInHidden){var _appState=getState().app;return void(_appState.networkStatus===res_const.k.APP.NETWORK_STATUS.ONLINE&&_appState.xmppStatus===res_const.k.APP.XMPP_STATUS.CONNECTED&&connection.send(_msgXml.tree()))}_parsedMsg.detailData=Object(xmpp.w)(_parsedMsg,Object(get.a)(action,"payload.xmppUsername",""),_messageData.receiver.partner_id,{is_owner:1,is_read:0}),_messageData.imageUrl&&(_parsedMsg.detailData.isNewImage=!0);var _clientInfo=Object(xmppHelper.d)(_messageData),_msgDetail=Object(helpers_msgDetail.c)(_parsedMsg.detailData,_clientInfo);_msgDetail.message_status=res_const.r.SENDING;var appState=getState().app;return appState.networkStatus===res_const.k.APP.NETWORK_STATUS.ONLINE&&appState.xmppStatus===res_const.k.APP.XMPP_STATUS.CONNECTED?(connection.send(_msgXml.tree()),_msgDetail.message_status=res_const.r.SENT,Object(ChiDaiHelper.g)(_messageData)&&Object(ChiDaiHelper.c)(dispatch)):_msgDetail.message_status=res_const.r.FAILED,_parsedMsg.detailData=_msgDetail,dispatch({type:"XMPP_ON_OWNER_MESSAGE",payload:{parsedMsg:_parsedMsg}});case"XMPP_SEND_SEEN_MSG":if(!connection||"function"!==typeof connection.send)return;var params=middlewares_xmpp_objectSpread({type:"chat"},action.payload),message=params.message,receiver=params.receiver,messageForClientSide=middlewares_xmpp_objectSpread({},message),seenMsgXML=Object(strophe.$msg)({to:receiver.partner_id,from:connection.authzid,type:"chat",id:message.message_id,chat_id:message.chat_id}).c("thread").t(message.message_id).up().c("received",{xmlns:"urn:xmpp:chatstates"});seenMsgXML.c("id").t(message.message_id).up().c("chat_id").t(message.chat_id).up(),void 0!=message.message_object.campaign_id&&null!=message.message_object.campaign_id&&seenMsgXML.c("campaign_id").t(message.message_object.campaign_id).up(),seenMsgXML.c("displayed").t(1),userHelper.a.isSeller()&&(seenMsgXML.up().c("you_re_shop").t(1),messageForClientSide.you_re_shop=1),connection.send(seenMsgXML),dispatch({type:"chat/CHAT_SEEN_MSG",payload:{message:messageForClientSide}});break;case"XMPP_DISCONNECT":connection&&connection.disconnect();break;case"XMPP_RECONNECT":setTimeout((function(){dispatch({type:"XMPP_CONNECT"})}),1e3*setting.D);break;case"XMPP_SEND_IQ_HISTORY_LIST":if(!connection)return;dispatch({type:"xmpp/SAVE_FETCH_HISTORY_LIST_PAYLOAD",payload:{fetchHistoryListPayload:action.payload}});var fetchHistoryListIQ=Object(strophe.$iq)({id:res_const.o.HISTORY_LIST_ID,type:"set"}).c(res_const.o.HISTORY_LIST_NAME,middlewares_xmpp_objectSpread({},action.payload.data,{xmlns:res_const.o.HISTORY_XMLNS}));return void connection.send(fetchHistoryListIQ);case"XMPP_SEND_IQ_HISTORY_DETAIL":if(!connection)return;dispatch({type:"XMPP_SET_RESOLVE_HISTORY_DETAIL_PROMISE",payload:{resolvePromise:action.payload.resolvePromise,isFirstFetchDetail:action.payload.isFirstFetchDetail}});var fetchHistoryDetailIQ=Object(strophe.$iq)({id:res_const.o.HISTORY_DETAIL_ID,type:"set"}).c(res_const.o.HISTORY_DETAIL_NAME,middlewares_xmpp_objectSpread({},action.payload.data,{xmlns:res_const.o.HISTORY_XMLNS}));return void connection.send(fetchHistoryDetailIQ);case"XMPP_SEND_IQ_SEARCH_HISTORY_LIST":if(!connection)return;dispatch({type:"XMPP_SET_RESOLVE_SEARCH_HISTORY_LIST_PROMISE",payload:{resolvePromise:action.payload.resolvePromise}});var searchHistoryListIQ=Object(strophe.$iq)({id:res_const.o.SEARCH_HISTORY_LIST_ID,type:"set"}).c(res_const.o.SEARCH_HISTORY_LIST_NAME,middlewares_xmpp_objectSpread({},action.payload.data,{xmlns:res_const.o.HISTORY_XMLNS}));return void connection.send(searchHistoryListIQ);case"XMPP_SEND_IQ_DELETE_HISTORY":if(!connection)return;dispatch({type:"XMPP_SET_RESOLVE_DELETE_HISTORY_PROMISE",payload:{resolvePromise:action.payload.resolvePromise,chat_id:action.payload.data.chat_id}});var deteleHistoryIQ=Object(strophe.$iq)({id:res_const.o.DELETE_HISTORY_ID,type:"set"}).c(res_const.o.DELETE_HISTORY_NAME,middlewares_xmpp_objectSpread({},action.payload.data,{xmlns:res_const.o.HISTORY_XMLNS}));return void connection.send(deteleHistoryIQ);case"XMPP_IQ_GET_AUTO_REPLY_CONFIG":if(!connection)return;dispatch({type:"XMPP_IQ_SET_PROMISE_GET_AUTO_REPLY_CONFIG",payload:{resolvePromise:action.payload.resolvePromise,rejectedPromise:action.payload.rejectedPromise}});var fetchAutoConfigIQ=Object(strophe.$iq)({id:res_const.o.FETCH_AUTO_REPLY_ID,type:"get"}).c(res_const.o.FETCH_AUTO_REPLY_TAG_NAME,{xmlns:res_const.o.AUTO_REPLY_XMLNS});return void connection.send(fetchAutoConfigIQ);case"XMPP_IQ_SAVE_AUTO_REPLY_CONFIG":if(!connection)return;dispatch({type:"XMPP_IQ_SET_PROMISE_SAVE_AUTO_REPLY_CONFIG",payload:{resolvePromise:action.payload.resolvePromise,rejectedPromise:action.payload.rejectedPromise,submitData:action.payload.submitData}});var saveAutoConfigIQ=Object(strophe.$iq)({id:res_const.o.SAVE_AUTO_REPLY_ID,type:"set"}).c(res_const.o.FETCH_AUTO_REPLY_TAG_NAME,{xmlns:res_const.o.AUTO_REPLY_XMLNS}).t(JSON.stringify(middlewares_xmpp_objectSpread({},action.payload.submitData)));return void connection.send(saveAutoConfigIQ)}return next(action)}}};__webpack_require__("c4xm");function configureClient(client){return regenerator_default.a.async((function(_context){for(;;)switch(_context.prev=_context.next){case 0:client.config={layout:components_Root,metaRender:PageMetaData,routes:src_routes,redux:{reducers:redux_reducers,middlewares:[middlewares_xmpp]},modules:[]};case 1:case"end":return _context.stop()}}))}function beforeClientRender(client){return regenerator_default.a.async((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:Object(getSentry.a)(),!1===Object(isArray.a)(window.dataLayer)&&(window.dataLayer=[]),window.dataLayer.push({sendo_platform:"chat","gtm.start":(new Date).getTime(),event:"gtm.js",pwa_version:"2.7.0-e306f343"}),window.store=client.store;case 4:case"end":return _context2.stop()}}))}function afterClientRender(client){return regenerator_default.a.async((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:__webpack_require__("s+lh");case 1:case"end":return _context3.stop()}}))}window.__INITIAL_STATE__&&(Object(get.a)(window.__INITIAL_STATE__,"history")&&delete window.__INITIAL_STATE__.history,Object(get.a)(window.__INITIAL_STATE__,"@.History")&&delete window.__INITIAL_STATE__.History,Object(get.a)(window.__INITIAL_STATE__,"@.GlobalHistory")&&delete window.__INITIAL_STATE__.GlobalHistory),function(){var client;regenerator_default.a.async((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return client=(new Client.a).setup(configureClient).beforeRender(beforeClientRender).afterRender(afterClientRender),_context5.next=4,regenerator_default.a.awrap(client.init());case 4:return _context5.next=7,regenerator_default.a.awrap(client.render());case 7:0;case 8:case"end":return _context5.stop()}}))}()},G77k:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"m",(function(){return getReceiver})),__webpack_require__.d(__webpack_exports__,"e",(function(){return createNewChatId})),__webpack_require__.d(__webpack_exports__,"f",(function(){return createParentContextData})),__webpack_require__.d(__webpack_exports__,"o",(function(){return getResponseRateText})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getOnlineStatus})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getQuickReplyTexts})),__webpack_require__.d(__webpack_exports__,"v",(function(){return isReadConversation})),__webpack_require__.d(__webpack_exports__,"x",(function(){return isUnrepliedConversation})),__webpack_require__.d(__webpack_exports__,"w",(function(){return isSeenOwnerMsg})),__webpack_require__.d(__webpack_exports__,"r",(function(){return getTotalUnreadFromChatList})),__webpack_require__.d(__webpack_exports__,"t",(function(){return isHaveTopicMsgInDetails})),__webpack_require__.d(__webpack_exports__,"n",(function(){return getRedirectProductUrlByRole})),__webpack_require__.d(__webpack_exports__,"d",(function(){return convertFullBuyerProductUrl})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getOrderUrlByRole})),__webpack_require__.d(__webpack_exports__,"y",(function(){return isValidBotMessage})),__webpack_require__.d(__webpack_exports__,"u",(function(){return isOnlineBelow1hour})),__webpack_require__.d(__webpack_exports__,"q",(function(){return getSubTypeFromText})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getEmojiIconsFromValidText})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addMessageStatusFromServer})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addMessageStatusFromClient})),__webpack_require__.d(__webpack_exports__,"z",(function(){return updateTimestampFromClient})),__webpack_require__.d(__webpack_exports__,"c",(function(){return addOwnerMessageStatusFromClient})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getReadMessageStatusFromClient})),__webpack_require__.d(__webpack_exports__,"s",(function(){return isCorrectPriceLabel})),__webpack_require__.d(__webpack_exports__,"p",(function(){return getShopIconTypeFromProduct})),__webpack_require__.d(__webpack_exports__,"g",(function(){return chatHelper}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),lodash_es_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7EGn"),lodash_es_reduce__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("owWc"),lodash_es_some__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lCmp"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1wGr"),sendo_web_chat_helpers_xmpp_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("N6vC"),sendo_web_chat_helpers_format_onlineTimeSince__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Agl7"),sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1wi/"),_userHelper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("xbIa"),_format_messageContent__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("t4TX"),_browserHelper__WEBPACK_IMPORTED_MODULE_12__=(__webpack_require__("i8SR"),__webpack_require__("1UAq"),__webpack_require__("xnfK"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function getReceiver(partner_info,role){var partner_id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partner_info,"fpt_id",""),partner_avatar=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partner_info,"shop_logo",""),partner_fullname=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partner_info,"shop_name","");return role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.SELLER&&(partner_id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partner_info,"fpt_id",""),partner_avatar=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partner_info,"avatar",""),partner_fullname=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partner_info,"fullname","")),{partner_id:partner_id+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.p,partner_avatar:partner_avatar,partner_fullname:partner_fullname}}function createNewChatId(user_id,partner_id,role){var newChatId="";return newChatId=Object(sendo_web_chat_helpers_xmpp_js__WEBPACK_IMPORTED_MODULE_5__.a)(user_id+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.p,partner_id),role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.SELLER&&(newChatId=Object(sendo_web_chat_helpers_xmpp_js__WEBPACK_IMPORTED_MODULE_5__.a)(partner_id,user_id+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.p)),newChatId}function createParentContextData(newChatId,topic,shop_info){var parentContextData={isNew:!1,chatId:newChatId,topic:topic,shopId:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(shop_info,"shop_id",""),contactPhone:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(shop_info,"phone_number","")||Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(shop_info,"shop_phone","")};return topic&&topic.type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.E.PRODUCT&&(parentContextData.productId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(topic,"items.0.id",""),parentContextData.productImage=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(topic,"items.0.image_url","")),parentContextData}function getResponseRateText(conversation,listStatus){var result="";if(!Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(conversation,"partner_id",""))return result;var partnerStatus=listStatus[conversation.partner_id];return result=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partnerStatus,"response_time","")}function getOnlineStatus(conversation,listStatus){var result="Kh\xf4ng tr\u1ef1c tuy\u1ebfn";if(!Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(conversation,"partner_id",""))return result;var partnerStatus=listStatus[conversation.partner_id];if("available"===Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partnerStatus,"status","unavailable"))return result="\u0110ang tr\u1ef1c tuy\u1ebfn";var lastOnlineTimeStampSecond=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(partnerStatus,"last_access_time",0);if(lastOnlineTimeStampSecond){var lastOnlineTimeStampMilisecond=1e3*lastOnlineTimeStampSecond;result=Object(sendo_web_chat_helpers_format_onlineTimeSince__WEBPACK_IMPORTED_MODULE_6__.a)(lastOnlineTimeStampMilisecond)+" tr\u01b0\u1edbc"}return result}function getQuickReplyTexts(currentTopic,userInfo){if(userInfo.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.BUYER){var topicType=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(currentTopic,"type","");return topicType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.E.PRODUCT?Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.b)()||Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.c)()?sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.BUYER.PRODUCT_TOPIC_LINUX:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.BUYER.PRODUCT_TOPIC:topicType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.E.ORDER?Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.b)()||Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.c)()?sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.BUYER.ORDER_TOPIC_LINUX:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.BUYER.ORDER_TOPIC:Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.b)()||Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.c)()?sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.BUYER.DEFAULT_LINUX:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.BUYER.DEFAULT}return userInfo.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.SELLER?Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.b)()||Object(_browserHelper__WEBPACK_IMPORTED_MODULE_12__.c)()?sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.SELLER_LINUX.map((function(quickReplyText){return quickReplyText.replace("[shop_name]",userInfo.full_name)})):sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.B.SELLER.map((function(quickReplyText){return quickReplyText.replace("[shop_name]",userInfo.full_name)})):[]}function isReadConversation(conversation){return conversation.message_status!==sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.OWNER_UNREAD&&conversation.message_status!==sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SELLER_UNREAD_BUYER_UNSEEN_AUTO_REPLY&&conversation.message_status!==sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SELLER_UNREAD_BUYER_SEEN_AUTO_REPLY}function isUnrepliedConversation(conversation){return!conversation.is_owner||conversation.message_type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.s.AUTO_REPLY}function isSeenOwnerMsg(conversation){return!!conversation.is_owner&&!!conversation.is_read}function getTotalUnreadFromChatList(chatList){return Object(lodash_es_reduce__WEBPACK_IMPORTED_MODULE_2__.a)(chatList,(function(totalUnread,conversation){return isReadConversation(conversation)?totalUnread:totalUnread+1}),0)}function isHaveTopicMsgInDetails(chatDetails){for(var i=0;i<chatDetails.length;i++)if("topic"===chatDetails[i].message_type)return!0;return!1}function getRedirectProductUrlByRole(productUrl,productId){return productUrl||productId?_userHelper__WEBPACK_IMPORTED_MODULE_8__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.BUYER?productUrl?getRelativeProductUrl(productUrl):"/sp-"+productId+".html":_userHelper__WEBPACK_IMPORTED_MODULE_8__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.SELLER?productUrl?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.z.BUYER_DOMAIN+getRelativeProductUrl(productUrl):sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.z.BUYER_DOMAIN+"/sp-"+productId+".html":"":""}function getRelativeProductUrl(productUrl){var regexGetProductSlug=/[A-Za-z0-9-]+\.html/g;return regexGetProductSlug.test(productUrl)?"/"+Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(productUrl.match(regexGetProductSlug),"0",""):""}function convertFullBuyerProductUrl(productUrl){return productUrl?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.z.BUYER_DOMAIN+getRelativeProductUrl(productUrl):""}function getOrderUrlByRole(orderUrl,orderId){var result="";return _userHelper__WEBPACK_IMPORTED_MODULE_8__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.BUYER&&(orderUrl?result=orderUrl:orderId&&(result=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.z.BUYER_ORDER_DETAIL+orderId)),_userHelper__WEBPACK_IMPORTED_MODULE_8__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.F.SELLER&&(result=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.z.SELLER_ORDER_DETAIL+orderId),result}function isValidBotMessage(message){return!!message.botContent&&(!!message.botContent.message&&!(!message.botContent.message.text&&!message.botContent.message.attachment))}function isOnlineBelow1hour(timestamp){var seconds=Math.floor(((new Date).getTime()-timestamp)/1e3);return Math.floor(seconds/60)<60}function getSubTypeFromText(textMsg){return function(textMsg){var urlLinks=Object(_format_messageContent__WEBPACK_IMPORTED_MODULE_9__.f)(textMsg);if(!urlLinks.length)return!1;return Object(lodash_es_some__WEBPACK_IMPORTED_MODULE_3__.a)(urlLinks,(function(urlLink){return new RegExp(sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.F.YOUTUBE_LINK+"|"+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.F.FACEBOOK_VIDEO_LINK,"g").test(urlLink.text)}))}(textMsg)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.p.SUB_TYPE.VIDEO_LINK:function(textMsg){var urlLinks=Object(_format_messageContent__WEBPACK_IMPORTED_MODULE_9__.f)(textMsg);return Boolean(urlLinks.length)}(textMsg)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.p.SUB_TYPE.LINK:function(textMsg){var textParts=textMsg.split(" ");return Object(lodash_es_some__WEBPACK_IMPORTED_MODULE_3__.a)(textParts,(function(textPart){return new RegExp(""+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.F.EMOJI,"g").test(textPart)}))}(textMsg)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.p.SUB_TYPE.EMOJI:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.p.SUB_TYPE.NONE}function getEmojiIconsFromValidText(textMsg){var trimmedTextMsg=textMsg.trim();if(!trimmedTextMsg||!trimmedTextMsg.length||!trimmedTextMsg.length>2)return[];var containEmojiRegex=new RegExp(""+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_7__.F.EMOJI,"g"),emojiIcons=trimmedTextMsg.match(containEmojiRegex);if(!emojiIcons)return[];for(var index=0;index<emojiIcons.length;index++){var emojiIcon=emojiIcons[index];trimmedTextMsg=trimmedTextMsg.replace(emojiIcon,"")}return trimmedTextMsg.trim()?[]:emojiIcons}function initMessageStatusType(message){var result=_objectSpread({},message);return result.message_status=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.NONE,message.is_owner?message.is_read?result.message_status=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_SEEN:result.message_status=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_UNSEEN:message.is_read?result.message_status=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.OWNER_READ:result.message_status=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.OWNER_UNREAD,result}function updateMessageStatusTypeFromClient(message){if(message.message_type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.s.AUTO_REPLY&&_userHelper__WEBPACK_IMPORTED_MODULE_8__.a.isSeller()){if(message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_SEEN)return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SELLER_UNREAD_BUYER_SEEN_AUTO_REPLY;if(message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_UNSEEN)return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SELLER_UNREAD_BUYER_UNSEEN_AUTO_REPLY}return message.message_status}function addMessageStatusFromServer(message){return null===message.message_status||void 0===message.message_status?initMessageStatusType(message):message}function addMessageStatusFromClient(message){var result=_objectSpread({},message);return null!==result.is_read&&void 0!==result.is_read||(result.is_read=0),null!==message.message_status&&void 0!==message.message_status||(result=initMessageStatusType(result)),result.message_status=updateMessageStatusTypeFromClient(result),result}function updateTimestampFromClient(message){var result=_objectSpread({},message);return result.timestamp=(new Date).getTime(),result}function addOwnerMessageStatusFromClient(message){var result=_objectSpread({},message,{is_read:1});return null!==message.message_status&&void 0!==message.message_status||(result=initMessageStatusType(result)),result.message_status=updateMessageStatusTypeFromClient(result),result}function getReadMessageStatusFromClient(message){return message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.OWNER_UNREAD?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.OWNER_READ:message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SELLER_UNREAD_BUYER_UNSEEN_AUTO_REPLY?message.message_type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.s.AUTO_REPLY?Boolean(message.you_re_shop)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.OWNER_READ:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SELLER_UNREAD_BUYER_SEEN_AUTO_REPLY:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_UNSEEN:message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SELLER_UNREAD_BUYER_SEEN_AUTO_REPLY||message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_UNSEEN?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_SEEN:message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.OWNER_READ&&message.message_type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.s.AUTO_REPLY&&!message.you_re_shop&&_userHelper__WEBPACK_IMPORTED_MODULE_8__.a.isSeller()?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_SEEN:message.message_status===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.SENT?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.r.PARTNER_SEEN:message.message_status}function isCorrectPriceLabel(priceLabel){return Boolean(priceLabel&&"0 \u0110"!==priceLabel&&"0 \u0111"!==priceLabel&&"0\u0110"!==priceLabel&&"0\u0111"!==priceLabel)}function getShopIconTypeFromProduct(product){return product.is_senmall&&"0"!==product.is_senmall?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.A.MALL_SHOP:product.is_certified&&"0"!==product.is_certified?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.A.TRUSTED_SHOP:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.A.NORMAL_SHOP}var chatHelper=function(){function chatHelper(){}return chatHelper.setActiveChatColdDBFromServer=function(activeChatColdDB){this.activeChatColdDB=activeChatColdDB},chatHelper.getActiveChatColdDB=function(){return this.activeChatColdDB},chatHelper}();_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(chatHelper,"activeChatColdDB",!1)},J9m0:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return trackReceivedMessage})),__webpack_require__.d(__webpack_exports__,"f",(function(){return trackSendMessage})),__webpack_require__.d(__webpack_exports__,"g",(function(){return trackSendSenLiveMessage})),__webpack_require__.d(__webpack_exports__,"c",(function(){return trackOpenChatFromHistory})),__webpack_require__.d(__webpack_exports__,"d",(function(){return trackOpenNewChat})),__webpack_require__.d(__webpack_exports__,"b",(function(){return trackClickUnicodeEmoji})),__webpack_require__.d(__webpack_exports__,"a",(function(){return trackClickQuickReply}));var lodash_es_get__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("7EGn"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1wGr"),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("xbIa"),_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("V69r");function trackBuyer(category,action,label){void 0===label&&(label="");var gtag=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(window,"gtag",null);if(!gtag)return!1;gtag("event",action,{event_category:category,event_label:label,user_role:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER})}function trackSeller(category,action,label){void 0===label&&(label="");var gtag=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(window,"gtag",null);if(!gtag)return!1;var updatedCategoryWithRole="Seller "+category;sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.isShopPartner&&(updatedCategoryWithRole="Seller_Sub "+category),gtag("event",action,{event_category:updatedCategoryWithRole,event_label:label,user_role:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER})}function trackReceivedTextMsg(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.TEXT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.TEXT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label)}function trackSendTextMsg(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.TEXT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.TEXT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}function trackReceivedMessage(msgDetail){var label,msgType=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(msgDetail,"message_type","");switch(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(msgDetail,"message_object.type","")){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.TEXT:trackReceivedTextMsg();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.IMAGE:void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.IMAGE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.IMAGE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label);break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.VOUCHER:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.VOUCHER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.VOUCHER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.PRODUCTS:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.PRODUCTS,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.PRODUCTS,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.SHOP_ORDER:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.POST_BACK:case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.BOT:trackReceivedTextMsg(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.BOT_LABEL)}if(msgType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.s.TOPIC)switch(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(msgDetail,"topic.type","")){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.PRODUCT:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_TOPIC.PRODUCT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_TOPIC.PRODUCT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.ORDER:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_TOPIC.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_TOPIC.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.SHOP:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_TOPIC.SHOP,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_TOPIC.SHOP,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.RECEIVED_MSG,label)}()}}function trackSendMessage(messageData){var label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.USER_LABEL;Object(_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_3__.e)(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(messageData,"receiver.chat_id",""))&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.BOT_LABEL);var msgType=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(messageData,"message_type","");switch(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(messageData,"message_object_type","")){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.TEXT:trackSendTextMsg(label);break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.IMAGE:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.IMAGE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.IMAGE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}(label);break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.VOUCHER:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.VOUCHER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.VOUCHER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.PRODUCTS:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.PRODUCTS,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.PRODUCTS,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.SHOP_ORDER:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_MESSAGE.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.POST_BACK:case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.q.BOT:trackSendTextMsg(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.BOT_LABEL)}if(msgType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.s.TOPIC)switch(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_0__.a)(messageData,"topic.type","")){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.PRODUCT:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_TOPIC.PRODUCT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_TOPIC.PRODUCT,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.ORDER:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_TOPIC.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_TOPIC.ORDER,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}();break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.SHOP:!function(label){void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_TOPIC.SHOP,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_TOPIC.SHOP,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}()}}function trackSendSenLiveMessage(){trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_MESSAGE.SENLIVE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.USER_LABEL)}function trackOpenChatFromHistory(conversation){var label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.USER_LABEL;Object(_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_3__.f)(conversation)&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.BOT_LABEL),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_FROM.HISTORY_CHAT_LIST,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.OPEN_CHAT,label),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_FROM.HISTORY_CHAT_LIST,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.OPEN_CHAT,label)}function trackOpenNewChat(openFromPage,label){if(void 0===label&&(label=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.LABEL.DEFAULT_LABEL_WHEN_CHAT_MSG),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER)switch(openFromPage){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.w.PUSH_NOTIFICATION:trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_FROM.PUSH_NOTIFICATION,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.OPEN_CHAT,label);break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.w.BUYER_PRODUCT_DETAIL:trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.CHAT_FROM.PRODUCT_DETAIL_PAGE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.OPEN_CHAT,label)}if(sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER)switch(openFromPage){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.w.SELLER_PRIVATE_OFFER:trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_FROM.PRIVATE_OFFER_PAGE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.OPEN_CHAT,label);break;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.w.SELLER_ORDER_DETAIL:trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.CHAT_FROM.ORDER_DETAIL_PAGE,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.OPEN_CHAT,label)}}function trackClickUnicodeEmoji(label){sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER?trackBuyer(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.EMOJI.UNICODE_EMOJI,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.CLICK_TAP_CHAT,label):sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.EMOJI.UNICODE_EMOJI,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.CLICK_TAP_CHAT,label)}function trackClickQuickReply(label,topicType){sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.BUYER&&trackBuyer(function(topicType){switch(topicType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.PRODUCT:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.QUICK_REPLY.PRODUCT;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.ORDER:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.QUICK_REPLY.ORDER;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.SHOP:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.QUICK_REPLY.SHOP;default:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.BUYER.QUICK_REPLY.DEFAULT}}(topicType),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label);sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_2__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.F.SELLER&&trackSeller(function(topicType){switch(topicType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.PRODUCT:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.QUICK_REPLY.PRODUCT;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.ORDER:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.QUICK_REPLY.ORDER;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.E.SHOP:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.QUICK_REPLY.SHOP;default:return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.CATEGORY.SELLER.QUICK_REPLY.DEFAULT}}(topicType),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_1__.n.EVENT.ACTION.SEND_MSG,label)}},JHJb:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AUTO_REPLY_CONFIG}));var AUTO_REPLY_CONFIG={MAX_INPUT_CHARACTER_NUMBER:300,GET_CONFIG_TIMEOUT_SECOND:30,GET_CONFIG_DISPLAY_LOADING_DELAY_SECOND:1}},N6vC:function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__("lSNA"),defineProperty_default=__webpack_require__.n(defineProperty),get=__webpack_require__("7EGn"),map=(__webpack_require__("fujP"),__webpack_require__("zmn3")),includes=__webpack_require__("NFsq"),startsWith=__webpack_require__("X6iR"),strophe=__webpack_require__("vi4O"),he=__webpack_require__("ktc5"),he_default=__webpack_require__.n(he),setting=__webpack_require__("1wi/"),userHelper=__webpack_require__("xbIa"),res_const=__webpack_require__("1wGr"),res_text=__webpack_require__("i8SR"),debugHelper=__webpack_require__("/wUs");function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),a=gg(a,b=ff(b,c,d,a,k[15],22,1236535329),c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),a=hh(a,b=gg(b,c,d,a,k[12],20,-1926607734),c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),a=ii(a,b=hh(b,c,d,a,k[2],23,-995338651),c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md5blk(s){var i,md5blks=[];for(i=0;i<64;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks}var hex_chr="0123456789abcdef".split("");function rhex(n){for(var s="",j=0;j<4;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s}function md5(s){return function(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}(function(s){var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(state,tail),i=0;i<16;i++)tail[i]=0;return tail[14]=8*n,md5cycle(state,tail),state}(s))}function add32(a,b){return a+b&4294967295}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__.d(__webpack_exports__,"j",(function(){return extractUserId})),__webpack_require__.d(__webpack_exports__,"a",(function(){return xmpp_buildChatIdFromCustomerToShop})),__webpack_require__.d(__webpack_exports__,"b",(function(){return xmpp_buildFullJID})),__webpack_require__.d(__webpack_exports__,"c",(function(){return xmpp_buildFullJidSenLive})),__webpack_require__.d(__webpack_exports__,"f",(function(){return buildNickNameSenLive})),__webpack_require__.d(__webpack_exports__,"n",(function(){return makeid})),__webpack_require__.d(__webpack_exports__,"k",(function(){return xmpp_getAllUserIdFromHistory})),__webpack_require__.d(__webpack_exports__,"m",(function(){return xmpp_getShopIdsFromHistory})),__webpack_require__.d(__webpack_exports__,"i",(function(){return extractPartner})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getFptIdFromUsername})),__webpack_require__.d(__webpack_exports__,"u",(function(){return xmpp_parseXmlMsg})),__webpack_require__.d(__webpack_exports__,"w",(function(){return updateIsOwnerLogic})),__webpack_require__.d(__webpack_exports__,"d",(function(){return xmpp_buildMessageObject})),__webpack_require__.d(__webpack_exports__,"g",(function(){return xmpp_buildXMLMessage})),__webpack_require__.d(__webpack_exports__,"e",(function(){return xmpp_buildNewConversation})),__webpack_require__.d(__webpack_exports__,"h",(function(){return xmpp_convertMsgDetailToConversation})),__webpack_require__.d(__webpack_exports__,"v",(function(){return removeInvalidXmlCharacters})),__webpack_require__.d(__webpack_exports__,"s",(function(){return xmpp_parseHistoryListXMLData})),__webpack_require__.d(__webpack_exports__,"r",(function(){return xmpp_parseHistoryDetailXMLData})),__webpack_require__.d(__webpack_exports__,"p",(function(){return xmpp_parseAutoReplyXMLResponse})),__webpack_require__.d(__webpack_exports__,"o",(function(){return parseAutoReplyXMLRequest})),__webpack_require__.d(__webpack_exports__,"q",(function(){return xmpp_parseGeneralIQResponseData})),__webpack_require__.d(__webpack_exports__,"t",(function(){return parseSenLiveIQData}));var extractUserId=function(username){return(username||"").split("@")[0]},xmpp_buildChatIdFromCustomerToShop=function(customer_chat_id,shop_chat_id){return md5(customer_chat_id+shop_chat_id)},xmpp_buildFullJID=function(userId){var uniqueId=makeid(),platform="w-v"+setting.M,role="b";return userHelper.a.getRole()===res_const.F.SELLER&&(role="s"),""+userId+setting.p+"/"+platform+"-"+role+"-"+userId+uniqueId},xmpp_buildFullJidSenLive=function(userId){var uniqueId=makeid(),platform="w-v"+setting.M,role="b";return userHelper.a.getRole()===res_const.F.SELLER&&(role="s"),""+userId+setting.s+"/"+platform+"-"+role+"-"+userId+uniqueId};function buildNickNameSenLive(userFptId,userFullName){return userFptId+"_"+(new Date).getTime()+"-"+userFullName}var makeid=function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<20;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},xmpp_getAllUserIdFromHistory=function(chatList){return Object(map.a)(chatList,(function(conversation){return extractUserId(conversation.partner_id)}))},xmpp_getShopIdsFromHistory=function(chatList){return Object(map.a)(chatList,(function(conversation){return extractUserId(conversation.shop_id)}))},extractPartner=function(conversation){return _objectSpread({},conversation,{partner_avatar:conversation.partner_avatar,partner_fullname:conversation.partner_fullname,partner_id:conversation.partner_id,shop_id:conversation.shop_id||0})},xmpp_getTextValueFromTagName=function(node,tagName,index){void 0===index&&(index=0);var elements=node.getElementsByTagName(tagName);return index>=0&&(elements=Object(get.a)(elements,"["+index+"]")),strophe.Strophe.getText(elements)},xmpp_findJSONValue=function(node,tagName,index){void 0===index&&(index=0);var element=node.getElementsByTagName(tagName);index>=0&&(element=Object(get.a)(element,"["+index+"]"));var result={};if(element)try{result=JSON.parse(element.textContent)}catch(error){debugHelper.a.captureWithSentry("[parser] findJSONValue() "+error)}return result};function getUsernameFromJID(jid){var regexCheckUserFormat=new RegExp("\\d+"+setting.p,"g");return Object(get.a)(jid.match(regexCheckUserFormat),"0","")}function getFptIdFromUsername(username){var checkFptIdReg=new RegExp("\\d+","g");return Object(get.a)(username.match(checkFptIdReg),"0","")}function getDetailData(xmlMsg){return _objectSpread({message_id:xmlMsg.getAttribute("id"),content:xmpp_getTextValueFromTagName(xmlMsg,"body")},function(xmlMsg){var chatData={},dataElement=Object(get.a)(xmlMsg.getElementsByTagName("data"),"[0]");return dataElement?(chatData.chat_id=xmpp_getTextValueFromTagName(dataElement,"chat_id"),chatData.product_id=xmpp_getTextValueFromTagName(dataElement,"product_id"),chatData.timestamp=xmpp_getTextValueFromTagName(dataElement,"timestamp"),chatData.partner_avatar=xmpp_getTextValueFromTagName(dataElement,"partner_avatar"),chatData.partner_fullname=he_default.a.decode(xmpp_getTextValueFromTagName(dataElement,"partner_fullname")),chatData.partner_id=xmpp_getTextValueFromTagName(dataElement,"partner_id"),chatData.shop_id=xmpp_getTextValueFromTagName(dataElement,"shop_id"),chatData.message_object=xmpp_getTextValueFromTagName(dataElement,"product_image"),chatData.message_object=xmpp_findJSONValue(dataElement,"message_object"),chatData.you_re_shop=parseInt(xmpp_getTextValueFromTagName(dataElement,"you_re_shop"),10),chatData.message_type=xmpp_getTextValueFromTagName(dataElement,"message_type"),chatData.topic=xmpp_findJSONValue(dataElement,"topic"),chatData.user_fullname=xmpp_getTextValueFromTagName(dataElement,"user_fullname"),chatData.user_avatar=xmpp_getTextValueFromTagName(dataElement,"user_avatar"),chatData):chatData}(xmlMsg))}var xmpp_parseXmlMsg=function(xmlMsg){if(!xmpp_isValidXmlMsg(xmlMsg))return null;var detailData=getDetailData(xmlMsg),seenData=function(xmlMsg){var seenDataElement=Object(get.a)(xmlMsg.getElementsByTagName("received"),"[0]");if(!seenDataElement)return null;var fromJID=xmlMsg.getAttribute("from"),toJID=xmlMsg.getAttribute("to");return{fromUsername:getUsernameFromJID(fromJID),toUsername:getUsernameFromJID(toJID),chat_id:xmpp_getTextValueFromTagName(seenDataElement,"chat_id"),displayed:xmpp_getTextValueFromTagName(seenDataElement,"displayed"),you_re_shop:parseInt(xmpp_getTextValueFromTagName(seenDataElement,"you_re_shop"),10)}}(xmlMsg),to=xmlMsg.getAttribute("to"),receiver=xmlMsg.getAttribute("from"),type=xmlMsg.getAttribute("type"),bodyElement=xmlMsg.getElementsByTagName("body");return{to:to,from:receiver,type:type,message:strophe.Strophe.getText(Object(get.a)(bodyElement,"[0]","")),displayed:xmpp_getTextValueFromTagName(xmlMsg,"displayed"),detailData:detailData,seenData:seenData}};function updateIsOwnerLogic(parsedMsg,xmppUsername,partner_id_from_history,forceUpdateData){void 0===forceUpdateData&&(forceUpdateData=null);var user_id=function(fromUserId,toUserId,xmppUsername){var user_id=fromUserId;xmppUsername&&(Object(includes.a)(user_id,xmppUsername)||(user_id=toUserId));var correctUserFormat=getUsernameFromJID(user_id);return user_id=correctUserFormat||user_id}(parsedMsg.from,parsedMsg.to,xmppUsername),partner_id=function(fromUserId,toUserId,xmppUsername){var partner_id=toUserId;xmppUsername&&Object(includes.a)(partner_id,xmppUsername)&&(partner_id=fromUserId);var correctUserFormat=getUsernameFromJID(partner_id);return partner_id=correctUserFormat||partner_id}(parsedMsg.from,parsedMsg.to,xmppUsername),is_owner=0;return user_id===partner_id&&(is_owner=1,partner_id=partner_id_from_history,user_id!==parsedMsg.detailData.partner_id&&(partner_id=parsedMsg.detailData.partner_id)),userHelper.a.isSeller()&&Object(startsWith.a)(partner_id,"cs-")&&!is_owner&&parsedMsg.detailData.you_re_shop&&(is_owner=1,partner_id=partner_id_from_history),_objectSpread({},parsedMsg.detailData,{user_id:user_id,partner_id:partner_id,is_owner:is_owner},forceUpdateData)}var xmpp_buildMessageObject=function(messageData){var message_object={title:messageData.body,items:[],type:messageData.message_object_type,urls:[""],timestamp:(new Date).getTime(),postback:messageData.postback,sub_type:messageData.sub_type||""};switch(messageData.message_object_type){case res_const.q.IMAGE:message_object.urls=messageData.imageUrl?[messageData.imageUrl]:[""];break;case res_const.q.VOUCHER:var voucherItem={id:Object(get.a)(messageData,"voucherInfo.id",""),external_id:Object(get.a)(messageData,"voucherInfo.product.external_id","")||Object(get.a)(messageData,"voucherInfo.product.id",""),final_price:Object(get.a)(messageData,"voucherInfo.product.final_price",""),price:Object(get.a)(messageData,"voucherInfo.product.price",""),image_url:Object(get.a)(messageData,"voucherInfo.product.image_url",""),name:Object(get.a)(messageData,"voucherInfo.product.name",""),url:Object(get.a)(messageData,"voucherInfo.product.url",""),voucher_attr:Object(get.a)(messageData,"voucherInfo.voucher_attr",""),final_price_label:Object(get.a)(messageData,"voucherInfo.product.final_price_label",""),price_label:Object(get.a)(messageData,"voucherInfo.product.price_label",""),selected_options_label:Object(get.a)(messageData,"voucherInfo.product.selected_options_label","")};message_object.items.push(voucherItem);break;case res_const.q.SHOP_ORDER:message_object.items.push(_objectSpread({},messageData.orderContent));break;case res_const.q.PRODUCTS:message_object.products=[].concat(messageData.products);break;case res_const.q.QUOTE:var quoteData=messageData.nextMsgData.quote;message_object.title='"'+quoteData.msg_txt+'"\n\n'+messageData.body,message_object.type=res_const.q.QUOTE,message_object.quote=_objectSpread({},quoteData,{txt:messageData.body})}return message_object},xmpp_buildXMLMessage=function(msgData){var user_id=msgData.user_id,idmessage=msgData.idmessage,type=msgData.type,body=msgData.body,chat_id=msgData.chat_id,message_object=msgData.message_object,sender=msgData.sender,receiver=msgData.receiver,topic=msgData.topic,message_type=msgData.message_type,createdByUserId=msgData.createdByUserId,bodyTxt=body;message_object.type===res_const.q.QUOTE&&(bodyTxt='"'+message_object.quote.msg_txt+'" - '+body);var m=Object(strophe.$msg)({from:user_id,to:receiver.partner_id,type:type,id:idmessage}).c("body").t(bodyTxt);m.up().c("data",{xmlns:"data",type:"ChatExtension"}),m.c("chat_id").t(chat_id);var contentTxt=body;message_object.type===res_const.q.QUOTE&&(contentTxt='"'+message_object.quote.msg_txt+'" - '+body),m.up().c("content").t(contentTxt),m.up().c("product_id").t(receiver.product_id||0),m.up().c("timestamp").t((new Date).getTime()),m.up().c("partner_id").t(receiver.partner_id),m.up().c("partner_avatar").t(receiver.partner_avatar),m.up().c("partner_fullname").t(receiver.partner_fullname),m.up().c("user_avatar").t(Object(get.a)(sender,"avatar",""));var user_fullname=removeNotSafeXmlCharacters(Object(get.a)(sender,"full_name",""));m.up().c("user_fullname").t(user_fullname);var shop_id=Object(get.a)(receiver,"shop_id","");return shop_id&&"0"!==shop_id||(shop_id=userHelper.a.getCurrentUserInfo().shop_id),m.up().c("shop_id").t(shop_id),m.up().c("product_image").t(receiver.product_image||""),m.up().c("message_object").t(JSON.stringify(message_object)),msgData.replyFor&&m.up().c("message_object_reply_for").t(JSON.stringify(msgData.messageObjectReplyFor)),m.up().c("topic").t(JSON.stringify(topic||{})),m.up().c("you_re_shop").t(userHelper.a.getIsShop()),m.up().c("response_time").t(1),m.up().c("message_type").t(message_type),m.up().c("created_by_user").t(createdByUserId),m.up().up().c("active").t("http://jabber.org/protocol/chatstates"),m},xmpp_buildNewConversation=function(chatId,receiver,parentContextData){void 0===parentContextData&&(parentContextData={});var time=(new Date).getTime();return{chat_id:chatId,timestamp:time,timestamp_origin:1e3*time,partner_id:receiver.partner_id,partner_avatar:receiver.partner_avatar,partner_fullname:receiver.partner_fullname,is_owner:0,is_read:1,contact_phone:Object(get.a)(parentContextData,"contactPhone",""),shop_id:Object(get.a)(parentContextData,"shopId",""),topic:Object(get.a)(parentContextData,"topic",null),product_id:Object(get.a)(parentContextData,"productId",""),product_image:Object(get.a)(parentContextData,"productImage",""),content:""}},xmpp_convertMsgDetailToConversation=function(message){if(!message.is_owner){var _ref=[message.user_avatar,message.user_fullname];message.partner_avatar=_ref[0],message.partner_fullname=_ref[1]}var result=_objectSpread({},message,{content:he_default.a.decode(Object(get.a)(message,"content",""))});return result=function(conversation){if(!conversation||!conversation.message_object||conversation.is_owner)return conversation;var result=_objectSpread({},conversation);switch(conversation.message_object.type){case res_const.q.IMAGE:result.content=res_text.c.RECEIVED_IMAGES+conversation.partner_fullname;break;case res_const.q.VOUCHER:result.content=res_text.c.RECEIVED_VOUCHER+conversation.partner_fullname;break;case res_const.q.SHOP_ORDER:result.content=res_text.c.RECEIVED_ORDER+conversation.partner_fullname;break;case res_const.q.PRODUCTS:result.content=res_text.c.RECEIVED_PRODUCTS+conversation.partner_fullname}return result}(result)};var xmpp_isValidXmlMsg=function(msgXml){var seenDataElement=Object(get.a)(msgXml.getElementsByTagName("received"),"[0]");if(seenDataElement&&!xmpp_getTextValueFromTagName(seenDataElement,"displayed"))return!1;var dataElement=Object(get.a)(msgXml.getElementsByTagName("data"),"[0]"),chatType=msgXml.getAttribute("type");return(seenDataElement||dataElement)&&"chat"===chatType},removeNotSafeXmlCharacters=function(data){return data.replace(/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,"")},removeInvalidXmlCharacters=function(data){return data.replace(/((?:[\0-\x08\x0B\f\x0E-\x1F\uFFFD-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g,"")},xmpp_parseHistoryListXMLData=function(historyXMLData){var errorElement=Object(get.a)(historyXMLData.getElementsByTagName("error"),"[0]",null);if(errorElement)throw Error(errorElement.getAttribute("code"));return xmpp_findJSONValue(historyXMLData,"data",0)},xmpp_parseHistoryDetailXMLData=function(historyXMLData){var errorElement=Object(get.a)(historyXMLData.getElementsByTagName("error"),"[0]",null);if(errorElement)throw Error(errorElement.getAttribute("code"));return xmpp_findJSONValue(historyXMLData,"data",0)},xmpp_parseAutoReplyXMLResponse=function(autoReplyXMLData){var errorElement=Object(get.a)(autoReplyXMLData.getElementsByTagName("error"),"[0]",null);if(errorElement)throw Error(errorElement.getAttribute("code"));var jsonData=xmpp_findJSONValue(autoReplyXMLData,"data",0);return _objectSpread({},jsonData,{enabled:Boolean(jsonData.enabled),order_topic_enabled:Boolean(jsonData.order_topic_enabled),product_topic_enabled:Boolean(jsonData.product_topic_enabled)})},parseAutoReplyXMLRequest=function(submitData){return _objectSpread({},submitData,{enabled:submitData.enabled?1:0,order_topic_enabled:submitData.order_topic_enabled?1:0,product_topic_enabled:submitData.product_topic_enabled?1:0})},xmpp_parseGeneralIQResponseData=function(IQResponseData){var errorElement=Object(get.a)(IQResponseData.getElementsByTagName("error"),"[0]",null);if(errorElement)throw Error(errorElement.getAttribute("code"));return xmpp_getTextValueFromTagName(IQResponseData,"data",0)};function parseSenLiveIQData(xmlIQData){var errorElement=Object(get.a)(xmlIQData.getElementsByTagName("error"),"[0]",null);if(errorElement)throw Error(errorElement.getAttribute("code"));var result=Object(get.a)(xmlIQData.getElementsByTagName("result"),"0.textContent","nok");if("nok"===result)throw Error(400);return result}},T19g:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return convertLiveStreamChatList})),__webpack_require__.d(__webpack_exports__,"a",(function(){return convertLiveStreamChatDetail})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isIgnoreMsg})),__webpack_require__.d(__webpack_exports__,"g",(function(){return parseXmlMsgSenLive})),__webpack_require__.d(__webpack_exports__,"c",(function(){return convertToMsgInHistoryDetail})),__webpack_require__.d(__webpack_exports__,"f",(function(){return moveConversationToFirst})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getFptIdForJIDSenLive}));var lodash_es_includes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("NFsq"),lodash_es_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7EGn"),lodash_es_forEach__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("OZf9"),lodash_es_forEachRight__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("HJ27"),strophe_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("vi4O"),he__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ktc5"),he__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(he__WEBPACK_IMPORTED_MODULE_5__),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1wGr"),sendo_web_chat_images_livestream_logo_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ulJp"),sendo_web_chat_images_livestream_logo_png__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(sendo_web_chat_images_livestream_logo_png__WEBPACK_IMPORTED_MODULE_7__),sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1wi/"),_context_SenLiveContext__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("CJoK");function convertLiveStreamChatList(chatListLiveStream){var results=[];return Object(lodash_es_forEach__WEBPACK_IMPORTED_MODULE_2__.a)(chatListLiveStream,(function(chatLiveStream){if(chatLiveStream.room_name){var time_info=function(timestamp){var createdDate=new Date(parseInt(timestamp,10));return"Ng\xe0y "+createdDate.getDate()+"/"+(createdDate.getMonth()+1)+"/"+createdDate.getFullYear()+" - L\xfac "+createdDate.getHours()+":"+createdDate.getMinutes()}(parseInt(chatLiveStream.room_name.split("-")[1],10)/1e3),partner_fullname=chatLiveStream.room_title,content=time_info;chatLiveStream.room_title||(partner_fullname=time_info,content="Tin nh\u1eafn c\u1ee7a SenLive"),results.push({chat_id:chatLiveStream.room_name,partner_fullname:partner_fullname,message_status:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_6__.r.LIVESTREAM,content:content,partner_avatar:chatLiveStream.room_image||sendo_web_chat_images_livestream_logo_png__WEBPACK_IMPORTED_MODULE_7___default.a,timestamp:chatLiveStream.timestamp/1e3,message_type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_6__.s.LIVESTREAM,streaming_status:chatLiveStream.streaming_status||sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_6__.C.VOD})}})),results}function convertLiveStreamChatDetail(chatLtDetails,paging){var result={history:[],paging:{limit:paging.limit,offset:paging.offset+paging.limit},shop_response_info:{},teemplate:[]};return Object(lodash_es_forEachRight__WEBPACK_IMPORTED_MODULE_3__.a)(chatLtDetails,(function(chatLtDetail){var partner_fullname=chatLtDetail.nick;partner_fullname.trim()||(partner_fullname=getFptIdForJIDSenLive(chatLtDetail.bare_peer)),result.history.push({message_id:chatLtDetail.id,message_type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_6__.s.LIVESTREAM,partner_id:chatLtDetail.bare_peer,partner_fullname:partner_fullname,content:chatLtDetail.txt,text:chatLtDetail.txt,timestamp:chatLtDetail.timestamp/1e3,is_read:1,is_owner:0})})),result}function isIgnoreMsg(parsedMsg){return!Object(lodash_es_includes__WEBPACK_IMPORTED_MODULE_0__.a)(parsedMsg.from,"@"+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_8__.t+"/")||parsedMsg.isDelayMsg}var parseXmlMsgSenLive=function(xmlMsg){var to=xmlMsg.getAttribute("to"),receiver=xmlMsg.getAttribute("from"),type=xmlMsg.getAttribute("type"),bodyElement=xmlMsg.getElementsByTagName("body"),bodyText=strophe_js__WEBPACK_IMPORTED_MODULE_4__.Strophe.getText(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(bodyElement,"[0]","")),delayElement=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(xmlMsg.getElementsByTagName("delay"),"[0]",null);return{to:to,from:receiver,type:type,message:bodyText,isDelayMsg:Boolean(delayElement)}},convertToMsgInHistoryDetail=function(parsedMsg){var roomName=parsedMsg.from.split("@"+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_8__.t+"/")[0];_context_SenLiveContext__WEBPACK_IMPORTED_MODULE_9__.a.shardingRoomSuffix&&(roomName=roomName.replace(_context_SenLiveContext__WEBPACK_IMPORTED_MODULE_9__.a.shardingRoomSuffix,""));var partnerId=parsedMsg.from.split("@"+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_8__.t+"/")[1],partnerFptId=partnerId.split("_")[0],partnerFullName=partnerId.split("-")[1];return partnerFullName.trim()||(partnerFullName=partnerFptId),{chat_id:roomName,message_id:parsedMsg.id,message_type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_6__.s.LIVESTREAM,partner_id:""+partnerFptId+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_8__.s,partner_fullname:partnerFullName,content:he__WEBPACK_IMPORTED_MODULE_5___default.a.unescape(parsedMsg.message),text:parsedMsg.message,timestamp:(new Date).getTime(),is_read:1,is_owner:0}};function moveConversationToFirst(chatList,chat_id){var newChatList=[];return Object(lodash_es_forEach__WEBPACK_IMPORTED_MODULE_2__.a)(chatList,(function(conversation){conversation.chat_id===chat_id?newChatList.unshift(conversation):newChatList.push(conversation)})),newChatList}function getFptIdForJIDSenLive(jid){return jid.replace(sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_8__.s,"")}},V69r:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return ChiDaiHelper})),__webpack_require__.d(__webpack_exports__,"h",(function(){return updateChiDaiToChatList})),__webpack_require__.d(__webpack_exports__,"j",(function(){return updateChiDaiWithDefaultData})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isChiDaiConversation})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isChiDaiChatId})),__webpack_require__.d(__webpack_exports__,"i",(function(){return updateChiDaiTyping})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addMessageStatusChatListFromServer})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getAIMessageType})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isDisplayAITyping})),__webpack_require__.d(__webpack_exports__,"c",(function(){return displayAITyping}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),lodash_es_find__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("CpTu"),lodash_es_filter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Z0Cl"),lodash_es_get__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7EGn"),lodash_es_map__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zmn3"),sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("lCmp"),__webpack_require__("1wi/")),_chatHelper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("G77k"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1wGr"),_userHelper__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("xbIa");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var ChiDaiHelper=function(){function ChiDaiHelper(){}return ChiDaiHelper.setDefaultChatID=function(user_fpt_id){if(user_fpt_id){var chat_id=Object(_chatHelper__WEBPACK_IMPORTED_MODULE_7__.e)(user_fpt_id,this.chiDaiDefaultInfo.partner_id,_userHelper__WEBPACK_IMPORTED_MODULE_9__.a.role);this.chiDaiDefaultInfo=_objectSpread({},this.chiDaiDefaultInfo,{chat_id:chat_id})}},ChiDaiHelper.setDefaultChiDaiFromServer=function(chiDaiInfo){chiDaiInfo.username<0?this.isDisabledChiDai=!0:this.chiDaiDefaultInfo=_objectSpread({},this.chiDaiDefaultInfo,{},chiDaiInfo,{partner_id:chiDaiInfo.username+sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_6__.p})},ChiDaiHelper.getDefaultChiDaiInfo=function(){return this.chiDaiDefaultInfo},ChiDaiHelper}();function updateChiDaiToChatList(chatList,anotherChatListToFind){void 0===anotherChatListToFind&&(anotherChatListToFind=[]);var result=[].concat(chatList);if(ChiDaiHelper.isDisabledChiDai)return result;var chiDaiInfo=function(chatList,anotherChatListToFind){return Object(lodash_es_find__WEBPACK_IMPORTED_MODULE_1__.a)([].concat(chatList,anotherChatListToFind),(function(conversation){return conversation.chat_id===ChiDaiHelper.getDefaultChiDaiInfo().chat_id}))}(chatList,anotherChatListToFind);return chiDaiInfo=chiDaiInfo?updateChiDaiWithDefaultData(chiDaiInfo):ChiDaiHelper.getDefaultChiDaiInfo(),(result=function(chatList){return Object(lodash_es_filter__WEBPACK_IMPORTED_MODULE_2__.a)(chatList,(function(conversation){return conversation.chat_id!==ChiDaiHelper.getDefaultChiDaiInfo().chat_id}))}(chatList)).unshift(chiDaiInfo),result}function updateChiDaiWithDefaultData(chiDaiInfo){return _objectSpread({},chiDaiInfo,{partner_id:ChiDaiHelper.getDefaultChiDaiInfo().partner_id,partner_fullname:ChiDaiHelper.getDefaultChiDaiInfo().partner_fullname,partner_avatar:ChiDaiHelper.getDefaultChiDaiInfo().partner_avatar,chat_id:ChiDaiHelper.getDefaultChiDaiInfo().chat_id})}function isChiDaiConversation(conversation){return Boolean(conversation&&conversation.chat_id&&conversation.chat_id===ChiDaiHelper.getDefaultChiDaiInfo().chat_id)}function isChiDaiChatId(chat_id){return Boolean(chat_id===ChiDaiHelper.getDefaultChiDaiInfo().chat_id)}function updateChiDaiTyping(state){return isChiDaiConversation(_objectSpread({},state.conversation))?state.set("chiDai",_objectSpread({},state.chiDai,{isDisplayTyping:!1,isRecievedAnswerForLastMsg:!0})):state}function addMessageStatusChatListFromServer(chatList){return Object(lodash_es_map__WEBPACK_IMPORTED_MODULE_4__.a)([].concat(chatList),(function(conversation){return Object(_chatHelper__WEBPACK_IMPORTED_MODULE_7__.b)(conversation)}))}function getAIMessageType(message){var attachment=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(message,"botContent.message.attachment",null);if(Boolean(attachment&&attachment.type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_8__.g.MSG_TYPE.ATTACHMENT_TYPE.TEMPLATE))return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_8__.c.ATTACHMENT;var textContent=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(message,"botContent.message.text","");return Boolean(textContent)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_8__.c.NORMAL_TEXT:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_8__.c.NONE}function isDisplayAITyping(messageData){return Boolean(isChiDaiConversation(messageData.receiver)&&function(messageData){var msgType=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(messageData,"message_object.type","");return Boolean(msgType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_8__.q.TEXT||msgType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_8__.q.POST_BACK)}(messageData))}function displayAITyping(dispatch){dispatch({type:"chat/SEND_MSG_CHI_DAI"}),setTimeout((function(){dispatch({type:"chat/SHOULD_DISPLAY_TYPING"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_6__.g.TIME_CHECK_SHOULD_DISPLAY_TYPING_SECOND),setTimeout((function(){dispatch({type:"chat/STOP_DISPLAY_TYPING"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_6__.g.TIME_WAIT_FOR_CHI_DAI_SECOND)}_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(ChiDaiHelper,"chiDaiDefaultInfo",_objectSpread({},sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_6__.h)),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(ChiDaiHelper,"isDisabledChiDai",!1)},c4xm:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(window){var CanvasPrototype=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,hasBlobConstructor=window.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),hasArrayBufferViewSupport=hasBlobConstructor&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,dataURIPattern=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,dataURLtoBlob=(hasBlobConstructor||BlobBuilder)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(dataURI){var matches,mediaType,isBase64,dataString,byteString,arrayBuffer,intArray,i,bb;if(!(matches=dataURI.match(dataURIPattern)))throw new Error("invalid data URI");for(mediaType=matches[2]?matches[1]:"text/plain"+(matches[3]||";charset=US-ASCII"),isBase64=!!matches[4],dataString=dataURI.slice(matches[0].length),byteString=isBase64?atob(dataString):decodeURIComponent(dataString),arrayBuffer=new ArrayBuffer(byteString.length),intArray=new Uint8Array(arrayBuffer),i=0;i<byteString.length;i+=1)intArray[i]=byteString.charCodeAt(i);return hasBlobConstructor?new Blob([hasArrayBufferViewSupport?intArray:arrayBuffer],{type:mediaType}):((bb=new BlobBuilder).append(arrayBuffer),bb.getBlob(mediaType))};window.HTMLCanvasElement&&!CanvasPrototype.toBlob&&(CanvasPrototype.mozGetAsFile?CanvasPrototype.toBlob=function(callback,type,quality){var self=this;setTimeout((function(){quality&&CanvasPrototype.toDataURL&&dataURLtoBlob?callback(dataURLtoBlob(self.toDataURL(type,quality))):callback(self.mozGetAsFile("blob",type))}))}:CanvasPrototype.toDataURL&&dataURLtoBlob&&(CanvasPrototype.toBlob=function(callback,type,quality){var self=this;setTimeout((function(){callback(dataURLtoBlob(self.toDataURL(type,quality)))}))})),void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return dataURLtoBlob}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window)},d5gp:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CONFIG_ROUTE_NAME}));var sendo_web_sdk_createLazyLoadComponent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("NorQ"),ConfigPage=Object(sendo_web_sdk_createLazyLoadComponent__WEBPACK_IMPORTED_MODULE_0__.b)({id:"ConfigPage",ssrMethod:sendo_web_sdk_createLazyLoadComponent__WEBPACK_IMPORTED_MODULE_0__.a.FULL,useWaypoint:!1,Component:function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,"Txvc"))},Placeholder:__webpack_require__("y3l/").default}),CONFIG_ROUTE_NAME="@@Route/ConfigRoute";__webpack_exports__.b={path:"/config",component:ConfigPage.Component,routeName:CONFIG_ROUTE_NAME,chunkName:"config-page",exact:!0}},egp3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SELLER_TEXT}));var SELLER_TEXT={IFRAME_HEADER:"Chat",CHAT_GUIDE:{PRESS_BUTTON:"B\u1ea5m v\xe0o",CHAT_NOW:"n\xfat Chat",AT_PAGE:"\u1edf trang",DETAIL_TO_CHAT:"",NOT_VALID_SELLER:"T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n ch\u01b0a c\xf3 quy\u1ec1n Chat \u0111\u1ed1i v\u1edbi shop",ASK_CHAT_PERMISSION:"Vui l\xf2ng li\xean h\u1ec7 ch\u1ee7 shop \u0111\u1ec3 \u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n"},MOBILE:{IFRAME_HEADER:"Danh s\xe1ch chat "},VOUCHER_MODAL:{HEADER_LABEL:"T\u1ea1o m\xe3 gi\u1ea3m gi\xe1",BODY_NOTE:"\u0110\u1ec3 ph\u1ee5c v\u1ee5 t\u1ed1t h\u01a1n cho ng\u01b0\u1eddi mua, shop vui l\xf2ng g\u1eedi t\u1eb7ng k\xe8m 1 m\xe3 gi\u1ea3m gi\xe1. L\u01b0u \xfd: M\xe3 gi\u1ea3m gi\xe1 ch\u1ec9 hi\u1ec3n th\u1ecb cho ng\u01b0\u1eddi mua sau khi \u0111\xe1nh gi\xe1 \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng",VOUCHER_AMOUNT_LABEL:"T\u1ea1o m\xe3 gi\u1ea3m gi\xe1",ORDER_FROM_LABEL:"Cho \u0111\u01a1n h\xe0ng t\u1eeb",LIMIT_TIME_LABEL:"Th\u1eddi h\u1ea1n",TIME_UNIT:"Gi\u1edd",SUBMIT_BTN:"G\u1eedi y\xeau c\u1ea7u",ERROR:{AMOUNT_GREATER_THAN_HALF_PRICE:"Gi\xe1 tr\u1ecb m\xe3 gi\u1ea3m gi\xe1 ph\u1ea3i d\u01b0\u1edbi 50% gi\xe1 tr\u1ecb \u0111\u01a1n h\xe0ng t\u1ed1i thi\u1ec3u",AMOUNT_LOWER_THAN_MIN:"Vui l\xf2ng t\u1ea1o m\xe3 gi\u1ea3m gi\xe1 t\u1eeb 10.000 tr\u1edf l\xean",AMOUNT_MUST_MUTIPLE_OF_10k:"S\u1ed1 ti\u1ec1n gi\u1ea3m l\xe0 b\u1ed9i s\u1ed1 c\u1ee7a 10.000",PRODUCT_PRICE_MUST_GREATER_THEN_20K:"S\u1ea3n ph\u1ea9m ph\u1ea3i c\xf3 gi\xe1 t\u1eeb 20k"},FORM:{VOUCHER_VALUE_LABEL:"T\u1ea1o m\xe3 gi\u1ea3m gi\xe1",VOUCHER_VALUE_PLACEHOLDER:"Nh\u1eadp s\u1ed1 ti\u1ec1n gi\u1ea3m",DURATION_LABEL:"Th\u1eddi h\u1ea1n",DURATION_UNIT:"Ng\xe0y",BUYER_NAME:"Ng\u01b0\u1eddi mua",SUBMIT_BTN:"G\u1eedi"}},CHAT_ERROR:{FAILED_LOAD_HISTORY:"Xin l\u1ed7i, kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c l\u1ecbch s\u1eed chat. B\u1ea1n vui l\xf2ng th\u1eed l\u1ea1i sau"}}},epg5:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"fetchHistoryDetailAsync",(function(){return fetchHistoryDetailAsync})),__webpack_require__.d(__webpack_exports__,"searchHistoryListAsync",(function(){return searchHistoryListAsync})),__webpack_require__.d(__webpack_exports__,"fetchHistoryListAsync",(function(){return fetchHistoryListAsync})),__webpack_require__.d(__webpack_exports__,"finishFetchHistoryListFromXMPP",(function(){return finishFetchHistoryListFromXMPP})),__webpack_require__.d(__webpack_exports__,"searchHistoryListFromXMPPAsync",(function(){return searchHistoryListFromXMPPAsync})),__webpack_require__.d(__webpack_exports__,"finishSearchHistoryListFromXMPP",(function(){return finishSearchHistoryListFromXMPP})),__webpack_require__.d(__webpack_exports__,"finishFetchHistoryDetailFromXMPP",(function(){return finishFetchHistoryDetailFromXMPP})),__webpack_require__.d(__webpack_exports__,"deleteConversationAsync",(function(){return deleteConversationAsync})),__webpack_require__.d(__webpack_exports__,"finishDeleteConversationFromXMPP",(function(){return finishDeleteConversationFromXMPP})),__webpack_require__.d(__webpack_exports__,"sendIQGetAutoReplyConfigAsync",(function(){return sendIQGetAutoReplyConfigAsync})),__webpack_require__.d(__webpack_exports__,"finishIQFetchAutoConfig",(function(){return finishIQFetchAutoConfig})),__webpack_require__.d(__webpack_exports__,"sendIQSaveAutoReplyConfigAsync",(function(){return sendIQSaveAutoReplyConfigAsync})),__webpack_require__.d(__webpack_exports__,"finishIQSaveAutoConfig",(function(){return finishIQSaveAutoConfig})),__webpack_require__.d(__webpack_exports__,"limitSendingMsg",(function(){return limitSendingMsg})),__webpack_require__.d(__webpack_exports__,"removeLimitSendingMsg",(function(){return removeLimitSendingMsg}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),lodash_es_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7EGn"),sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1wi/"),sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("xbIa"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1wGr"),q__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("S+eF"),sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("N6vC"),sendo_web_chat_helpers_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("V69r"),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("/wUs"),sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("vURH"),sendo_web_chat_pages_Config_Detail_AutoReply_setting__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("JHJb"),sendo_web_chat_res_text__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("i8SR"),_fetcher__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("721D"),_helpers_data_chatHelper__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("G77k");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function isConnectedXMPP(getState){return Boolean(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(getState(),"app.xmppStatus",0)===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.k.APP.XMPP_STATUS.CONNECTED)}var fetchHistoryDetailAsync=function(chat_id,params,version,isLoadMore){return void 0===params&&(params={type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.d.DEFAULT}),void 0===version&&(version=sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.d.VERSION),void 0===isLoadMore&&(isLoadMore=!1),function(dispatch,getState){return params.type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.d.LIVESTREAM?Object(_fetcher__WEBPACK_IMPORTED_MODULE_12__.b)(chat_id,params,isLoadMore)(dispatch,getState):function(chat_id,params,version,isLoadMore){void 0===params&&(params={});return function(dispatch,getState){return new q__WEBPACK_IMPORTED_MODULE_5__.Promise((function(resolvePromise){isConnectedXMPP(getState)?dispatch(startFetchHistoryDetailFromXMPP(chat_id,params,version,resolvePromise,isLoadMore)):dispatch(retryAfterConnectedXMPP(startFetchHistoryDetailFromXMPP(chat_id,params,version,resolvePromise,isLoadMore)))}))}}(chat_id,{type:params.type,cursor:params.paging},version,isLoadMore)(dispatch,getState)}},searchHistoryListAsync=function(searchValue){return function(dispatch,getState){return searchHistoryListFromXMPPAsync(searchValue)(dispatch,getState)}};function retryAfterConnectedXMPP(retryFunction){return function(dispatch,getState){var waitConnectedXMPPChecker=setInterval((function(){isConnectedXMPP(getState)&&(clearInterval(waitConnectedXMPPChecker),dispatch(retryFunction))}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.G)}}function startFetchHistoryDetailFromXMPP(chat_id,params,version,resolvePromise,isLoadMore){return function(dispatch,getState){params.cursor||(dispatch({type:"CHAT_LOADING_DETAIL"}),isLoadMore||setTimeout((function(){dispatch({type:"CHAT_DISPLAY_LOADING_DETAIL"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.n));var isOnWAP=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(getState(),"app.isOnWAP",!1),limitMsgDetail=sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.w;isOnWAP&&(limitMsgDetail=sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.x),params.cursor&&(limitMsgDetail*=2);var payload={data:_objectSpread({version:version,chat_id:chat_id,limit:limitMsgDetail,is_shop:sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_3__.a.isSeller()},params),resolvePromise:resolvePromise,isFirstFetchDetail:!params.cursor};dispatch({type:"XMPP_SEND_IQ_HISTORY_DETAIL",payload:payload})}}var fetchHistoryListAsync=function(params,isAppLoad,isLoadMore){return void 0===isAppLoad&&(isAppLoad=!1),void 0===isLoadMore&&(isLoadMore=!1),function(dispatch,getState){var reduxState=getState(),filterType=params.type;if(isLoadMore||!Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__.g)(reduxState,filterType))return reduxState.chat.chatSystemType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.f.SENLIVE?Object(_fetcher__WEBPACK_IMPORTED_MODULE_12__.c)(params,isAppLoad,isLoadMore)(dispatch,getState):function(params,isAppLoad,isLoadMore){void 0===params&&(params={});return function(dispatch,getState){return new q__WEBPACK_IMPORTED_MODULE_5__.Promise((function(resolvePromise){getState().chat.isLoadingHistory||(isLoadMore||dispatch({type:"CHAT_CLEAR_HISTORY"}),dispatch({type:"CHAT_LOADING_HISTORY"}),isAppLoad?dispatch({type:"APP_LOADING_HISTORY"}):(setTimeout((function(){dispatch({type:"chat/TIMEOUT_LOAD_HISTORY"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.K),isLoadMore||setTimeout((function(){dispatch({type:"chat/DISPLAY_LOADING_HISTORY"})}),1e3*sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.n)),isConnectedXMPP(getState)?dispatch(startFetchHistoryListFromXMPP(params,resolvePromise,isLoadMore)):dispatch(retryAfterConnectedXMPP(startFetchHistoryListFromXMPP(params,resolvePromise,isLoadMore))))}))}}({cursor:params.paging,type:params.type},isAppLoad,isLoadMore)(dispatch,getState);dispatch({type:"chat/SET_CHAT_LIST",payload:{newChatList:Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__.c)(reduxState.chat,filterType),paging:Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__.e)(reduxState,filterType)}})}};function startFetchHistoryListFromXMPP(params,resolvePromise,isLoadMore){return function(dispatch){dispatch({type:"XMPP_SEND_IQ_HISTORY_LIST",payload:{data:_objectSpread({version:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.d.VERSION_HISTORY_LIST,limit:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.v,is_shop:sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_3__.a.isSeller()},params),isLoadMore:isLoadMore,resolvePromise:resolvePromise}})}}var finishFetchHistoryListFromXMPP=function(responseData){return function(dispatch,getState){var reduxState=getState(),fetchHistoryListPayload=reduxState.xmpp.fetchHistoryListPayload;if(reduxState.chat.isLoadingHistory)try{var historyListResult=Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__.s)(responseData);if(reduxState.app.isLoadingAppData){dispatch({type:"APP_LOAD_HISTORY_SUCCESS"});var chiDaiInfo={username:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(historyListResult,"chidai_username",-1),content:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(historyListResult,"chidai_suggestion",""),partner_fullname:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(historyListResult,"chidai_name",""),partner_avatar:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(historyListResult,"chidai_avatar","")};sendo_web_chat_helpers_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_7__.b.setDefaultChiDaiFromServer(chiDaiInfo),_helpers_data_chatHelper__WEBPACK_IMPORTED_MODULE_13__.g.setActiveChatColdDBFromServer(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(historyListResult,"active_chat_cold_db",!1))}var newHistoryList=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(historyListResult,"history",[]);dispatch({type:"chat/SET/isLoadedLastHistory",payload:{isLoadedLastHistory:Boolean(newHistoryList.length<sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.v)}});var filterType=fetchHistoryListPayload.data.type,chatListByFilterType=Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__.c)(reduxState.chat,filterType),newChatList=[].concat(newHistoryList);if(fetchHistoryListPayload.isLoadMore&&(newChatList=[].concat(chatListByFilterType,newHistoryList)),newChatList=Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__.h)(newChatList),filterType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.l.ALL)newChatList=Object(sendo_web_chat_helpers_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_7__.h)(newChatList);else if(sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_3__.a.isSeller()){var anotherChatListToFind=Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__.b)(reduxState.chat,filterType);newChatList=Object(sendo_web_chat_helpers_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_7__.h)(newChatList,anotherChatListToFind)}dispatch({type:"chat/SET_FILTER_CHAT_LIST_RESULTS",payload:{newChatList:newChatList=Object(sendo_web_chat_helpers_data_ChiDaiHelper__WEBPACK_IMPORTED_MODULE_7__.a)(newChatList),filterType:filterType,paging:historyListResult.paging}}),dispatch({type:"chat/SET_CHAT_LIST",payload:{newChatList:newChatList,paging:historyListResult.paging}}),dispatch({type:"CHAT_LOAD_HISTORY_SUCCESS"}),fetchHistoryListPayload.resolvePromise(newChatList)}catch(error){reduxState.app.isLoadingAppData&&(dispatch({type:"APP_LOAD_HISTORY_FAILED"}),dispatch({type:"CHAT_DISPLAY_ERROR_MSG",payload:{errorMsg:sendo_web_chat_res_text__WEBPACK_IMPORTED_MODULE_11__.b.CHAT_ERROR.FAILED_LOAD_HISTORY}})),dispatch({type:"CHAT_LOAD_HISTORY_FAILED"}),fetchHistoryListPayload.resolvePromise([]),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_8__.a.captureWithSentry("[XMPP][history_list]"+error)}else fetchHistoryListPayload.resolvePromise([])}},searchHistoryListFromXMPPAsync=function(searchValue){return function(dispatch,getState){return new q__WEBPACK_IMPORTED_MODULE_5__.Promise((function(resolvePromise){dispatch({type:"SEARCH_HISTORY_START",payload:{searchValue:searchValue}}),isConnectedXMPP(getState)?dispatch(startSearchHistoryListFromXMPP(searchValue,resolvePromise)):dispatch(retryAfterConnectedXMPP(startSearchHistoryListFromXMPP(searchValue,resolvePromise)))}))}};function startSearchHistoryListFromXMPP(searchValue,resolvePromise){return function(dispatch){dispatch({type:"XMPP_SEND_IQ_SEARCH_HISTORY_LIST",payload:{data:{version:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.d.VERSION,limit:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.v,is_shop:sendo_web_chat_helpers_data_userHelper__WEBPACK_IMPORTED_MODULE_3__.a.isSeller(),k:searchValue},resolvePromise:resolvePromise}})}}var finishSearchHistoryListFromXMPP=function(responseData){return function(dispatch,getState){try{var successAction={type:"SEARCH_HISTORY_SUCCESS",payload:Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__.s)(responseData)};dispatch(successAction),getState().xmpp.searchHistoryListPromise.resolve(successAction)}catch(error){dispatch({type:"SEARCH_HISTORY_FAILED"}),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_8__.a.captureWithSentry("[XMPP][search_history_list]"+error)}}},finishFetchHistoryDetailFromXMPP=function(responseData){return function(dispatch,getState){try{dispatch({type:"CHAT_STOP_LOADING_DETAIL"});var isFirstFetchDetail=getState().xmpp.isFirstFetchDetail;isFirstFetchDetail&&dispatch({type:"MDB_NOT_SCROLL_LATEST_IMG"});var successAction={type:"CHAT_LOAD_DETAIL",payload:_objectSpread({},Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__.r)(responseData),{isFirstFetchDetail:isFirstFetchDetail})};dispatch(successAction),getState().xmpp.fetchHistoryDetailPromise.resolve(successAction)}catch(error){var failedAction={type:"CHAT_STOP_LOADING_DETAIL"};dispatch(failedAction),getState().xmpp.fetchHistoryDetailPromise.resolve(failedAction),sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_8__.a.captureWithSentry("[XMPP][history_detail]"+error)}}},deleteConversationAsync=function(conversation){return function(dispatch,getState){return function(conversation){return function(dispatch,getState){return new q__WEBPACK_IMPORTED_MODULE_5__.Promise((function(resolvePromise){dispatch({type:"CHAT_DELETE_CONVERSATION_CALLING"}),isConnectedXMPP(getState)?dispatch(startDeleteConversationFromXMPP(conversation.chat_id,resolvePromise)):dispatch(retryAfterConnectedXMPP(startDeleteConversationFromXMPP(conversation.chat_id,resolvePromise)))}))}}(conversation)(dispatch,getState)}};function startDeleteConversationFromXMPP(chat_id,resolvePromise){return function(dispatch){dispatch({type:"XMPP_SEND_IQ_DELETE_HISTORY",payload:{data:{version:sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_2__.d.VERSION,chat_id:chat_id},resolvePromise:resolvePromise}})}}var finishDeleteConversationFromXMPP=function(responseData){return function(dispatch,getState){try{if(!getState().xmpp.deletingChatId)throw Error("emtpy chat id");var successAction={type:"CHAT_DELETE_CONVERSATION",payload:{chat_id:getState().xmpp.deletingChatId}};dispatch(successAction),getState().xmpp.deleteHistoryPromise.resolve(successAction)}catch(error){sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_8__.a.captureWithSentry("[XMPP][delete_history]"+error);var failedAction={type:"CHAT_DELETE_CONVERSATION_FAILED"};dispatch(failedAction),getState().xmpp.deleteHistoryPromise.resolve(failedAction)}}},sendIQGetAutoReplyConfigAsync=function(){return function(dispatch,getState){return new q__WEBPACK_IMPORTED_MODULE_5__.Promise((function(resolvePromise,rejectedPromise){dispatch({type:"XMPP_IQ_GET_AUTO_REPLY_CONFIG",payload:{resolvePromise:resolvePromise,rejectedPromise:rejectedPromise}}),dispatch({type:"config/GET_AUTO_REPLY_SENDING"}),setTimeout((function(){getState().config.getAutoReplyConfig.isFetching&&dispatch({type:"config/GET_AUTO_REPLY_DISPLAY_LOADING"})}),1e3*sendo_web_chat_pages_Config_Detail_AutoReply_setting__WEBPACK_IMPORTED_MODULE_10__.a.GET_CONFIG_DISPLAY_LOADING_DELAY_SECOND),setTimeout((function(){getState().config.getAutoReplyConfig.isFetching&&dispatch({type:"config/GET_AUTO_REPLY_FAILED"})}),1e3*sendo_web_chat_pages_Config_Detail_AutoReply_setting__WEBPACK_IMPORTED_MODULE_10__.a.GET_CONFIG_TIMEOUT_SECOND)}))}},finishIQFetchAutoConfig=function(IQData){return function(dispatch,getState){try{if(!getState().config.getAutoReplyConfig.isFetching)throw Error("time out");var result=Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__.p)(IQData);dispatch({type:"config/SET_AUTO_REPLY_DATA",payload:{autoReplyData:result}}),dispatch({type:"config/GET_AUTO_REPLY_SUCCESS"}),getState().xmpp.fetchAutoReplyConfigPromise.resolve(result)}catch(error){sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_8__.a.captureWithSentry("[IQ][auto_config][get]"+error.message),dispatch({type:"config/GET_AUTO_REPLY_FAILED"})}}},sendIQSaveAutoReplyConfigAsync=function(submitData){return function(dispatch,getState){return new q__WEBPACK_IMPORTED_MODULE_5__.Promise((function(resolvePromise,rejectedPromise){var payload={resolvePromise:resolvePromise,rejectedPromise:rejectedPromise,submitData:Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__.o)(_objectSpread({},submitData,{created_by:Object(sendo_web_chat_helpers_reducer_xmppHelper__WEBPACK_IMPORTED_MODULE_9__.f)(getState())}))};dispatch({type:"XMPP_IQ_SAVE_AUTO_REPLY_CONFIG",payload:payload})}))}},finishIQSaveAutoConfig=function(IQData){return function(dispatch,getState){try{var result=Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_6__.q)(IQData,sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_4__.o.FETCH_AUTO_REPLY_TAG_NAME);if("200"!==result)throw Error("error code = "+result);var lastSubmitData=_objectSpread({},getState().xmpp.saveAutoReplyConfigPromise.submitData);dispatch({type:"config/SET_AUTO_REPLY_DATA",payload:{autoReplyData:_objectSpread({},lastSubmitData,{enabled:Boolean(lastSubmitData.enabled),order_topic_enabled:Boolean(lastSubmitData.order_topic_enabled),product_topic_enabled:Boolean(lastSubmitData.product_topic_enabled)})}}),getState().xmpp.saveAutoReplyConfigPromise.resolve(result)}catch(error){sendo_web_chat_helpers_data_debugHelper__WEBPACK_IMPORTED_MODULE_8__.a.captureWithSentry("[IQ][auto_config][save]"+error.message)}}};function limitSendingMsg(){return{type:"xmpp/SET_LIMIT_SENDING_MSG",payload:{isLimitSendingMsg:!0}}}function removeLimitSendingMsg(){return{type:"xmpp/SET_LIMIT_SENDING_MSG",payload:{isLimitSendingMsg:!1}}}},i8SR:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return COMMON_TEXT})),__webpack_require__.d(__webpack_exports__,"c",(function(){return CONVERSATION_CONTENT})),__webpack_require__.d(__webpack_exports__,"g",(function(){return TOOLTIP})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CHAT_GUIDE})),__webpack_require__.d(__webpack_exports__,"e",(function(){return ORDER_MODAL})),__webpack_require__.d(__webpack_exports__,"f",(function(){return PRODUCT_MODAL})),__webpack_require__.d(__webpack_exports__,"d",(function(){return MSG_DETAIL}));var COMMON_TEXT={MESSAGE_ERROR:{DEFAULT:"C\xf3 l\u1ed7i x\u1ea3y ra",UPLOAD_01:"H\xecnh c\xf3 k\xedch th\u01b0\u1edbc qu\xe1 l\u1edbn (nh\u1ecf h\u01a1n 5MB)",UPLOAD_02:"Sai \u0111\u1ecbnh d\u1ea1ng t\u1ec7p",UPLOAD_03:"Kh\xf4ng th\u1ec3 g\u1eedi \u1ea3nh",UPLOAD_04:"Kh\xf4ng th\u1ec3 g\u1eedi m\xe3 gi\u1ea3m gi\xe1",LIMIT_TEXT:"Vui l\xf2ng nh\u1eadp nh\u1ecf h\u01a1n 1000 k\xfd t\u1ef1.",REQUIRED_TEXT:"Vui l\xf2ng nh\u1eadp n\u1ed9i dung tin nh\u1eafn."},CHAT_MSG:{YOU_SENT_IMAGE_TO:"B\u1ea1n g\u1eedi h\xecnh \u1ea3nh cho ",TOPIC:{ORDER:{LABEL:"\u0110\u01a1n h\xe0ng:"},VOUCHER:{LABEL:"Ng\u01b0\u1eddi b\xe1n gi\u1ea3m gi\xe1 cho s\u1ea3n ph\u1ea9m",EXPIRE_INFO:{CODE_LABEL:'M\xe3 "',DISCOUNT_LABEL:'" gi\u1ea3m ',WILL_EXPIRE:"H\u1ebft h\u1ea1n v\xe0o ",AT:"ng\xe0y "}}},STATUS:{NOT_SENT:"Kh\xf4ng th\u1ec3 g\u1eedi",SENDING:"\u0110ang g\u1eedi",SENT:"\u0110\xe3 g\u1eedi",INFO:{HAVE_READ:"\u0110\xe3 xem ",AT:"l\xfac ",BEFORE:" tr\u01b0\u1edbc"}},REQUIRE_USING_APP_FOR_RATING:"Vui l\xf2ng t\u1ea3i \u1ee9ng d\u1ee5ng Sendo \u0111\u1ec3 th\u1ef1c hi\u1ec7n \u0111\xe1nh gi\xe1"},TOOLTIP:{UPDATE_PICTURE_BTN:"G\u1eedi h\xecnh \u1ea3nh",CREATE_VOUCHER_BTN:"T\u1ea1o m\xe3 gi\u1ea3m gi\xe1",OPEN_EMOJI_BTN:"G\u1eedi bi\u1ec3u c\u1ea3m",SEARCH_BTN:"T\xecm ng\u01b0\u1eddi chat",FILTER_BTN:"L\u1ecdc tin nh\u1eafn"},FILTER:{ALL:"T\u1ea5t c\u1ea3",UNREAD:"Ch\u01b0a \u0111\u1ecdc"},CHAT_FORM:{CHAT_INPUT_PLACEHOLDER:"Nh\u1eadp n\u1ed9i dung"},CHAT_ERROR:{FAILED_LOAD_HISTORY:"Xin l\u1ed7i, kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c l\u1ecbch s\u1eed chat. B\u1ea1n vui l\xf2ng th\u1eed l\u1ea1i sau"}},CONVERSATION_CONTENT={SENT_IMAGES:"B\u1ea1n \u0111\xe3 g\u1eedi \u1ea3nh cho ",RECEIVED_IMAGES:"B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c h\xecnh \u1ea3nh t\u1eeb ",RECEIVED_VOUCHER:"B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c m\xe3 gi\u1ea3m gi\xe1 t\u1eeb ",RECEIVED_ORDER:"B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c \u0111\u01a1n h\xe0ng t\u1eeb ",RECEIVED_RATING:"B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c y\xeau c\u1ea7u \u0111\xe1nh gi\xe1 t\u1eeb ",RECEIVED_PRODUCTS:"B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c s\u1ea3n ph\u1ea9m t\u1eeb "},TOOLTIP={OPEN_EMOJI_BTN:"G\u1eedi bi\u1ec3u c\u1ea3m",SEND_ORDER:"G\u1eedi \u0111\u01a1n h\xe0ng",SEND_PRODUCT:"G\u1eedi s\u1ea3n ph\u1ea9m"},CHAT_GUIDE={PLEASE_ACCESS_IN_SENDO:"B\u1ea1n vui l\xf2ng truy c\u1eadp ",FOR_OPENING_CHAT:" \u0111\u1ec3 b\u1eaft \u0111\u1ea7u Chat"},ORDER_MODAL={HEADER_LABEL:"\u0110\u01a1n h\xe0ng ",ORDER_OF_USER_HEADER_LABEL:"\u0110\u01a1n h\xe0ng tr\xean Sendo 60 ng\xe0y qua"},PRODUCT_MODAL={HEADER_LABEL:"G\u1eedi s\u1ea3n ph\u1ea9m "},MSG_DETAIL={ORDER:{LABEL:"\u0110\u01a1n h\xe0ng: #",STATUS_TEXT_1:"\u0110ang x\xe1c nh\u1eadn",STATUS_TEXT_2:"\u0110\xe3 x\xe1c nh\u1eadn",STATUS_TEXT_3:"\u0110ang v\u1eadn chuy\u1ec3n",STATUS_TEXT_4:"\u0110\xe3 nh\u1eadn h\xe0ng"}}},k6RH:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CHAT_FILTER_OPTIONS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return SENLIVE_FILTER_OPTIONS}));var sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1wGr"),CHAT_FILTER_OPTIONS=[{type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_0__.l.ALL,name:"T\u1ea5t c\u1ea3"},{type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_0__.l.UNREPLIED,name:"Ch\u01b0a tr\u1ea3 l\u1eddi"},{type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_0__.l.UNREAD,name:"Ch\u01b0a \u0111\u1ecdc"}],SENLIVE_FILTER_OPTIONS=[{type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_0__.m.ALL,name:"T\u1ea5t c\u1ea3"}]},kiQV:function(module){module.exports=JSON.parse('{"a":"2.7.0"}')},"o//j":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return initCustomUIData})),__webpack_require__.d(__webpack_exports__,"i",(function(){return updateCustomUIDataNewMessage})),__webpack_require__.d(__webpack_exports__,"d",(function(){return initCustomUIDataChatDetails})),__webpack_require__.d(__webpack_exports__,"h",(function(){return updateCustomUIDataChatDetails})),__webpack_require__.d(__webpack_exports__,"j",(function(){return updateExistedMsg})),__webpack_require__.d(__webpack_exports__,"f",(function(){return setMsgToSeenFromClient})),__webpack_require__.d(__webpack_exports__,"e",(function(){return setChatListSeenFromClient})),__webpack_require__.d(__webpack_exports__,"k",(function(){return updateMessageTypeByParentContextData})),__webpack_require__.d(__webpack_exports__,"g",(function(){return shouldIgnoreNextTopic})),__webpack_require__.d(__webpack_exports__,"l",(function(){return updateReceiverByParentContextData})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getReceivedMsgLogicType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addTimeDivider}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),lodash_es_findLastIndex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("3ftV"),lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("XIp8"),lodash_es_get__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7EGn"),lodash_es_includes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("NFsq"),lodash_es_map__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("zmn3"),lodash_es_last__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("qAkX"),_data_userHelper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("xbIa"),_data_chatHelper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("G77k"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("1wGr"),sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1wi/"),_format_timeSince__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("1UAq");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var initCustomUIData=function(msgDetail,clientInfo){void 0===clientInfo&&(clientInfo=null);var result=_objectSpread({},msgDetail);return result.message_type||(result.message_type=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.s.MESSAGE),result.timestamp||(result.timestamp=(new Date).getTime()),result.isDisplayStatus=!1,result.isDisplayTime=!1,result.message_object&&result.message_object.type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.q.IMAGE&&(result.isNewImage=!0),clientInfo&&(result.clientInfo=clientInfo),result.isDisplayAIQuickReplies=!1,result},updateCustomUIDataNewMessage=function(message){return message.timestamp||(message.timestamp=(new Date).getTime()),message.message_type!==sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.s.MESSAGE&&message.message_type!==sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.s.AUTO_REPLY||(message.isDisplayStatus=!0,message.isDisplayTime=!0),message},initCustomUIDataChatDetails=function(chatDetails){return Object(lodash_es_map__WEBPACK_IMPORTED_MODULE_5__.a)(chatDetails,(function(message){return initCustomUIData(message)}))},updateCustomUIDataChatDetails=function(addedCustomUIChatDetails){var result=Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_2__.a)(addedCustomUIChatDetails),lastPartnerIndex=Object(lodash_es_findLastIndex__WEBPACK_IMPORTED_MODULE_1__.a)(result,{is_owner:0});lastPartnerIndex>-1&&(result[lastPartnerIndex].isDisplayTime=!0,result[lastPartnerIndex].isDisplayStatus=!1);var lastOwnerIndex=Object(lodash_es_findLastIndex__WEBPACK_IMPORTED_MODULE_1__.a)(result,{is_owner:1});return lastOwnerIndex>-1&&(result[lastOwnerIndex].isDisplayTime=!0,lastOwnerIndex>lastPartnerIndex&&(result[lastOwnerIndex].isDisplayStatus=!0)),Boolean(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(Object(lodash_es_last__WEBPACK_IMPORTED_MODULE_6__.a)(result),"message_object.botContent.message.quick_replies",[]).length)&&(result[addedCustomUIChatDetails.length-1].isDisplayAIQuickReplies=!0),result},updateExistedMsg=function(currentMsgDetails,updateMsgDetail){var updatedMsgDetails=[].concat(currentMsgDetails),lastUpdateMsgDetailIndex=Object(lodash_es_findLastIndex__WEBPACK_IMPORTED_MODULE_1__.a)(updatedMsgDetails,{message_id:updateMsgDetail.message_id});return updatedMsgDetails[lastUpdateMsgDetailIndex]&&(updatedMsgDetails[lastUpdateMsgDetailIndex]=_objectSpread({},updateMsgDetail,{isDisplayStatus:updatedMsgDetails[lastUpdateMsgDetailIndex].isDisplayStatus,isDisplayTime:updatedMsgDetails[lastUpdateMsgDetailIndex].isDisplayTime})),updatedMsgDetails},setMsgToSeenFromClient=function(currentMsgDetails,index,seenData){var newMsgDetails=Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_2__.a)(currentMsgDetails);return newMsgDetails[index].is_owner?newMsgDetails[index].timestamp=(new Date).getTime():newMsgDetails[index].is_read=1,newMsgDetails[index].message_status=Object(_data_chatHelper__WEBPACK_IMPORTED_MODULE_8__.l)(_objectSpread({},newMsgDetails[index],{you_re_shop:seenData.you_re_shop})),newMsgDetails},setChatListSeenFromClient=function(currentChatLists,index,seenData){var newChatLists=Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_2__.a)(currentChatLists);return newChatLists[index].message_status=Object(_data_chatHelper__WEBPACK_IMPORTED_MODULE_8__.l)(_objectSpread({},newChatLists[index],{you_re_shop:seenData.you_re_shop})),newChatLists},updateMessageTypeByParentContextData=function(currentTopic,parentContextData,isHaveTopicMsgInDetails){return shouldIgnoreNextTopic(currentTopic,parentContextData,isHaveTopicMsgInDetails)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.s.MESSAGE:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.s.TOPIC};function shouldIgnoreNextTopic(currentTopic,parentContextData,isHaveTopicMsgInDetails){var newTopic=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(parentContextData,"topic",null),isNewChat=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(parentContextData,"isNew",!1);if(!newTopic)return!0;var isResendDuplicateTopic=!1;currentTopic&&currentTopic.timestamp&&newTopic.timestamp&&(Object(_format_timeSince__WEBPACK_IMPORTED_MODULE_11__.a)(newTopic.timestamp-currentTopic.timestamp)>=sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_10__.L&&(isResendDuplicateTopic=!0));var currentTopicItemId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(currentTopic,"items.0.id",""),newTopicItemId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(newTopic,"items.0.id",""),currentTopicType=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(currentTopic,"type",""),newTopicType=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(newTopic,"type",""),shouldIgnoreTopic=Boolean(currentTopicItemId===newTopicItemId&&currentTopicType===newTopicType&&!isNewChat&&isHaveTopicMsgInDetails&&!isResendDuplicateTopic),currentOptionsLabel=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(currentTopic,"items.0.selected_options_label",""),newOptionsLabel=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(newTopic,"items.0.selected_options_label",""),isChangedOptions=Boolean(currentOptionsLabel!==newOptionsLabel);return!(!shouldIgnoreTopic||isChangedOptions)}var updateReceiverByParentContextData=function(receiver,parentContextData){var newReceiver=_objectSpread({},receiver);return parentContextData&&parentContextData.productId&&(newReceiver.product_id=parentContextData.productId,newReceiver.product_image=parentContextData.productImage),newReceiver};function getReceivedMsgLogicType(msgDetail,xmppUsername){if(_data_userHelper__WEBPACK_IMPORTED_MODULE_7__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.F.BUYER){if(!msgDetail.is_owner)return msgDetail.you_re_shop?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_OTHER_SELLER_TO_ME_BUYER:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_OTHER_BUYER_TO_ME_BUYER;if(msgDetail.is_owner)return msgDetail.you_re_shop?Object(lodash_es_includes__WEBPACK_IMPORTED_MODULE_4__.a)(xmppUsername,msgDetail.partner_id)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_ANOTHER_ME_SELLER_TO_ME_BUYER:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_ANOTHER_ME_SELLER_TO_OTHER_BUYER:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_ANOTHER_ME_BUYER_TO_ME_BUYER}if(_data_userHelper__WEBPACK_IMPORTED_MODULE_7__.a.getRole()===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.F.SELLER){if(!msgDetail.is_owner)return msgDetail.you_re_shop?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_OTHER_SELLER_TO_ME_SELLER:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_OTHER_BUYER_TO_ME_SELLER;if(msgDetail.is_owner)return msgDetail.you_re_shop?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_ANOTHER_ME_SELLER_TO_ME_SELLER:Object(lodash_es_includes__WEBPACK_IMPORTED_MODULE_4__.a)(xmppUsername,msgDetail.partner_id)?sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_ANOTHER_ME_BUYER_TO_ME_SELLER:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.FROM_ANOTHER_ME_BUYER_TO_OTHER_SELLER}return sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.y.NONE}function addTimeDivider(chatDetails,firstLastMsg){for(var results=[],index=0;index<chatDetails.length;index++){var currMsg=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(chatDetails,""+index,null),nextMsg=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_3__.a)(chatDetails,""+(index+1),null);if(0===index){var _timeDividerMsg=createTimeDivider(null,currMsg);_timeDividerMsg&&results.push(_timeDividerMsg)}if(results.push(currMsg),!nextMsg)break;var timeDividerMsg=createTimeDivider(currMsg,nextMsg);timeDividerMsg&&results.push(timeDividerMsg)}if(!results.length)return chatDetails;if(firstLastMsg){var _timeDividerMsg2=createTimeDivider(chatDetails[chatDetails.length-1],firstLastMsg);_timeDividerMsg2&&results.push(_timeDividerMsg2)}return results}function createTimeDivider(currMsg,nextMsg){if(!nextMsg)return null;var nextDate=new Date(nextMsg.timestamp);return currMsg?new Date(currMsg.timestamp).getDate()!==nextDate.getDate()?_objectSpread({},nextMsg,{message_type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.s.TIME_DIVIDER,text:getTimeDividerText(nextDate),timestamp:nextMsg.timestamp}):null:_objectSpread({},nextMsg,{message_type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_9__.s.TIME_DIVIDER,text:getTimeDividerText(nextDate),timestamp:nextMsg.timestamp})}function getTimeDividerText(nextDate){var nowDate=new Date(Date.now()),elapsedDays=Math.floor((nowDate.getTime()-nextDate.getTime())/864e5);if(0===elapsedDays&&nextDate.getDate()===nowDate.getDate())return"H\xf4m nay";if(1===elapsedDays&&nextDate.getDate()===nowDate.getDate()-1)return"H\xf4m qua";if(elapsedDays<=7){return["Th\u1ee9 2","Th\u1ee9 3","Th\u1ee9 4","Th\u1ee9 5","Th\u1ee9 6","Th\u1ee9 7","Ch\u1ee7 nh\u1eadt"][nextDate.getDay()-1]}return("0"+nextDate.getDate()).slice(-2)+"/"+["01","02","03","04","05","06","07","08","09","10","11","12"][nextDate.getMonth()]+"/"+nextDate.getFullYear()}},otHA:function(module,exports,__webpack_require__){module.exports={hidden:"hidden_3e0D",hide:"hide_2ZLe",Root:"Root_osoL",onDesktop:"onDesktop_1jWL"}},qWR6:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BUYER_TEXT}));var BUYER_TEXT={IFRAME_HEADER:"Chat c\xf9ng shop",CHAT_GUIDE:{PRESS_BUTTON:"B\u1ea5m v\xe0o",CHAT_NOW:"Chat ngay",AT_PAGE:"\u1edf trang",DETAIL_TO_CHAT:"chi ti\u1ebft s\u1ea3n ph\u1ea9m \u0111\u1ec3 chat v\u1edbi shop",NOT_VALID_SELLER:"",ASK_CHAT_PERMISSION:""},MOBILE:{IFRAME_HEADER:"Danh s\xe1ch chat "},VOUCHER_MODAL:{HEADER_LABEL:"",BODY_NOTE:"",VOUCHER_AMOUNT_LABEL:"",ORDER_FROM_LABEL:"",LIMIT_TIME_LABEL:"",TIME_UNIT:"",SUBMIT_BTN:"",ERROR:{AMOUNT_GREATER_THAN_HALF_PRICE:"Gi\xe1 tr\u1ecb m\xe3 gi\u1ea3m gi\xe1 ph\u1ea3i d\u01b0\u1edbi 50% gi\xe1 tr\u1ecb \u0111\u01a1n h\xe0ng t\u1ed1i thi\u1ec3u",AMOUNT_LOWER_THAN_MIN:"Vui l\xf2ng t\u1ea1o m\xe3 gi\u1ea3m gi\xe1 t\u1eeb 10.000 tr\u1edf l\xean",AMOUNT_MUST_MUTIPLE_OF_10k:"S\u1ed1 ti\u1ec1n gi\u1ea3m l\xe0 b\u1ed9i s\u1ed1 c\u1ee7a 10.000",PRODUCT_PRICE_MUST_GREATER_THEN_20K:"S\u1ea3n ph\u1ea9m ph\u1ea3i c\xf3 gi\xe1 t\u1eeb 20k"},FORM:{VOUCHER_VALUE_LABEL:"",VOUCHER_VALUE_PLACEHOLDER:"",DURATION_LABEL:"",DURATION_UNIT:"",BUYER_NAME:"",SUBMIT_BTN:""}},CHAT_ERROR:{FAILED_LOAD_HISTORY:"Xin l\u1ed7i, kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c l\u1ecbch s\u1eed chat. B\u1ea1n vui l\xf2ng th\u1eed l\u1ea1i sau"}}},t4TX:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return formatImageForDisplay})),__webpack_require__.d(__webpack_exports__,"e",(function(){return formatPriceForVnd})),__webpack_require__.d(__webpack_exports__,"b",(function(){return convertToProductTopic})),__webpack_require__.d(__webpack_exports__,"a",(function(){return convertToOrderTopic})),__webpack_require__.d(__webpack_exports__,"c",(function(){return convertToShopTopic})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getLinksAndTexts})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isValidDisplayUrl}));var linkify_it__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("+80P"),linkify_it__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(linkify_it__WEBPACK_IMPORTED_MODULE_0__),lodash_es_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7EGn"),lodash_es_includes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("NFsq"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1wGr"),sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1wi/"),formatImageForDisplay=function(imageOriginalUrl,size){if(!imageOriginalUrl)return"";var result=imageOriginalUrl;-1===(result=result.replace("https:/media3.scdn.vn","https://media3.scdn.vn")).indexOf("media3.scdn.vn")&&-1===result.indexOf("mtest.scdn.vn")&&-1===result.indexOf("media3-stg.scdn.vn")&&(result="https://media3.scdn.vn"+result);var regAlreadyContainSize=/\d+x\d+_max/g;return result=regAlreadyContainSize.test(result)?result.replace(regAlreadyContainSize,size+"_max"):(result=(result=result.replace(".png","_simg_ab1f47_"+size+"_max.png")).replace(".jpg","_simg_ab1f47_"+size+"_max.jpg")).replace(".svg","_simg_ab1f47_"+size+"_max.svg")},formatPriceForVnd=function(price,isOriginPrice){if(void 0===isOriginPrice&&(isOriginPrice=!1),!(price=parseInt(price,10)))return"";var result=(price+="").replace(/./g,(function(char,index,data){return index>0&&"."!==char&&(data.length-index)%3===0?"."+char:char}));return result+="\u0111"},convertToProductTopic=function(product){var id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"id","")+"",name=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"name",""),final_price=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"final_price",""),price=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"price",""),image_url=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"image_url","");image_url||(image_url=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"image",""));var url=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"url","");if(url||(url="/"+Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"url_key","")+".html"),!id||!name||!final_price||!price||!url)return null;var topicProduct={type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.E.PRODUCT,timestamp:Math.round((new Date).getTime()),items:[]},productItem={id:id,name:name,final_price:final_price,image_url:image_url,url:url,price:price,external_id:id,urls:[],order_attr:null,voucher_attr:null,final_price_label:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"final_price_label",""),price_label:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"price_label",""),selected_options_label:Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(product,"selected_options_label","")};return topicProduct.items.push(productItem),topicProduct},convertToOrderTopic=function(order){var id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(order,"number",""),final_price=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(order,"final_price",""),image_url=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(order,"first_product.image_url",""),name=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(order,"first_product.name",""),url=sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.z.BUYER_ORDER_DETAIL+id;if(!id||!final_price||!name||!url)return null;var topicOrder={type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.E.ORDER,timestamp:Math.round((new Date).getTime()),items:[]},orderItem={id:id,name:name,final_price:final_price,image_url:image_url,url:url,urls:[]};return topicOrder.items.push(orderItem),topicOrder},convertToShopTopic=function(shopInfo){var id=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(shopInfo,"shop_id",""),image_url=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(shopInfo,"shop_logo",""),name=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(shopInfo,"shop_name",""),url=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(shopInfo,"shop_url","");if(!id||!name||!url)return null;var topicShop={type:sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.E.SHOP,timestamp:Math.round((new Date).getTime()),items:[]},shopItem={id:id,name:name,final_price:"",image_url:image_url,url:url,external_id:"",urls:[]};return topicShop.items.push(shopItem),topicShop},getLinksAndTexts=function(textContent){var textContentParts=[],urlLinks=(new linkify_it__WEBPACK_IMPORTED_MODULE_0___default.a).match(textContent);if(!urlLinks||!urlLinks.length)return textContentParts;var lastUrlIndex=0;if(urlLinks.forEach((function(urlLink){if(urlLink.index>lastUrlIndex){var normalText={type:"text",text:textContent.substring(lastUrlIndex,urlLink.index)};textContentParts.push(normalText)}var urlText={type:"url",text:urlLink.raw,url:urlLink.url};textContentParts.push(urlText),lastUrlIndex=urlLink.lastIndex})),textContent.length>lastUrlIndex){var remainingText={type:"text",text:textContent.substring(lastUrlIndex)};textContentParts.push(remainingText)}return textContentParts};function isValidDisplayUrl(testUrl){var result=!1;return sendo_web_chat_setting__WEBPACK_IMPORTED_MODULE_4__.a.forEach((function(allow_url){Object(lodash_es_includes__WEBPACK_IMPORTED_MODULE_2__.a)(testUrl,allow_url)&&(result=!0)})),result}},ulJp:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/livestream_logo.ee7a4b13.png"},vURH:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return buildMessageData})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getClientInfo})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getPartnerUserID})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isFetchedHistoryListByFilterType})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getChatListByFilterType})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAnotherChatListExludeFilterType})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getPagingByFilterType})),__webpack_require__.d(__webpack_exports__,"h",(function(){return removeDuplicatedChatList}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),lodash_es_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7EGn"),lodash_es_uniqWith__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ipyK"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1wGr"),sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("N6vC"),sendo_web_chat_res_text__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("i8SR");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function buildMessageData(payloadData,user_id,createdByUserId){var messageData=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({type:"chat",user_id:user_id,createdByUserId:createdByUserId},payloadData);return messageData.body=function(messageData){var result=messageData.body;messageData.message_object_type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.q.IMAGE&&(result=sendo_web_chat_res_text__WEBPACK_IMPORTED_MODULE_5__.c.SENT_IMAGES+Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(messageData.receiver,"partner_fullname",""));var errorType=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(messageData.error,"type",0);return errorType&&(errorType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.k.MSG_DETAIL.ERROR_TYPE.IMAGE&&(result="L\u1ed7i: "+messageData.error.msg+"}"),result="Kh\xf4ng th\u1ec3 g\u1eedi tin nh\u1eafn"),messageData.isTempMessage&&(result="\u0110ang g\u1eedi...",messageData.message_object_type===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.q.VOUCHER&&(result="\u0110ang g\u1eedi voucher")),result}(messageData),messageData.idmessage||(messageData.idmessage=Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_4__.n)()),messageData.message_object||(messageData.message_object=Object(sendo_web_chat_helpers_xmpp__WEBPACK_IMPORTED_MODULE_4__.d)(messageData)),messageData}function getClientInfo(messageData){var clientInfo={};return messageData.error&&(clientInfo.error=messageData.error),messageData.isTempMessage&&(clientInfo.isTempMessage=messageData.isTempMessage),messageData.isUpdateExistedMsg&&(clientInfo.isUpdateExistedMsg=messageData.isUpdateExistedMsg),clientInfo}function getPartnerUserID(reduxState){var userInfo=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(reduxState,"auth.userInfo",{}),userFptId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(userInfo,"fpt_id",""),shopPartnerFptId=Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(userInfo,"shopPartnerFptId",""),result="";return shopPartnerFptId&&shopPartnerFptId!==userFptId&&(result=shopPartnerFptId),result}function isFetchedHistoryListByFilterType(reduxState,filterType){if(reduxState.chat.chatSystemType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.f.SENLIVE)return function(reduxState,filterType){switch(filterType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.m.ALL:return reduxState.chat.filterSenLiveList.isFetchedAll;default:return reduxState.chat.filterChatList.isFetchedAll}}(reduxState,filterType);switch(filterType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREPLIED:return reduxState.chat.filterChatList.isFetchedUnreplied;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREAD:return reduxState.chat.filterChatList.isFetchedUnread;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.ALL:default:return reduxState.chat.filterChatList.isFetchedAll}}function getChatListByFilterType(chatState,filterType){if(chatState.chatSystemType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.f.SENLIVE)return function(chatState,filterType){switch(filterType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.m.ALL:default:return chatState.filterSenLiveList.all}}(chatState,filterType);switch(filterType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREPLIED:return chatState.filterChatList.unreplied;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREAD:return chatState.filterChatList.unread;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.ALL:default:return chatState.filterChatList.all}}function getAnotherChatListExludeFilterType(chatState,filterType){switch(filterType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREPLIED:return[].concat(chatState.filterChatList.all,chatState.filterChatList.unread);case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREAD:return[].concat(chatState.filterChatList.all,chatState.filterChatList.unreplied);case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.ALL:return[].concat(chatState.filterChatList.unreplied,chatState.filterChatList.unread);default:return chatState.filterChatList.all}}function getPagingByFilterType(reduxState,filterType){if(reduxState.chat.chatSystemType===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.f.SENLIVE)return function(reduxState,filterType){switch(filterType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.m.ALL:default:return reduxState.chat.filterSenLiveList.allPaging}}(reduxState,filterType);switch(filterType){case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREPLIED:return reduxState.chat.filterChatList.unrepliedPaging;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.UNREAD:return reduxState.chat.filterChatList.unreadPaging;case sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.l.ALL:default:return reduxState.chat.filterChatList.allPaging}}function removeDuplicatedChatList(chatList){return Object(lodash_es_uniqWith__WEBPACK_IMPORTED_MODULE_2__.a)(chatList,(function(currChat,nextChat){return currChat.chat_id===nextChat.chat_id}))}},wTzx:function(module,__webpack_exports__,__webpack_require__){"use strict";function getResponsiveStyles(styles,className,isOnWAP){var result=[];return className&&result.push(className),isOnWAP?result:(result.push(styles.onDesktop),result)}__webpack_require__.d(__webpack_exports__,"a",(function(){return getResponsiveStyles}))},xbIa:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UserHelper}));var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),lodash_es_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7EGn"),sendo_web_sdk_helpers_auth__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fbtF"),sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1wGr"),sendo_web_chat_res_sellerText__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("egp3"),sendo_web_chat_res_buyerText__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("qWR6");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var UserHelper=function(){function UserHelper(){}return UserHelper.getFullname=function(userInfo){return this.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.F.BUYER?Object(sendo_web_sdk_helpers_auth__WEBPACK_IMPORTED_MODULE_2__.a)(userInfo):Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__.a)(userInfo,"shop_name","")},UserHelper.getRole=function(){return this.role},UserHelper.parseNewUserInfo=function(userInfo){if(!userInfo)return null;var result=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},userInfo);return this.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.F.BUYER&&(result.full_name=userInfo.fullname),this.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.F.SELLER&&(result.full_name=userInfo.shop_name,result.avatar=userInfo.shop_logo,result.shop_id&&(result.shop_external_id=result.shop_id)),result},UserHelper.saveCurrentUserInfo=function(userInfo){this.currentUserInfo=userInfo},UserHelper.getCurrentUserInfo=function(){return this.currentUserInfo},UserHelper.parseSellerInfoToUserInfo=function(sellerInfo){return sellerInfo?{shop_name:sellerInfo.name,shop_logo:sellerInfo.logo,shop_url:sellerInfo.url,shopFptId:sellerInfo.fpt_id}:null},UserHelper.isValidUserInfo=function(auditUserInfo){return!!auditUserInfo.isValid},UserHelper.isNeedWaitGetUserInfo=function(auditUserInfo){return!auditUserInfo.isCalledApi},UserHelper.getIsShop=function(){return this.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.F.SELLER?1:0},UserHelper.isSeller=function(){return this.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.F.SELLER},UserHelper.isBuyer=function(){return this.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.F.BUYER},UserHelper.getRoleText=function(){return this.role===sendo_web_chat_res_const__WEBPACK_IMPORTED_MODULE_3__.F.SELLER?sendo_web_chat_res_sellerText__WEBPACK_IMPORTED_MODULE_4__.a:sendo_web_chat_res_buyerText__WEBPACK_IMPORTED_MODULE_5__.a},UserHelper}();_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(UserHelper,"role",""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(UserHelper,"isShopPartner",!1),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(UserHelper,"currentUserInfo",{})},xnfK:function(module,__webpack_exports__,__webpack_require__){"use strict";function isLinuxOS(){return Boolean(-1!==navigator.appVersion.indexOf("Linux"))}function isUnixOS(){return Boolean(-1!==navigator.appVersion.indexOf("X11"))}function isWindowOS(){return Boolean(-1!==navigator.appVersion.indexOf("Win"))}function isValidFile(fileOrBlob){return Boolean(fileOrBlob.name&&"string"==typeof fileOrBlob.name)}function convertBlobToFile(blob,fileName){return blob.lastModified=new Date,blob.lastModifiedDate=new Date,blob.name=fileName,blob}__webpack_require__.d(__webpack_exports__,"b",(function(){return isLinuxOS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isUnixOS})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isWindowOS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isValidFile})),__webpack_require__.d(__webpack_exports__,"a",(function(){return convertBlobToFile}))}}]);